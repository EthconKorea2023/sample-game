import{s as $i,g as Nt,a as br,c as lr,b as Li,d as be,e as re,_ as Ni,f as Ui,h as Fi,i as qi,j as Ki,k as Mi,l as Hi,m as Di,p as ji,n as zi,r as Wi,o as ra,q as Ge,t as de,B as fs,u as pe,v as dt,w as ye,x as or,y as wr,z as S,A as g,C as _e,D as Vi,E as hs,F as Rt,G as Cn,H as pt,I as Ut,J as se,K as ds,W as Tn,L as Pn,M as On,N as Gi}from"./index-b8ae934c.js";import{n as Zi}from"./nacl-fast-57bd7544.js";var bt=$i.Buffer;function Yi(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),e=0;e<r.length;e++)r[e]=255;for(var t=0;t<n.length;t++){var s=n.charAt(t),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=t}var i=n.length,o=n.charAt(0),u=Math.log(i)/Math.log(256),c=Math.log(256)/Math.log(i);function l(p){if((Array.isArray(p)||p instanceof Uint8Array)&&(p=bt.from(p)),!bt.isBuffer(p))throw new TypeError("Expected Buffer");if(p.length===0)return"";for(var d=0,v=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,d++;for(var w=(b-m)*c+1>>>0,y=new Uint8Array(w);m!==b;){for(var A=p[m],k=0,C=w-1;(A!==0||k<v)&&C!==-1;C--,k++)A+=256*y[C]>>>0,y[C]=A%i>>>0,A=A/i>>>0;if(A!==0)throw new Error("Non-zero carry");v=k,m++}for(var E=w-v;E!==w&&y[E]===0;)E++;for(var T=o.repeat(d);E<w;++E)T+=n.charAt(y[E]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return bt.alloc(0);for(var d=0,v=0,m=0;p[d]===o;)v++,d++;for(var b=(p.length-d)*u+1>>>0,w=new Uint8Array(b);p[d];){var y=r[p.charCodeAt(d)];if(y===255)return;for(var A=0,k=b-1;(y!==0||A<m)&&k!==-1;k--,A++)y+=i*w[k]>>>0,w[k]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");m=A,d++}for(var C=b-m;C!==b&&w[C]===0;)C++;var E=bt.allocUnsafe(v+(b-C));E.fill(0,0,v);for(var T=v;C!==b;)E[T++]=w[C++];return E}function h(p){var d=f(p);if(d)return d;throw new Error("Non-base"+i+" character")}return{encode:l,decodeUnsafe:f,decode:h}}var Ji=Yi,Xi=Ji,Qi="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ta=Xi(Qi);const he=Nt(ta);function ps(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function na(n,...r){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(r.length>0&&!r.includes(n.length))throw new Error(`Expected Uint8Array of length ${r}, not of length=${n.length}`)}function eo(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ps(n.outputLen),ps(n.blockLen)}function Ct(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")}function ro(n,r){na(n);const e=r.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Yt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sa=n=>n instanceof Uint8Array,Jt=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ur=(n,r)=>n<<32-r|n>>>r,to=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!to)throw new Error("Non little-endian hardware is not supported");function no(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function _n(n){if(typeof n=="string"&&(n=no(n)),!sa(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function so(...n){const r=new Uint8Array(n.reduce((t,s)=>t+s.length,0));let e=0;return n.forEach(t=>{if(!sa(t))throw new Error("Uint8Array expected");r.set(t,e),e+=t.length}),r}class aa{clone(){return this._cloneInto()}}function ia(n){const r=t=>n().update(_n(t)).digest(),e=n();return r.outputLen=e.outputLen,r.blockLen=e.blockLen,r.create=()=>n(),r}function oa(n=32){if(Yt&&typeof Yt.getRandomValues=="function")return Yt.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function ao(n,r,e,t){if(typeof n.setBigUint64=="function")return n.setBigUint64(r,e,t);const s=BigInt(32),a=BigInt(4294967295),i=Number(e>>s&a),o=Number(e&a),u=t?4:0,c=t?0:4;n.setUint32(r+u,i,t),n.setUint32(r+c,o,t)}class ua extends aa{constructor(r,e,t,s){super(),this.blockLen=r,this.outputLen=e,this.padOffset=t,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=Jt(this.buffer)}update(r){Ct(this);const{view:e,buffer:t,blockLen:s}=this;r=_n(r);const a=r.length;for(let i=0;i<a;){const o=Math.min(s-this.pos,a-i);if(o===s){const u=Jt(r);for(;s<=a-i;i+=s)this.process(u,i);continue}t.set(r.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){Ct(this),ro(r,this),this.finished=!0;const{buffer:e,view:t,blockLen:s,isLE:a}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(t,0),i=0);for(let f=i;f<s;f++)e[f]=0;ao(t,s-8,BigInt(this.length*8),a),this.process(t,0);const o=Jt(r),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)o.setUint32(4*f,l[f],a)}digest(){const{buffer:r,outputLen:e}=this;this.digestInto(r);const t=r.slice(0,e);return this.destroy(),t}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:e,buffer:t,length:s,finished:a,destroyed:i,pos:o}=this;return r.length=s,r.pos=o,r.finished=a,r.destroyed=i,s%e&&r.buffer.set(t),r}}const wt=BigInt(2**32-1),pn=BigInt(32);function ca(n,r=!1){return r?{h:Number(n&wt),l:Number(n>>pn&wt)}:{h:Number(n>>pn&wt)|0,l:Number(n&wt)|0}}function io(n,r=!1){let e=new Uint32Array(n.length),t=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:a,l:i}=ca(n[s],r);[e[s],t[s]]=[a,i]}return[e,t]}const oo=(n,r)=>BigInt(n>>>0)<<pn|BigInt(r>>>0),uo=(n,r,e)=>n>>>e,co=(n,r,e)=>n<<32-e|r>>>e,lo=(n,r,e)=>n>>>e|r<<32-e,fo=(n,r,e)=>n<<32-e|r>>>e,ho=(n,r,e)=>n<<64-e|r>>>e-32,po=(n,r,e)=>n>>>e-32|r<<64-e,go=(n,r)=>r,mo=(n,r)=>n,vo=(n,r,e)=>n<<e|r>>>32-e,yo=(n,r,e)=>r<<e|n>>>32-e,bo=(n,r,e)=>r<<e-32|n>>>64-e,wo=(n,r,e)=>n<<e-32|r>>>64-e;function ko(n,r,e,t){const s=(r>>>0)+(t>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const So=(n,r,e)=>(n>>>0)+(r>>>0)+(e>>>0),Ao=(n,r,e,t)=>r+e+t+(n/2**32|0)|0,Eo=(n,r,e,t)=>(n>>>0)+(r>>>0)+(e>>>0)+(t>>>0),Bo=(n,r,e,t,s)=>r+e+t+s+(n/2**32|0)|0,Io=(n,r,e,t,s)=>(n>>>0)+(r>>>0)+(e>>>0)+(t>>>0)+(s>>>0),Ro=(n,r,e,t,s,a)=>r+e+t+s+a+(n/2**32|0)|0,Co={fromBig:ca,split:io,toBig:oo,shrSH:uo,shrSL:co,rotrSH:lo,rotrSL:fo,rotrBH:ho,rotrBL:po,rotr32H:go,rotr32L:mo,rotlSH:vo,rotlSL:yo,rotlBH:bo,rotlBL:wo,add:ko,add3L:So,add3H:Ao,add4L:Eo,add4H:Bo,add5H:Ro,add5L:Io},Q=Co,[To,Po]=(()=>Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),kr=new Uint32Array(80),Sr=new Uint32Array(80);class Oo extends ua{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:e,Bh:t,Bl:s,Ch:a,Cl:i,Dh:o,Dl:u,Eh:c,El:l,Fh:f,Fl:h,Gh:p,Gl:d,Hh:v,Hl:m}=this;return[r,e,t,s,a,i,o,u,c,l,f,h,p,d,v,m]}set(r,e,t,s,a,i,o,u,c,l,f,h,p,d,v,m){this.Ah=r|0,this.Al=e|0,this.Bh=t|0,this.Bl=s|0,this.Ch=a|0,this.Cl=i|0,this.Dh=o|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=f|0,this.Fl=h|0,this.Gh=p|0,this.Gl=d|0,this.Hh=v|0,this.Hl=m|0}process(r,e){for(let y=0;y<16;y++,e+=4)kr[y]=r.getUint32(e),Sr[y]=r.getUint32(e+=4);for(let y=16;y<80;y++){const A=kr[y-15]|0,k=Sr[y-15]|0,C=Q.rotrSH(A,k,1)^Q.rotrSH(A,k,8)^Q.shrSH(A,k,7),E=Q.rotrSL(A,k,1)^Q.rotrSL(A,k,8)^Q.shrSL(A,k,7),T=kr[y-2]|0,F=Sr[y-2]|0,O=Q.rotrSH(T,F,19)^Q.rotrBH(T,F,61)^Q.shrSH(T,F,6),H=Q.rotrSL(T,F,19)^Q.rotrBL(T,F,61)^Q.shrSL(T,F,6),M=Q.add4L(E,H,Sr[y-7],Sr[y-16]),ce=Q.add4H(M,C,O,kr[y-7],kr[y-16]);kr[y]=ce|0,Sr[y]=M|0}let{Ah:t,Al:s,Bh:a,Bl:i,Ch:o,Cl:u,Dh:c,Dl:l,Eh:f,El:h,Fh:p,Fl:d,Gh:v,Gl:m,Hh:b,Hl:w}=this;for(let y=0;y<80;y++){const A=Q.rotrSH(f,h,14)^Q.rotrSH(f,h,18)^Q.rotrBH(f,h,41),k=Q.rotrSL(f,h,14)^Q.rotrSL(f,h,18)^Q.rotrBL(f,h,41),C=f&p^~f&v,E=h&d^~h&m,T=Q.add5L(w,k,E,Po[y],Sr[y]),F=Q.add5H(T,b,A,C,To[y],kr[y]),O=T|0,H=Q.rotrSH(t,s,28)^Q.rotrBH(t,s,34)^Q.rotrBH(t,s,39),M=Q.rotrSL(t,s,28)^Q.rotrBL(t,s,34)^Q.rotrBL(t,s,39),ce=t&a^t&o^a&o,ge=s&i^s&u^i&u;b=v|0,w=m|0,v=p|0,m=d|0,p=f|0,d=h|0,{h:f,l:h}=Q.add(c|0,l|0,F|0,O|0),c=o|0,l=u|0,o=a|0,u=i|0,a=t|0,i=s|0;const _=Q.add3L(O,M,ge);t=Q.add3H(_,F,H,ce),s=_|0}({h:t,l:s}=Q.add(this.Ah|0,this.Al|0,t|0,s|0)),{h:a,l:i}=Q.add(this.Bh|0,this.Bl|0,a|0,i|0),{h:o,l:u}=Q.add(this.Ch|0,this.Cl|0,o|0,u|0),{h:c,l}=Q.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:f,l:h}=Q.add(this.Eh|0,this.El|0,f|0,h|0),{h:p,l:d}=Q.add(this.Fh|0,this.Fl|0,p|0,d|0),{h:v,l:m}=Q.add(this.Gh|0,this.Gl|0,v|0,m|0),{h:b,l:w}=Q.add(this.Hh|0,this.Hl|0,b|0,w|0),this.set(t,s,a,i,o,u,c,l,f,h,p,d,v,m,b,w)}roundClean(){kr.fill(0),Sr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const _o=ia(()=>new Oo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const la=BigInt(0),Ft=BigInt(1),xo=BigInt(2),qt=n=>n instanceof Uint8Array,$o=Array.from({length:256},(n,r)=>r.toString(16).padStart(2,"0"));function Ur(n){if(!qt(n))throw new Error("Uint8Array expected");let r="";for(let e=0;e<n.length;e++)r+=$o[n[e]];return r}function fa(n){const r=n.toString(16);return r.length&1?`0${r}`:r}function xn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function Gr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const r=n.length;if(r%2)throw new Error("padded hex string expected, got unpadded hex of length "+r);const e=new Uint8Array(r/2);for(let t=0;t<e.length;t++){const s=t*2,a=n.slice(s,s+2),i=Number.parseInt(a,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[t]=i}return e}function Lr(n){return xn(Ur(n))}function Wr(n){if(!qt(n))throw new Error("Uint8Array expected");return xn(Ur(Uint8Array.from(n).reverse()))}function Zr(n,r){return Gr(n.toString(16).padStart(r*2,"0"))}function ct(n,r){return Zr(n,r).reverse()}function Lo(n){return Gr(fa(n))}function Pe(n,r,e){let t;if(typeof r=="string")try{t=Gr(r)}catch(a){throw new Error(`${n} must be valid hex string, got "${r}". Cause: ${a}`)}else if(qt(r))t=Uint8Array.from(r);else throw new Error(`${n} must be hex string or Uint8Array`);const s=t.length;if(typeof e=="number"&&s!==e)throw new Error(`${n} expected ${e} bytes, got ${s}`);return t}function Fr(...n){const r=new Uint8Array(n.reduce((t,s)=>t+s.length,0));let e=0;return n.forEach(t=>{if(!qt(t))throw new Error("Uint8Array expected");r.set(t,e),e+=t.length}),r}function No(n,r){if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1;return!0}function Uo(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Fo(n){let r;for(r=0;n>la;n>>=Ft,r+=1);return r}function qo(n,r){return n>>BigInt(r)&Ft}const Ko=(n,r,e)=>n|(e?Ft:la)<<BigInt(r),$n=n=>(xo<<BigInt(n-1))-Ft,Xt=n=>new Uint8Array(n),gs=n=>Uint8Array.from(n);function ha(n,r,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let t=Xt(n),s=Xt(n),a=0;const i=()=>{t.fill(1),s.fill(0),a=0},o=(...f)=>e(s,t,...f),u=(f=Xt())=>{s=o(gs([0]),f),t=o(),f.length!==0&&(s=o(gs([1]),f),t=o())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<r;){t=o();const p=t.slice();h.push(p),f+=t.length}return Fr(...h)};return(f,h)=>{i(),u(f);let p;for(;!(p=h(c()));)u();return i(),p}}const Mo={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,r)=>r.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Qr(n,r,e={}){const t=(s,a,i)=>{const o=Mo[a];if(typeof o!="function")throw new Error(`Invalid validator "${a}", expected function`);const u=n[s];if(!(i&&u===void 0)&&!o(u,n))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${a}`)};for(const[s,a]of Object.entries(r))t(s,a,!1);for(const[s,a]of Object.entries(e))t(s,a,!0);return n}const Ho=Object.freeze(Object.defineProperty({__proto__:null,bitGet:qo,bitLen:Fo,bitMask:$n,bitSet:Ko,bytesToHex:Ur,bytesToNumberBE:Lr,bytesToNumberLE:Wr,concatBytes:Fr,createHmacDrbg:ha,ensureBytes:Pe,equalBytes:No,hexToBytes:Gr,hexToNumber:xn,numberToBytesBE:Zr,numberToBytesLE:ct,numberToHexUnpadded:fa,numberToVarBytesBE:Lo,utf8ToBytes:Uo,validateObject:Qr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xe=BigInt(0),ke=BigInt(1),Or=BigInt(2),Do=BigInt(3),gn=BigInt(4),ms=BigInt(5),vs=BigInt(8);BigInt(9);BigInt(16);function ve(n,r){const e=n%r;return e>=xe?e:r+e}function jo(n,r,e){if(e<=xe||r<xe)throw new Error("Expected power/modulo > 0");if(e===ke)return xe;let t=ke;for(;r>xe;)r&ke&&(t=t*n%e),n=n*n%e,r>>=ke;return t}function Ae(n,r,e){let t=n;for(;r-- >xe;)t*=t,t%=e;return t}function mn(n,r){if(n===xe||r<=xe)throw new Error(`invert: expected positive integers, got n=${n} mod=${r}`);let e=ve(n,r),t=r,s=xe,a=ke;for(;e!==xe;){const o=t/e,u=t%e,c=s-a*o;t=e,e=u,s=a,a=c}if(t!==ke)throw new Error("invert: does not exist");return ve(s,r)}function zo(n){const r=(n-ke)/Or;let e,t,s;for(e=n-ke,t=0;e%Or===xe;e/=Or,t++);for(s=Or;s<n&&jo(s,r,n)!==n-ke;s++);if(t===1){const i=(n+ke)/gn;return function(u,c){const l=u.pow(c,i);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}const a=(e+ke)/Or;return function(o,u){if(o.pow(u,r)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=t,l=o.pow(o.mul(o.ONE,s),e),f=o.pow(u,a),h=o.pow(u,e);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let p=1;for(let v=o.sqr(h);p<c&&!o.eql(v,o.ONE);p++)v=o.sqr(v);const d=o.pow(l,ke<<BigInt(c-p-1));l=o.sqr(d),f=o.mul(f,d),h=o.mul(h,l),c=p}return f}}function Wo(n){if(n%gn===Do){const r=(n+ke)/gn;return function(t,s){const a=t.pow(s,r);if(!t.eql(t.sqr(a),s))throw new Error("Cannot find square root");return a}}if(n%vs===ms){const r=(n-ms)/vs;return function(t,s){const a=t.mul(s,Or),i=t.pow(a,r),o=t.mul(s,i),u=t.mul(t.mul(o,Or),i),c=t.mul(o,t.sub(u,t.ONE));if(!t.eql(t.sqr(c),s))throw new Error("Cannot find square root");return c}}return zo(n)}const Vo=(n,r)=>(ve(n,r)&ke)===ke,Go=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zo(n){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Go.reduce((t,s)=>(t[s]="function",t),r);return Qr(n,e)}function Yo(n,r,e){if(e<xe)throw new Error("Expected power > 0");if(e===xe)return n.ONE;if(e===ke)return r;let t=n.ONE,s=r;for(;e>xe;)e&ke&&(t=n.mul(t,s)),s=n.sqr(s),e>>=ke;return t}function Jo(n,r){const e=new Array(r.length),t=r.reduce((a,i,o)=>n.is0(i)?a:(e[o]=a,n.mul(a,i)),n.ONE),s=n.inv(t);return r.reduceRight((a,i,o)=>n.is0(i)?a:(e[o]=n.mul(a,e[o]),n.mul(a,i)),s),e}function da(n,r){const e=r!==void 0?r:n.toString(2).length,t=Math.ceil(e/8);return{nBitLength:e,nByteLength:t}}function pa(n,r,e=!1,t={}){if(n<=xe)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:a}=da(n,r);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=Wo(n),o=Object.freeze({ORDER:n,BITS:s,BYTES:a,MASK:$n(s),ZERO:xe,ONE:ke,create:u=>ve(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return xe<=u&&u<n},is0:u=>u===xe,isOdd:u=>(u&ke)===ke,neg:u=>ve(-u,n),eql:(u,c)=>u===c,sqr:u=>ve(u*u,n),add:(u,c)=>ve(u+c,n),sub:(u,c)=>ve(u-c,n),mul:(u,c)=>ve(u*c,n),pow:(u,c)=>Yo(o,u,c),div:(u,c)=>ve(u*mn(c,n),n),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>mn(u,n),sqrt:t.sqrt||(u=>i(o,u)),invertBatch:u=>Jo(o,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>e?ct(u,a):Zr(u,a),fromBytes:u=>{if(u.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${u.length}`);return e?Wr(u):Lr(u)}});return Object.freeze(o)}function Xo(n,r){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(r);return n.isOdd(e)?n.neg(e):e}function ga(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const r=n.toString(2).length;return Math.ceil(r/8)}function ma(n){const r=ga(n);return r+Math.ceil(r/2)}function Qo(n,r,e=!1){const t=n.length,s=ga(r),a=ma(r);if(t<16||t<a||t>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${t}`);const i=e?Lr(n):Wr(n),o=ve(i,r-ke)+ke;return e?ct(o,s):Zr(o,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eu=BigInt(0),Qt=BigInt(1);function va(n,r){const e=(s,a)=>{const i=a.negate();return s?i:a},t=s=>{const a=Math.ceil(r/s)+1,i=2**(s-1);return{windows:a,windowSize:i}};return{constTimeNegate:e,unsafeLadder(s,a){let i=n.ZERO,o=s;for(;a>eu;)a&Qt&&(i=i.add(o)),o=o.double(),a>>=Qt;return i},precomputeWindow(s,a){const{windows:i,windowSize:o}=t(a),u=[];let c=s,l=c;for(let f=0;f<i;f++){l=c,u.push(l);for(let h=1;h<o;h++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,a,i){const{windows:o,windowSize:u}=t(s);let c=n.ZERO,l=n.BASE;const f=BigInt(2**s-1),h=2**s,p=BigInt(s);for(let d=0;d<o;d++){const v=d*u;let m=Number(i&f);i>>=p,m>u&&(m-=h,i+=Qt);const b=v,w=v+Math.abs(m)-1,y=d%2!==0,A=m<0;m===0?l=l.add(e(y,a[b])):c=c.add(e(A,a[w]))}return{p:c,f:l}},wNAFCached(s,a,i,o){const u=s._WINDOW_SIZE||1;let c=a.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&a.set(s,o(c))),this.wNAF(u,c,i)}}}function Ln(n){return Zo(n.Fp),Qr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...da(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sr=BigInt(0),Ze=BigInt(1),kt=BigInt(2),ru=BigInt(8),tu={zip215:!0};function nu(n){const r=Ln(n);return Qr(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...r})}function su(n){const r=nu(n),{Fp:e,n:t,prehash:s,hash:a,randomBytes:i,nByteLength:o,h:u}=r,c=kt<<BigInt(o*8)-Ze,l=e.create,f=r.uvRatio||((x,I)=>{try{return{isValid:!0,value:e.sqrt(x*e.inv(I))}}catch{return{isValid:!1,value:sr}}}),h=r.adjustScalarBytes||(x=>x),p=r.domain||((x,I,q)=>{if(I.length||q)throw new Error("Contexts/pre-hash are not supported");return x}),d=x=>typeof x=="bigint"&&sr<x,v=(x,I)=>d(x)&&d(I)&&x<I,m=x=>x===sr||v(x,c);function b(x,I){if(v(x,I))return x;throw new Error(`Expected valid scalar < ${I}, got ${typeof x} ${x}`)}function w(x){return x===sr?x:b(x,t)}const y=new Map;function A(x){if(!(x instanceof k))throw new Error("ExtendedPoint expected")}class k{constructor(I,q,z,X){if(this.ex=I,this.ey=q,this.ez=z,this.et=X,!m(I))throw new Error("x required");if(!m(q))throw new Error("y required");if(!m(z))throw new Error("z required");if(!m(X))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof k)throw new Error("extended point not allowed");const{x:q,y:z}=I||{};if(!m(q)||!m(z))throw new Error("invalid affine point");return new k(q,z,Ze,l(q*z))}static normalizeZ(I){const q=e.invertBatch(I.map(z=>z.ez));return I.map((z,X)=>z.toAffine(q[X])).map(k.fromAffine)}_setWindowSize(I){this._WINDOW_SIZE=I,y.delete(this)}assertValidity(){const{a:I,d:q}=r;if(this.is0())throw new Error("bad point: ZERO");const{ex:z,ey:X,ez:V,et:ne}=this,le=l(z*z),ae=l(X*X),ie=l(V*V),Re=l(ie*ie),Se=l(le*I),$e=l(ie*l(Se+ae)),Le=l(Re+l(q*l(le*ae)));if($e!==Le)throw new Error("bad point: equation left != right (1)");const De=l(z*X),Ie=l(V*ne);if(De!==Ie)throw new Error("bad point: equation left != right (2)")}equals(I){A(I);const{ex:q,ey:z,ez:X}=this,{ex:V,ey:ne,ez:le}=I,ae=l(q*le),ie=l(V*X),Re=l(z*le),Se=l(ne*X);return ae===ie&&Re===Se}is0(){return this.equals(k.ZERO)}negate(){return new k(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:I}=r,{ex:q,ey:z,ez:X}=this,V=l(q*q),ne=l(z*z),le=l(kt*l(X*X)),ae=l(I*V),ie=q+z,Re=l(l(ie*ie)-V-ne),Se=ae+ne,$e=Se-le,Le=ae-ne,De=l(Re*$e),Ie=l(Se*Le),nr=l(Re*Le),Tr=l($e*Se);return new k(De,Ie,Tr,nr)}add(I){A(I);const{a:q,d:z}=r,{ex:X,ey:V,ez:ne,et:le}=this,{ex:ae,ey:ie,ez:Re,et:Se}=I;if(q===BigInt(-1)){const ss=l((V-X)*(ie+ae)),as=l((V+X)*(ie-ae)),Zt=l(as-ss);if(Zt===sr)return this.double();const is=l(ne*kt*Se),os=l(le*kt*Re),us=os+is,cs=as+ss,ls=os-is,Pi=l(us*Zt),Oi=l(cs*ls),_i=l(us*ls),xi=l(Zt*cs);return new k(Pi,Oi,xi,_i)}const $e=l(X*ae),Le=l(V*ie),De=l(le*z*Se),Ie=l(ne*Re),nr=l((X+V)*(ae+ie)-$e-Le),Tr=Ie-De,st=Ie+De,ns=l(Le-q*$e),Ii=l(nr*Tr),Ri=l(st*ns),Ci=l(nr*ns),Ti=l(Tr*st);return new k(Ii,Ri,Ti,Ci)}subtract(I){return this.add(I.negate())}wNAF(I){return T.wNAFCached(this,y,I,k.normalizeZ)}multiply(I){const{p:q,f:z}=this.wNAF(b(I,t));return k.normalizeZ([q,z])[0]}multiplyUnsafe(I){let q=w(I);return q===sr?E:this.equals(E)||q===Ze?this:this.equals(C)?this.wNAF(q).p:T.unsafeLadder(this,q)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return T.unsafeLadder(this,t).is0()}toAffine(I){const{ex:q,ey:z,ez:X}=this,V=this.is0();I==null&&(I=V?ru:e.inv(X));const ne=l(q*I),le=l(z*I),ae=l(X*I);if(V)return{x:sr,y:Ze};if(ae!==Ze)throw new Error("invZ was invalid");return{x:ne,y:le}}clearCofactor(){const{h:I}=r;return I===Ze?this:this.multiplyUnsafe(I)}static fromHex(I,q=!1){const{d:z,a:X}=r,V=e.BYTES;I=Pe("pointHex",I,V);const ne=I.slice(),le=I[V-1];ne[V-1]=le&-129;const ae=Wr(ne);ae===sr||(q?b(ae,c):b(ae,e.ORDER));const ie=l(ae*ae),Re=l(ie-Ze),Se=l(z*ie-X);let{isValid:$e,value:Le}=f(Re,Se);if(!$e)throw new Error("Point.fromHex: invalid y coordinate");const De=(Le&Ze)===Ze,Ie=(le&128)!==0;if(!q&&Le===sr&&Ie)throw new Error("Point.fromHex: x=0 and x_0=1");return Ie!==De&&(Le=l(-Le)),k.fromAffine({x:Le,y:ae})}static fromPrivateKey(I){return H(I).point}toRawBytes(){const{x:I,y:q}=this.toAffine(),z=ct(q,e.BYTES);return z[z.length-1]|=I&Ze?128:0,z}toHex(){return Ur(this.toRawBytes())}}k.BASE=new k(r.Gx,r.Gy,Ze,l(r.Gx*r.Gy)),k.ZERO=new k(sr,Ze,Ze,sr);const{BASE:C,ZERO:E}=k,T=va(k,o*8);function F(x){return ve(x,t)}function O(x){return F(Wr(x))}function H(x){const I=o;x=Pe("private key",x,I);const q=Pe("hashed private key",a(x),2*I),z=h(q.slice(0,I)),X=q.slice(I,2*I),V=O(z),ne=C.multiply(V),le=ne.toRawBytes();return{head:z,prefix:X,scalar:V,point:ne,pointBytes:le}}function M(x){return H(x).pointBytes}function ce(x=new Uint8Array,...I){const q=Fr(...I);return O(a(p(q,Pe("context",x),!!s)))}function ge(x,I,q={}){x=Pe("message",x),s&&(x=s(x));const{prefix:z,scalar:X,pointBytes:V}=H(I),ne=ce(q.context,z,x),le=C.multiply(ne).toRawBytes(),ae=ce(q.context,le,V,x),ie=F(ne+ae*X);w(ie);const Re=Fr(le,ct(ie,e.BYTES));return Pe("result",Re,o*2)}const _=tu;function K(x,I,q,z=_){const{context:X,zip215:V}=z,ne=e.BYTES;x=Pe("signature",x,2*ne),I=Pe("message",I),s&&(I=s(I));const le=Wr(x.slice(ne,2*ne));let ae,ie,Re;try{ae=k.fromHex(q,V),ie=k.fromHex(x.slice(0,ne),V),Re=C.multiplyUnsafe(le)}catch{return!1}if(!V&&ae.isSmallOrder())return!1;const Se=ce(X,ie.toRawBytes(),ae.toRawBytes(),I);return ie.add(ae.multiplyUnsafe(Se)).subtract(Re).clearCofactor().equals(k.ZERO)}return C._setWindowSize(8),{CURVE:r,getPublicKey:M,sign:ge,verify:K,ExtendedPoint:k,utils:{getExtendedPublicKey:H,randomPrivateKey:()=>i(e.BYTES),precompute(x=8,I=k.BASE){return I._setWindowSize(x),I.multiply(BigInt(3)),I}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ys=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const au=BigInt(1),vn=BigInt(2),iu=BigInt(5),bs=BigInt(10),ou=BigInt(20),uu=BigInt(40),ws=BigInt(80);function cu(n){const r=Nn,t=n*n%r*n%r,s=Ae(t,vn,r)*t%r,a=Ae(s,au,r)*n%r,i=Ae(a,iu,r)*a%r,o=Ae(i,bs,r)*i%r,u=Ae(o,ou,r)*o%r,c=Ae(u,uu,r)*u%r,l=Ae(c,ws,r)*c%r,f=Ae(l,ws,r)*c%r,h=Ae(f,bs,r)*i%r;return{pow_p_5_8:Ae(h,vn,r)*n%r,b2:t}}function lu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function fu(n,r){const e=Nn,t=ve(r*r*r,e),s=ve(t*t*r,e),a=cu(n*s).pow_p_5_8;let i=ve(n*t*a,e);const o=ve(r*i*i,e),u=i,c=ve(i*ys,e),l=o===n,f=o===ve(-n,e),h=o===ve(-n*ys,e);return l&&(i=u),(f||h)&&(i=c),Vo(i,e)&&(i=ve(-i,e)),{isValid:l||f,value:i}}const yr=pa(Nn,void 0,!0),hu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:yr,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:_o,randomBytes:oa,adjustScalarBytes:lu,uvRatio:fu},et=su(hu),du=(yr.ORDER+BigInt(3))/BigInt(8);yr.pow(vn,du);yr.sqrt(yr.neg(yr.ONE));(yr.ORDER-BigInt(5))/BigInt(8);BigInt(486662);Xo(yr,yr.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const pu=(n,r,e)=>n&r^~n&e,gu=(n,r,e)=>n&r^n&e^r&e,mu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ar=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=new Uint32Array(64);class vu extends ua{constructor(){super(64,32,8,!1),this.A=Ar[0]|0,this.B=Ar[1]|0,this.C=Ar[2]|0,this.D=Ar[3]|0,this.E=Ar[4]|0,this.F=Ar[5]|0,this.G=Ar[6]|0,this.H=Ar[7]|0}get(){const{A:r,B:e,C:t,D:s,E:a,F:i,G:o,H:u}=this;return[r,e,t,s,a,i,o,u]}set(r,e,t,s,a,i,o,u){this.A=r|0,this.B=e|0,this.C=t|0,this.D=s|0,this.E=a|0,this.F=i|0,this.G=o|0,this.H=u|0}process(r,e){for(let f=0;f<16;f++,e+=4)Er[f]=r.getUint32(e,!1);for(let f=16;f<64;f++){const h=Er[f-15],p=Er[f-2],d=ur(h,7)^ur(h,18)^h>>>3,v=ur(p,17)^ur(p,19)^p>>>10;Er[f]=v+Er[f-7]+d+Er[f-16]|0}let{A:t,B:s,C:a,D:i,E:o,F:u,G:c,H:l}=this;for(let f=0;f<64;f++){const h=ur(o,6)^ur(o,11)^ur(o,25),p=l+h+pu(o,u,c)+mu[f]+Er[f]|0,v=(ur(t,2)^ur(t,13)^ur(t,22))+gu(t,s,a)|0;l=c,c=u,u=o,o=i+p|0,i=a,a=s,s=t,t=p+v|0}t=t+this.A|0,s=s+this.B|0,a=a+this.C|0,i=i+this.D|0,o=o+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(t,s,a,i,o,u,c,l)}roundClean(){Er.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const yn=ia(()=>new vu);var Fe={};function mr(n,r,e){return r<=n&&n<=e}function Kt(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function yu(n){for(var r=String(n),e=r.length,t=0,s=[];t<e;){var a=r.charCodeAt(t);if(a<55296||a>57343)s.push(a);else if(56320<=a&&a<=57343)s.push(65533);else if(55296<=a&&a<=56319)if(t===e-1)s.push(65533);else{var i=n.charCodeAt(t+1);if(56320<=i&&i<=57343){var o=a&1023,u=i&1023;s.push(65536+(o<<10)+u),t+=1}else s.push(65533)}t+=1}return s}function bu(n){for(var r="",e=0;e<n.length;++e){var t=n[e];t<=65535?r+=String.fromCharCode(t):(t-=65536,r+=String.fromCharCode((t>>10)+55296,(t&1023)+56320))}return r}var Tt=-1;function Un(n){this.tokens=[].slice.call(n)}Un.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Tt},prepend:function(n){if(Array.isArray(n))for(var r=n;r.length;)this.tokens.unshift(r.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var r=n;r.length;)this.tokens.push(r.shift());else this.tokens.push(n)}};var Yr=-1;function en(n,r){if(n)throw TypeError("Decoder error");return r||65533}var Pt="utf-8";function Ot(n,r){if(!(this instanceof Ot))return new Ot(n,r);if(n=n!==void 0?String(n).toLowerCase():Pt,n!==Pt)throw new Error("Encoding not supported. Only utf-8 is supported");r=Kt(r),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!r.fatal,this._ignoreBOM=!!r.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ot.prototype={decode:function(r,e){var t;typeof r=="object"&&r instanceof ArrayBuffer?t=new Uint8Array(r):typeof r=="object"&&"buffer"in r&&r.buffer instanceof ArrayBuffer?t=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):t=new Uint8Array(0),e=Kt(e),this._streaming||(this._decoder=new wu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Un(t),a=[],i;!s.endOfStream()&&(i=this._decoder.handler(s,s.read()),i!==Yr);)i!==null&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));if(!this._streaming){do{if(i=this._decoder.handler(s,s.read()),i===Yr)break;i!==null&&(Array.isArray(i)?a.push.apply(a,i):a.push(i))}while(!s.endOfStream());this._decoder=null}return a.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(a[0]===65279?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),bu(a)}};function _t(n,r){if(!(this instanceof _t))return new _t(n,r);if(n=n!==void 0?String(n).toLowerCase():Pt,n!==Pt)throw new Error("Encoding not supported. Only utf-8 is supported");r=Kt(r),this._streaming=!1,this._encoder=null,this._options={fatal:!!r.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}_t.prototype={encode:function(r,e){r=r?String(r):"",e=Kt(e),this._streaming||(this._encoder=new ku(this._options)),this._streaming=!!e.stream;for(var t=[],s=new Un(yu(r)),a;!s.endOfStream()&&(a=this._encoder.handler(s,s.read()),a!==Yr);)Array.isArray(a)?t.push.apply(t,a):t.push(a);if(!this._streaming){for(;a=this._encoder.handler(s,s.read()),a!==Yr;)Array.isArray(a)?t.push.apply(t,a):t.push(a);this._encoder=null}return new Uint8Array(t)}};function wu(n){var r=n.fatal,e=0,t=0,s=0,a=128,i=191;this.handler=function(o,u){if(u===Tt&&s!==0)return s=0,en(r);if(u===Tt)return Yr;if(s===0){if(mr(u,0,127))return u;if(mr(u,194,223))s=1,e=u-192;else if(mr(u,224,239))u===224&&(a=160),u===237&&(i=159),s=2,e=u-224;else if(mr(u,240,244))u===240&&(a=144),u===244&&(i=143),s=3,e=u-240;else return en(r);return e=e<<6*s,null}if(!mr(u,a,i))return e=s=t=0,a=128,i=191,o.prepend(u),en(r);if(a=128,i=191,t+=1,e+=u-128<<6*(s-t),t!==s)return null;var c=e;return e=s=t=0,c}}function ku(n){n.fatal,this.handler=function(r,e){if(e===Tt)return Yr;if(mr(e,0,127))return e;var t,s;mr(e,128,2047)?(t=1,s=192):mr(e,2048,65535)?(t=2,s=224):mr(e,65536,1114111)&&(t=3,s=240);for(var a=[(e>>6*t)+s];t>0;){var i=e>>6*(t-1);a.push(128|i&63),t-=1}return a}}const Su=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Ot,TextEncoder:_t},Symbol.toStringTag,{value:"Module"})),Au=br(Su);var Eu=lr&&lr.__createBinding||(Object.create?function(n,r,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[e]}})}:function(n,r,e,t){t===void 0&&(t=e),n[t]=r[e]}),Bu=lr&&lr.__setModuleDefault||(Object.create?function(n,r){Object.defineProperty(n,"default",{enumerable:!0,value:r})}:function(n,r){n.default=r}),hr=lr&&lr.__decorate||function(n,r,e,t){var s=arguments.length,a=s<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,e):t,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,r,e,t);else for(var o=n.length-1;o>=0;o--)(i=n[o])&&(a=(s<3?i(a):s>3?i(r,e,a):i(r,e))||a);return s>3&&a&&Object.defineProperty(r,e,a),a},Iu=lr&&lr.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Eu(r,n,e);return Bu(r,n),r},ya=lr&&lr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fe,"__esModule",{value:!0});var ba=Fe.deserializeUnchecked=Ba=Fe.deserialize=Ea=Fe.serialize=Fe.BinaryReader=Fe.BinaryWriter=Fe.BorshError=Fe.baseDecode=Fe.baseEncode=void 0;const Ir=ya(Li),wa=ya(ta),Ru=Iu(Au),Cu=typeof TextDecoder!="function"?Ru.TextDecoder:TextDecoder,Tu=new Cu("utf-8",{fatal:!0});function Pu(n){return typeof n=="string"&&(n=be.Buffer.from(n,"utf8")),wa.default.encode(be.Buffer.from(n))}Fe.baseEncode=Pu;function Ou(n){return be.Buffer.from(wa.default.decode(n))}Fe.baseDecode=Ou;const rn=1024;class je extends Error{constructor(r){super(r),this.fieldPath=[],this.originalMessage=r}addToFieldPath(r){this.fieldPath.splice(0,0,r),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Fe.BorshError=je;class ka{constructor(){this.buf=be.Buffer.alloc(rn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=be.Buffer.concat([this.buf,be.Buffer.alloc(rn)]))}writeU8(r){this.maybeResize(),this.buf.writeUInt8(r,this.length),this.length+=1}writeU16(r){this.maybeResize(),this.buf.writeUInt16LE(r,this.length),this.length+=2}writeU32(r){this.maybeResize(),this.buf.writeUInt32LE(r,this.length),this.length+=4}writeU64(r){this.maybeResize(),this.writeBuffer(be.Buffer.from(new Ir.default(r).toArray("le",8)))}writeU128(r){this.maybeResize(),this.writeBuffer(be.Buffer.from(new Ir.default(r).toArray("le",16)))}writeU256(r){this.maybeResize(),this.writeBuffer(be.Buffer.from(new Ir.default(r).toArray("le",32)))}writeU512(r){this.maybeResize(),this.writeBuffer(be.Buffer.from(new Ir.default(r).toArray("le",64)))}writeBuffer(r){this.buf=be.Buffer.concat([be.Buffer.from(this.buf.subarray(0,this.length)),r,be.Buffer.alloc(rn)]),this.length+=r.length}writeString(r){this.maybeResize();const e=be.Buffer.from(r,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(r){this.writeBuffer(be.Buffer.from(r))}writeArray(r,e){this.maybeResize(),this.writeU32(r.length);for(const t of r)this.maybeResize(),e(t)}toArray(){return this.buf.subarray(0,this.length)}}Fe.BinaryWriter=ka;function dr(n,r,e){const t=e.value;e.value=function(...s){try{return t.apply(this,s)}catch(a){if(a instanceof RangeError){const i=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(i)>=0)throw new je("Reached the end of buffer when deserializing")}throw a}}}class Je{constructor(r){this.buf=r,this.offset=0}readU8(){const r=this.buf.readUInt8(this.offset);return this.offset+=1,r}readU16(){const r=this.buf.readUInt16LE(this.offset);return this.offset+=2,r}readU32(){const r=this.buf.readUInt32LE(this.offset);return this.offset+=4,r}readU64(){const r=this.readBuffer(8);return new Ir.default(r,"le")}readU128(){const r=this.readBuffer(16);return new Ir.default(r,"le")}readU256(){const r=this.readBuffer(32);return new Ir.default(r,"le")}readU512(){const r=this.readBuffer(64);return new Ir.default(r,"le")}readBuffer(r){if(this.offset+r>this.buf.length)throw new je(`Expected buffer length ${r} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+r);return this.offset+=r,e}readString(){const r=this.readU32(),e=this.readBuffer(r);try{return Tu.decode(e)}catch(t){throw new je(`Error decoding UTF-8 string: ${t}`)}}readFixedArray(r){return new Uint8Array(this.readBuffer(r))}readArray(r){const e=this.readU32(),t=Array();for(let s=0;s<e;++s)t.push(r());return t}}hr([dr],Je.prototype,"readU8",null);hr([dr],Je.prototype,"readU16",null);hr([dr],Je.prototype,"readU32",null);hr([dr],Je.prototype,"readU64",null);hr([dr],Je.prototype,"readU128",null);hr([dr],Je.prototype,"readU256",null);hr([dr],Je.prototype,"readU512",null);hr([dr],Je.prototype,"readString",null);hr([dr],Je.prototype,"readFixedArray",null);hr([dr],Je.prototype,"readArray",null);Fe.BinaryReader=Je;function Sa(n){return n.charAt(0).toUpperCase()+n.slice(1)}function _r(n,r,e,t,s){try{if(typeof t=="string")s[`write${Sa(t)}`](e);else if(t instanceof Array)if(typeof t[0]=="number"){if(e.length!==t[0])throw new je(`Expecting byte array of length ${t[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(t.length===2&&typeof t[1]=="number"){if(e.length!==t[1])throw new je(`Expecting byte array of length ${t[1]}, but got ${e.length} bytes`);for(let a=0;a<t[1];a++)_r(n,null,e[a],t[0],s)}else s.writeArray(e,a=>{_r(n,r,a,t[0],s)});else if(t.kind!==void 0)switch(t.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),_r(n,r,e,t.type,s));break}case"map":{s.writeU32(e.size),e.forEach((a,i)=>{_r(n,r,i,t.key,s),_r(n,r,a,t.value,s)});break}default:throw new je(`FieldType ${t} unrecognized`)}else Aa(n,e,s)}catch(a){throw a instanceof je&&a.addToFieldPath(r),a}}function Aa(n,r,e){if(typeof r.borshSerialize=="function"){r.borshSerialize(e);return}const t=n.get(r.constructor);if(!t)throw new je(`Class ${r.constructor.name} is missing in schema`);if(t.kind==="struct")t.fields.map(([s,a])=>{_r(n,s,r[s],a,e)});else if(t.kind==="enum"){const s=r[t.field];for(let a=0;a<t.values.length;++a){const[i,o]=t.values[a];if(i===s){e.writeU8(a),_r(n,i,r[i],o,e);break}}}else throw new je(`Unexpected schema kind: ${t.kind} for ${r.constructor.name}`)}function _u(n,r,e=ka){const t=new e;return Aa(n,r,t),t.toArray()}var Ea=Fe.serialize=_u;function xr(n,r,e,t){try{if(typeof e=="string")return t[`read${Sa(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return t.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let a=0;a<e[1];a++)s.push(xr(n,null,e[0],t));return s}else return t.readArray(()=>xr(n,r,e[0],t))}if(e.kind==="option")return t.readU8()?xr(n,r,e.type,t):void 0;if(e.kind==="map"){let s=new Map;const a=t.readU32();for(let i=0;i<a;i++){const o=xr(n,r,e.key,t),u=xr(n,r,e.value,t);s.set(o,u)}return s}return Fn(n,e,t)}catch(s){throw s instanceof je&&s.addToFieldPath(r),s}}function Fn(n,r,e){if(typeof r.borshDeserialize=="function")return r.borshDeserialize(e);const t=n.get(r);if(!t)throw new je(`Class ${r.name} is missing in schema`);if(t.kind==="struct"){const s={};for(const[a,i]of n.get(r).fields)s[a]=xr(n,a,i,e);return new r(s)}if(t.kind==="enum"){const s=e.readU8();if(s>=t.values.length)throw new je(`Enum index: ${s} is out of range`);const[a,i]=t.values[s],o=xr(n,a,i,e);return new r({[a]:o})}throw new je(`Unexpected schema kind: ${t.kind} for ${r.constructor.name}`)}function xu(n,r,e,t=Je){const s=new t(e),a=Fn(n,r,s);if(s.offset<e.length)throw new je(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return a}var Ba=Fe.deserialize=xu;function $u(n,r,e,t=Je){const s=new t(e);return Fn(n,r,s)}ba=Fe.deserializeUnchecked=$u;var R={};Object.defineProperty(R,"__esModule",{value:!0});R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=Ue=R.nu64=R.u48=R.u40=W=R.u32=R.u24=Qe=R.u16=ue=R.u8=Nr=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0;R.constant=R.utf8=R.cstr=Ee=R.blob=R.unionLayoutDiscriminator=R.union=ze=R.seq=R.bits=j=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=Ye=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;const qn=re;function rt(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=rt;function oe(n){return rt(n),qn.Buffer.from(n.buffer,n.byteOffset,n.length)}R.uint8ArrayToBuffer=oe;class fe{constructor(r,e){if(!Number.isInteger(r))throw new TypeError("span must be an integer");this.span=r,this.property=e}makeDestinationObject(){return{}}getSpan(r,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(r){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=r,e}fromArray(r){}}R.Layout=fe;function Kn(n,r){return r.property?n+"["+r.property+"]":n}R.nameWithProperty=Kn;function Lu(n,r){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(r&&r instanceof fe))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(r,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=r,r.boundConstructor_=n,r.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,t){return r.encode(this,e,t)},writable:!0}),Object.defineProperty(n,"decode",{value(e,t){return r.decode(e,t)},writable:!0})}R.bindConstructorLayout=Lu;class We extends fe{isCount(){throw new Error("ExternalLayout is abstract")}}R.ExternalLayout=We;class Ia extends We{constructor(r=1,e){if(!Number.isInteger(r)||0>=r)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=r}isCount(){return!0}decode(r,e=0){rt(r);const t=r.length-e;return Math.floor(t/this.elementSpan)}encode(r,e,t){return 0}}R.GreedyCount=Ia;class Mn extends We{constructor(r,e=0,t){if(!(r instanceof fe))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(r.span,t||r.property),this.layout=r,this.offset=e}isCount(){return this.layout instanceof tr||this.layout instanceof ar}decode(r,e=0){return this.layout.decode(r,e+this.offset)}encode(r,e,t=0){return this.layout.encode(r,e,t+this.offset)}}R.OffsetLayout=Mn;class tr extends fe{constructor(r,e){if(super(r,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(r,e=0){return oe(r).readUIntLE(e,this.span)}encode(r,e,t=0){return oe(e).writeUIntLE(r,t,this.span),this.span}}R.UInt=tr;class ar extends fe{constructor(r,e){if(super(r,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(r,e=0){return oe(r).readUIntBE(e,this.span)}encode(r,e,t=0){return oe(e).writeUIntBE(r,t,this.span),this.span}}R.UIntBE=ar;class qr extends fe{constructor(r,e){if(super(r,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(r,e=0){return oe(r).readIntLE(e,this.span)}encode(r,e,t=0){return oe(e).writeIntLE(r,t,this.span),this.span}}R.Int=qr;class tt extends fe{constructor(r,e){if(super(r,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(r,e=0){return oe(r).readIntBE(e,this.span)}encode(r,e,t=0){return oe(e).writeIntBE(r,t,this.span),this.span}}R.IntBE=tt;const bn=Math.pow(2,32);function Mt(n){const r=Math.floor(n/bn),e=n-r*bn;return{hi32:r,lo32:e}}function Ht(n,r){return n*bn+r}class Ra extends fe{constructor(r){super(8,r)}decode(r,e=0){const t=oe(r),s=t.readUInt32LE(e),a=t.readUInt32LE(e+4);return Ht(a,s)}encode(r,e,t=0){const s=Mt(r),a=oe(e);return a.writeUInt32LE(s.lo32,t),a.writeUInt32LE(s.hi32,t+4),8}}R.NearUInt64=Ra;class Ca extends fe{constructor(r){super(8,r)}decode(r,e=0){const t=oe(r),s=t.readUInt32BE(e),a=t.readUInt32BE(e+4);return Ht(s,a)}encode(r,e,t=0){const s=Mt(r),a=oe(e);return a.writeUInt32BE(s.hi32,t),a.writeUInt32BE(s.lo32,t+4),8}}R.NearUInt64BE=Ca;class Ta extends fe{constructor(r){super(8,r)}decode(r,e=0){const t=oe(r),s=t.readUInt32LE(e),a=t.readInt32LE(e+4);return Ht(a,s)}encode(r,e,t=0){const s=Mt(r),a=oe(e);return a.writeUInt32LE(s.lo32,t),a.writeInt32LE(s.hi32,t+4),8}}R.NearInt64=Ta;class Pa extends fe{constructor(r){super(8,r)}decode(r,e=0){const t=oe(r),s=t.readInt32BE(e),a=t.readUInt32BE(e+4);return Ht(s,a)}encode(r,e,t=0){const s=Mt(r),a=oe(e);return a.writeInt32BE(s.hi32,t),a.writeUInt32BE(s.lo32,t+4),8}}R.NearInt64BE=Pa;class Oa extends fe{constructor(r){super(4,r)}decode(r,e=0){return oe(r).readFloatLE(e)}encode(r,e,t=0){return oe(e).writeFloatLE(r,t),4}}R.Float=Oa;class _a extends fe{constructor(r){super(4,r)}decode(r,e=0){return oe(r).readFloatBE(e)}encode(r,e,t=0){return oe(e).writeFloatBE(r,t),4}}R.FloatBE=_a;class xa extends fe{constructor(r){super(8,r)}decode(r,e=0){return oe(r).readDoubleLE(e)}encode(r,e,t=0){return oe(e).writeDoubleLE(r,t),8}}R.Double=xa;class $a extends fe{constructor(r){super(8,r)}decode(r,e=0){return oe(r).readDoubleBE(e)}encode(r,e,t=0){return oe(e).writeDoubleBE(r,t),8}}R.DoubleBE=$a;class La extends fe{constructor(r,e,t){if(!(r instanceof fe))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof We&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof We)&&0<r.span&&(s=e*r.span),super(s,t),this.elementLayout=r,this.count=e}getSpan(r,e=0){if(0<=this.span)return this.span;let t=0,s=this.count;if(s instanceof We&&(s=s.decode(r,e)),0<this.elementLayout.span)t=s*this.elementLayout.span;else{let a=0;for(;a<s;)t+=this.elementLayout.getSpan(r,e+t),++a}return t}decode(r,e=0){const t=[];let s=0,a=this.count;for(a instanceof We&&(a=a.decode(r,e));s<a;)t.push(this.elementLayout.decode(r,e)),e+=this.elementLayout.getSpan(r,e),s+=1;return t}encode(r,e,t=0){const s=this.elementLayout,a=r.reduce((i,o)=>i+s.encode(o,e,t+i),0);return this.count instanceof We&&this.count.encode(r.length,e,t),a}}R.Sequence=La;class Na extends fe{constructor(r,e,t){if(!(Array.isArray(r)&&r.reduce((a,i)=>a&&i instanceof fe,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&t===void 0&&(t=e,e=void 0);for(const a of r)if(0>a.span&&a.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=r.reduce((a,i)=>a+i.getSpan(),0)}catch{}super(s,e),this.fields=r,this.decodePrefixes=!!t}getSpan(r,e=0){if(0<=this.span)return this.span;let t=0;try{t=this.fields.reduce((s,a)=>{const i=a.getSpan(r,e);return e+=i,s+i},0)}catch{throw new RangeError("indeterminate span")}return t}decode(r,e=0){rt(r);const t=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(t[s.property]=s.decode(r,e)),e+=s.getSpan(r,e),this.decodePrefixes&&r.length===e)break;return t}encode(r,e,t=0){const s=t;let a=0,i=0;for(const o of this.fields){let u=o.span;if(i=0<u?u:0,o.property!==void 0){const c=r[o.property];c!==void 0&&(i=o.encode(c,e,t),0>u&&(u=o.getSpan(e,t)))}a=t,t+=u}return a+i-s}fromArray(r){const e=this.makeDestinationObject();for(const t of this.fields)t.property!==void 0&&0<r.length&&(e[t.property]=r.shift());return e}layoutFor(r){if(typeof r!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===r)return e}offsetOf(r){if(typeof r!="string")throw new TypeError("property must be string");let e=0;for(const t of this.fields){if(t.property===r)return e;0>t.span?e=-1:0<=e&&(e+=t.span)}}}R.Structure=Na;class Hn{constructor(r){this.property=r}decode(r,e){throw new Error("UnionDiscriminator is abstract")}encode(r,e,t){throw new Error("UnionDiscriminator is abstract")}}R.UnionDiscriminator=Hn;class xt extends Hn{constructor(r,e){if(!(r instanceof We&&r.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||r.property||"variant"),this.layout=r}decode(r,e){return this.layout.decode(r,e)}encode(r,e,t){return this.layout.encode(r,e,t)}}R.UnionLayoutDiscriminator=xt;class Dn extends fe{constructor(r,e,t){let s;if(r instanceof tr||r instanceof ar)s=new xt(new Mn(r));else if(r instanceof We&&r.isCount())s=new xt(r);else if(r instanceof Hn)s=r;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof fe))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let a=-1;e&&(a=e.span,0<=a&&(r instanceof tr||r instanceof ar)&&(a+=s.layout.span)),super(a,t),this.discriminator=s,this.usesPrefixDiscriminator=r instanceof tr||r instanceof ar,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(o){return i(o)},this.configGetSourceVariant=function(o){i=o.bind(this)}}getSpan(r,e=0){if(0<=this.span)return this.span;const t=this.getVariant(r,e);if(!t)throw new Error("unable to determine span for unrecognized variant");return t.getSpan(r,e)}defaultGetSourceVariant(r){if(Object.prototype.hasOwnProperty.call(r,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(r,this.defaultLayout.property))return;const e=this.registry[r[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(r,e.property)))return e}else for(const e in this.registry){const t=this.registry[e];if(t.property&&Object.prototype.hasOwnProperty.call(r,t.property))return t}throw new Error("unable to infer src variant")}decode(r,e=0){let t;const s=this.discriminator,a=s.decode(r,e),i=this.registry[a];if(i===void 0){const o=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),t=this.makeDestinationObject(),t[s.property]=a,t[o.property]=o.decode(r,e+u)}else t=i.decode(r,e);return t}encode(r,e,t=0){const s=this.getSourceVariant(r);if(s===void 0){const a=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=a.layout.span),a.encode(r[a.property],e,t),o+i.encode(r[i.property],e,t+o)}return s.encode(r,e,t)}addVariant(r,e,t){const s=new Ua(this,r,e,t);return this.registry[r]=s,s}getVariant(r,e=0){let t;return r instanceof Uint8Array?t=this.discriminator.decode(r,e):t=r,this.registry[t]}}R.Union=Dn;class Ua extends fe{constructor(r,e,t,s){if(!(r instanceof Dn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof t=="string"&&s===void 0&&(s=t,t=null),t){if(!(t instanceof fe))throw new TypeError("layout must be a Layout");if(r.defaultLayout!==null&&0<=t.span&&t.span>r.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let a=r.span;0>r.span&&(a=t?t.span:0,0<=a&&r.usesPrefixDiscriminator&&(a+=r.discriminator.layout.span)),super(a,s),this.union=r,this.variant=e,this.layout=t||null}getSpan(r,e=0){if(0<=this.span)return this.span;let t=0;this.union.usesPrefixDiscriminator&&(t=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(r,e+t)),t+s}decode(r,e=0){const t=this.makeDestinationObject();if(this!==this.union.getVariant(r,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?t[this.property]=this.layout.decode(r,e+s):this.property?t[this.property]=!0:this.union.usesPrefixDiscriminator&&(t[this.union.discriminator.property]=this.variant),t}encode(r,e,t=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(r,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,t);let a=s;if(this.layout&&(this.layout.encode(r[this.property],e,t+s),a+=this.layout.getSpan(e,t+s),0<=this.union.span&&a>this.union.span))throw new Error("encoded variant overruns containing union");return a}fromArray(r){if(this.layout)return this.layout.fromArray(r)}}R.VariantLayout=Ua;function Dr(n){return 0>n&&(n+=4294967296),n}class jn extends fe{constructor(r,e,t){if(!(r instanceof tr||r instanceof ar))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&t===void 0&&(t=e,e=!1),4<r.span)throw new RangeError("word cannot exceed 32 bits");super(r.span,t),this.word=r,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(a){return s=Dr(a),this},this._packedGetValue=function(){return s}}decode(r,e=0){const t=this.makeDestinationObject(),s=this.word.decode(r,e);this._packedSetValue(s);for(const a of this.fields)a.property!==void 0&&(t[a.property]=a.decode(r));return t}encode(r,e,t=0){const s=this.word.decode(e,t);this._packedSetValue(s);for(const a of this.fields)if(a.property!==void 0){const i=r[a.property];i!==void 0&&a.encode(i)}return this.word.encode(this._packedGetValue(),e,t)}addField(r,e){const t=new zn(this,r,e);return this.fields.push(t),t}addBoolean(r){const e=new Fa(this,r);return this.fields.push(e),e}fieldFor(r){if(typeof r!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===r)return e}}R.BitStructure=jn;class zn{constructor(r,e,t){if(!(r instanceof jn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*r.span,a=r.fields.reduce((i,o)=>i+o.bits,0);if(e+a>s)throw new Error("bits too long for span remainder ("+(s-a)+" of "+s+" remain)");this.container=r,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=a,this.container.msb&&(this.start=s-a-e),this.wordMask=Dr(this.valueMask<<this.start),this.property=t}decode(r,e){const t=this.container._packedGetValue();return Dr(t&this.wordMask)>>>this.start}encode(r){if(typeof r!="number"||!Number.isInteger(r)||r!==Dr(r&this.valueMask))throw new TypeError(Kn("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),t=Dr(r<<this.start);this.container._packedSetValue(Dr(e&~this.wordMask)|t)}}R.BitField=zn;let Fa=class extends zn{constructor(r,e){super(r,1,e)}decode(r,e){return!!super.decode(r,e)}encode(r){typeof r=="boolean"&&(r=+r),super.encode(r)}};R.Boolean=Fa;class qa extends fe{constructor(r,e){if(!(r instanceof We&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let t=-1;r instanceof We||(t=r),super(t,e),this.length=r}getSpan(r,e){let t=this.span;return 0>t&&(t=this.length.decode(r,e)),t}decode(r,e=0){let t=this.span;return 0>t&&(t=this.length.decode(r,e)),oe(r).slice(e,e+t)}encode(r,e,t){let s=this.length;if(this.length instanceof We&&(s=r.length),!(r instanceof Uint8Array&&s===r.length))throw new TypeError(Kn("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(t+s>e.length)throw new RangeError("encoding overruns Uint8Array");const a=oe(r);return oe(e).write(a.toString("hex"),t,s,"hex"),this.length instanceof We&&this.length.encode(s,e,t),s}}R.Blob=qa;class Ka extends fe{constructor(r){super(-1,r)}getSpan(r,e=0){rt(r);let t=e;for(;t<r.length&&r[t]!==0;)t+=1;return 1+t-e}decode(r,e=0){const t=this.getSpan(r,e);return oe(r).slice(e,e+t-1).toString("utf-8")}encode(r,e,t=0){typeof r!="string"&&(r=String(r));const s=qn.Buffer.from(r,"utf8"),a=s.length;if(t+a>e.length)throw new RangeError("encoding overruns Buffer");const i=oe(e);return s.copy(i,t),i[t+a]=0,a+1}}R.CString=Ka;class Ma extends fe{constructor(r,e){if(typeof r=="string"&&e===void 0&&(e=r,r=void 0),r===void 0)r=-1;else if(!Number.isInteger(r))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=r}getSpan(r,e=0){return rt(r),r.length-e}decode(r,e=0){const t=this.getSpan(r,e);if(0<=this.maxSpan&&this.maxSpan<t)throw new RangeError("text length exceeds maxSpan");return oe(r).slice(e,e+t).toString("utf-8")}encode(r,e,t=0){typeof r!="string"&&(r=String(r));const s=qn.Buffer.from(r,"utf8"),a=s.length;if(0<=this.maxSpan&&this.maxSpan<a)throw new RangeError("text length exceeds maxSpan");if(t+a>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(oe(e),t),a}}R.UTF8=Ma;class Ha extends fe{constructor(r,e){super(0,e),this.value=r}decode(r,e){return this.value}encode(r,e,t){return 0}}R.Constant=Ha;R.greedy=(n,r)=>new Ia(n,r);var Nr=R.offset=(n,r,e)=>new Mn(n,r,e),ue=R.u8=n=>new tr(1,n),Qe=R.u16=n=>new tr(2,n);R.u24=n=>new tr(3,n);var W=R.u32=n=>new tr(4,n);R.u40=n=>new tr(5,n);R.u48=n=>new tr(6,n);var Ue=R.nu64=n=>new Ra(n);R.u16be=n=>new ar(2,n);R.u24be=n=>new ar(3,n);R.u32be=n=>new ar(4,n);R.u40be=n=>new ar(5,n);R.u48be=n=>new ar(6,n);R.nu64be=n=>new Ca(n);R.s8=n=>new qr(1,n);R.s16=n=>new qr(2,n);R.s24=n=>new qr(3,n);R.s32=n=>new qr(4,n);R.s40=n=>new qr(5,n);R.s48=n=>new qr(6,n);var Ye=R.ns64=n=>new Ta(n);R.s16be=n=>new tt(2,n);R.s24be=n=>new tt(3,n);R.s32be=n=>new tt(4,n);R.s40be=n=>new tt(5,n);R.s48be=n=>new tt(6,n);R.ns64be=n=>new Pa(n);R.f32=n=>new Oa(n);R.f32be=n=>new _a(n);R.f64=n=>new xa(n);R.f64be=n=>new $a(n);var j=R.struct=(n,r,e)=>new Na(n,r,e);R.bits=(n,r,e)=>new jn(n,r,e);var ze=R.seq=(n,r,e)=>new La(n,r,e);R.union=(n,r,e)=>new Dn(n,r,e);R.unionLayoutDiscriminator=(n,r)=>new xt(n,r);var Ee=R.blob=(n,r)=>new qa(n,r);R.cstr=n=>new Ka(n);R.utf8=(n,r)=>new Ma(n,r);R.constant=(n,r)=>new Ha(n,r);var gt={};Object.defineProperty(gt,"__esModule",{value:!0});function Nu(n){{const r=be.Buffer.from(n);r.reverse();const e=r.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Uu=gt.toBigIntLE=Nu;function Fu(n){{const r=n.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}}gt.toBigIntBE=Fu;function qu(n,r){{const e=n.toString(16),t=be.Buffer.from(e.padStart(r*2,"0").slice(0,r*2),"hex");return t.reverse(),t}}var Ku=gt.toBufferLE=qu;function Mu(n,r){{const e=n.toString(16);return be.Buffer.from(e.padStart(r*2,"0").slice(0,r*2),"hex")}}gt.toBufferBE=Mu;function Hu(n){if(Array.isArray(n))return Ni(n)}function Du(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ju(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(n){return Hu(n)||Du(n)||Ui(n)||ju()}function Bt(n,r){if(n==null)return{};var e=Fi(n,r),t,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)t=a[s],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(e[t]=n[t])}return e}class zu extends TypeError{constructor(r,e){let t;const{message:s,...a}=r,{path:i}=r,o=i.length===0?s:"At path: "+i.join(".")+" -- "+s;super(o),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>{var u;return(u=t)!=null?u:t=[r,...e()]}}}function Wu(n){return Cr(n)&&typeof n[Symbol.iterator]=="function"}function Cr(n){return typeof n=="object"&&n!=null}function ir(n){return typeof n=="string"?JSON.stringify(n):""+n}function Vu(n){const{done:r,value:e}=n.next();return r?void 0:e}function Gu(n,r,e,t){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:a}=r,{type:i}=e,{refinement:o,message:u="Expected a value of type `"+i+"`"+(o?" with refinement `"+o+"`":"")+", but received: `"+ir(t)+"`"}=n;return{value:t,type:i,refinement:o,key:s[s.length-1],path:s,branch:a,...n,message:u}}function*ks(n,r,e,t){Wu(n)||(n=[n]);for(const s of n){const a=Gu(s,r,e,t);a&&(yield a)}}function*Wn(n,r,e={}){const{path:t=[],branch:s=[n],coerce:a=!1,mask:i=!1}=e,o={path:t,branch:s};if(a&&(n=r.coercer(n,o),i&&r.type!=="type"&&Cr(r.schema)&&Cr(n)&&!Array.isArray(n)))for(const c in n)r.schema[c]===void 0&&delete n[c];let u=!0;for(const c of r.validator(n,o))u=!1,yield[c,void 0];for(let[c,l,f]of r.entries(n,o)){const h=Wn(l,f,{path:c===void 0?t:[...t,c],branch:c===void 0?s:[...s,l],coerce:a,mask:i});for(const p of h)p[0]?(u=!1,yield[p[0],void 0]):a&&(l=p[1],c===void 0?n=l:n instanceof Map?n.set(c,l):n instanceof Set?n.add(l):Cr(n)&&(n[c]=l))}if(u)for(const c of r.refiner(n,o))u=!1,yield[c,void 0];u&&(yield[void 0,n])}let pr=class{constructor(r){const{type:e,schema:t,validator:s,refiner:a,coercer:i=u=>u,entries:o=function*(){}}=r;this.type=e,this.schema=t,this.entries=o,this.coercer=i,s?this.validator=(u,c)=>{const l=s(u,c);return ks(l,c,this,u)}:this.validator=()=>[],a?this.refiner=(u,c)=>{const l=a(u,c);return ks(l,c,this,u)}:this.refiner=()=>[]}assert(r){return Zu(r,this)}create(r){return L(r,this)}is(r){return Da(r,this)}mask(r){return Yu(r,this)}validate(r,e={}){return mt(r,this,e)}};function Zu(n,r){const e=mt(n,r);if(e[0])throw e[0]}function L(n,r){const e=mt(n,r,{coerce:!0});if(e[0])throw e[0];return e[1]}function Yu(n,r){const e=mt(n,r,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Da(n,r){return!mt(n,r)[0]}function mt(n,r,e={}){const t=Wn(n,r,e),s=Vu(t);return s[0]?[new zu(s[0],function*(){for(const i of t)i[0]&&(yield i[0])}),void 0]:[void 0,s[1]]}function Kr(n,r){return new pr({type:n,schema:null,validator:r})}function Ju(){return Kr("any",()=>!0)}function N(n){return new pr({type:"array",schema:n,*entries(r){if(n&&Array.isArray(r))for(const[e,t]of r.entries())yield[e,t,n]},coercer(r){return Array.isArray(r)?r.slice():r},validator(r){return Array.isArray(r)||"Expected an array value, but received: "+ir(r)}})}function fr(){return Kr("boolean",n=>typeof n=="boolean")}function Vn(n){return Kr("instance",r=>r instanceof n||"Expected a `"+n.name+"` instance, but received: "+ir(r))}function we(n){const r=ir(n),e=typeof n;return new pr({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(t){return t===n||"Expected the literal `"+r+"`, but received: "+ir(t)}})}function Xu(){return Kr("never",()=>!1)}function U(n){return new pr({...n,validator:(r,e)=>r===null||n.validator(r,e),refiner:(r,e)=>r===null||n.refiner(r,e)})}function B(){return Kr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+ir(n))}function Z(n){return new pr({...n,validator:(r,e)=>r===void 0||n.validator(r,e),refiner:(r,e)=>r===void 0||n.refiner(r,e)})}function ja(n,r){return new pr({type:"record",schema:null,*entries(e){if(Cr(e))for(const t in e){const s=e[t];yield[t,t,n],yield[t,s,r]}},validator(e){return Cr(e)||"Expected an object, but received: "+ir(e)}})}function $(){return Kr("string",n=>typeof n=="string"||"Expected a string, but received: "+ir(n))}function Gn(n){const r=Xu();return new pr({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const t=Math.max(n.length,e.length);for(let s=0;s<t;s++)yield[s,e[s],n[s]||r]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+ir(e)}})}function P(n){const r=Object.keys(n);return new pr({type:"type",schema:n,*entries(e){if(Cr(e))for(const t of r)yield[t,e[t],n[t]]},validator(e){return Cr(e)||"Expected an object, but received: "+ir(e)}})}function Ve(n){const r=n.map(e=>e.type).join(" | ");return new pr({type:"union",schema:null,validator(e,t){const s=[];for(const a of n){const[...i]=Wn(e,a,t),[o]=i;if(o[0])for(const[u]of i)u&&s.push(u);else return[]}return["Expected the value to satisfy a union of `"+r+"`, but received: "+ir(e),...s]}})}function vt(){return Kr("unknown",()=>!0)}function yt(n,r,e){return new pr({...n,coercer:(t,s)=>Da(t,r)?n.coercer(e(t,s),s):n.coercer(t,s)})}var St,Qu=new Uint8Array(16);function za(){if(!St&&(St=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!St))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return St(Qu)}const ec=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dt(n){return typeof n=="string"&&ec.test(n)}var Ne=[];for(var tn=0;tn<256;++tn)Ne.push((tn+256).toString(16).substr(1));function jt(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ne[n[r+0]]+Ne[n[r+1]]+Ne[n[r+2]]+Ne[n[r+3]]+"-"+Ne[n[r+4]]+Ne[n[r+5]]+"-"+Ne[n[r+6]]+Ne[n[r+7]]+"-"+Ne[n[r+8]]+Ne[n[r+9]]+"-"+Ne[n[r+10]]+Ne[n[r+11]]+Ne[n[r+12]]+Ne[n[r+13]]+Ne[n[r+14]]+Ne[n[r+15]]).toLowerCase();if(!Dt(e))throw TypeError("Stringified UUID is invalid");return e}var Ss,nn,sn=0,an=0;function rc(n,r,e){var t=r&&e||0,s=r||new Array(16);n=n||{};var a=n.node||Ss,i=n.clockseq!==void 0?n.clockseq:nn;if(a==null||i==null){var o=n.random||(n.rng||za)();a==null&&(a=Ss=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),i==null&&(i=nn=(o[6]<<8|o[7])&16383)}var u=n.msecs!==void 0?n.msecs:Date.now(),c=n.nsecs!==void 0?n.nsecs:an+1,l=u-sn+(c-an)/1e4;if(l<0&&n.clockseq===void 0&&(i=i+1&16383),(l<0||u>sn)&&n.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");sn=u,an=c,nn=i,u+=122192928e5;var f=((u&268435455)*1e4+c)%4294967296;s[t++]=f>>>24&255,s[t++]=f>>>16&255,s[t++]=f>>>8&255,s[t++]=f&255;var h=u/4294967296*1e4&268435455;s[t++]=h>>>8&255,s[t++]=h&255,s[t++]=h>>>24&15|16,s[t++]=h>>>16&255,s[t++]=i>>>8|128,s[t++]=i&255;for(var p=0;p<6;++p)s[t+p]=a[p];return r||jt(s)}function Wa(n){if(!Dt(n))throw TypeError("Invalid UUID");var r,e=new Uint8Array(16);return e[0]=(r=parseInt(n.slice(0,8),16))>>>24,e[1]=r>>>16&255,e[2]=r>>>8&255,e[3]=r&255,e[4]=(r=parseInt(n.slice(9,13),16))>>>8,e[5]=r&255,e[6]=(r=parseInt(n.slice(14,18),16))>>>8,e[7]=r&255,e[8]=(r=parseInt(n.slice(19,23),16))>>>8,e[9]=r&255,e[10]=(r=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=r/4294967296&255,e[12]=r>>>24&255,e[13]=r>>>16&255,e[14]=r>>>8&255,e[15]=r&255,e}function tc(n){n=unescape(encodeURIComponent(n));for(var r=[],e=0;e<n.length;++e)r.push(n.charCodeAt(e));return r}var nc="6ba7b810-9dad-11d1-80b4-00c04fd430c8",sc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Va(n,r,e){function t(s,a,i,o){if(typeof s=="string"&&(s=tc(s)),typeof a=="string"&&(a=Wa(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(a),u.set(s,a.length),u=e(u),u[6]=u[6]&15|r,u[8]=u[8]&63|128,i){o=o||0;for(var c=0;c<16;++c)i[o+c]=u[c];return i}return jt(u)}try{t.name=n}catch{}return t.DNS=nc,t.URL=sc,t}function ac(n){if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=new Uint8Array(r.length);for(var e=0;e<r.length;++e)n[e]=r.charCodeAt(e)}return ic(oc(uc(n),n.length*8))}function ic(n){for(var r=[],e=n.length*32,t="0123456789abcdef",s=0;s<e;s+=8){var a=n[s>>5]>>>s%32&255,i=parseInt(t.charAt(a>>>4&15)+t.charAt(a&15),16);r.push(i)}return r}function Ga(n){return(n+64>>>9<<4)+14+1}function oc(n,r){n[r>>5]|=128<<r%32,n[Ga(r)-1]=r;for(var e=1732584193,t=-271733879,s=-1732584194,a=271733878,i=0;i<n.length;i+=16){var o=e,u=t,c=s,l=a;e=qe(e,t,s,a,n[i],7,-680876936),a=qe(a,e,t,s,n[i+1],12,-389564586),s=qe(s,a,e,t,n[i+2],17,606105819),t=qe(t,s,a,e,n[i+3],22,-1044525330),e=qe(e,t,s,a,n[i+4],7,-176418897),a=qe(a,e,t,s,n[i+5],12,1200080426),s=qe(s,a,e,t,n[i+6],17,-1473231341),t=qe(t,s,a,e,n[i+7],22,-45705983),e=qe(e,t,s,a,n[i+8],7,1770035416),a=qe(a,e,t,s,n[i+9],12,-1958414417),s=qe(s,a,e,t,n[i+10],17,-42063),t=qe(t,s,a,e,n[i+11],22,-1990404162),e=qe(e,t,s,a,n[i+12],7,1804603682),a=qe(a,e,t,s,n[i+13],12,-40341101),s=qe(s,a,e,t,n[i+14],17,-1502002290),t=qe(t,s,a,e,n[i+15],22,1236535329),e=Ke(e,t,s,a,n[i+1],5,-165796510),a=Ke(a,e,t,s,n[i+6],9,-1069501632),s=Ke(s,a,e,t,n[i+11],14,643717713),t=Ke(t,s,a,e,n[i],20,-373897302),e=Ke(e,t,s,a,n[i+5],5,-701558691),a=Ke(a,e,t,s,n[i+10],9,38016083),s=Ke(s,a,e,t,n[i+15],14,-660478335),t=Ke(t,s,a,e,n[i+4],20,-405537848),e=Ke(e,t,s,a,n[i+9],5,568446438),a=Ke(a,e,t,s,n[i+14],9,-1019803690),s=Ke(s,a,e,t,n[i+3],14,-187363961),t=Ke(t,s,a,e,n[i+8],20,1163531501),e=Ke(e,t,s,a,n[i+13],5,-1444681467),a=Ke(a,e,t,s,n[i+2],9,-51403784),s=Ke(s,a,e,t,n[i+7],14,1735328473),t=Ke(t,s,a,e,n[i+12],20,-1926607734),e=Me(e,t,s,a,n[i+5],4,-378558),a=Me(a,e,t,s,n[i+8],11,-2022574463),s=Me(s,a,e,t,n[i+11],16,1839030562),t=Me(t,s,a,e,n[i+14],23,-35309556),e=Me(e,t,s,a,n[i+1],4,-1530992060),a=Me(a,e,t,s,n[i+4],11,1272893353),s=Me(s,a,e,t,n[i+7],16,-155497632),t=Me(t,s,a,e,n[i+10],23,-1094730640),e=Me(e,t,s,a,n[i+13],4,681279174),a=Me(a,e,t,s,n[i],11,-358537222),s=Me(s,a,e,t,n[i+3],16,-722521979),t=Me(t,s,a,e,n[i+6],23,76029189),e=Me(e,t,s,a,n[i+9],4,-640364487),a=Me(a,e,t,s,n[i+12],11,-421815835),s=Me(s,a,e,t,n[i+15],16,530742520),t=Me(t,s,a,e,n[i+2],23,-995338651),e=He(e,t,s,a,n[i],6,-198630844),a=He(a,e,t,s,n[i+7],10,1126891415),s=He(s,a,e,t,n[i+14],15,-1416354905),t=He(t,s,a,e,n[i+5],21,-57434055),e=He(e,t,s,a,n[i+12],6,1700485571),a=He(a,e,t,s,n[i+3],10,-1894986606),s=He(s,a,e,t,n[i+10],15,-1051523),t=He(t,s,a,e,n[i+1],21,-2054922799),e=He(e,t,s,a,n[i+8],6,1873313359),a=He(a,e,t,s,n[i+15],10,-30611744),s=He(s,a,e,t,n[i+6],15,-1560198380),t=He(t,s,a,e,n[i+13],21,1309151649),e=He(e,t,s,a,n[i+4],6,-145523070),a=He(a,e,t,s,n[i+11],10,-1120210379),s=He(s,a,e,t,n[i+2],15,718787259),t=He(t,s,a,e,n[i+9],21,-343485551),e=Rr(e,o),t=Rr(t,u),s=Rr(s,c),a=Rr(a,l)}return[e,t,s,a]}function uc(n){if(n.length===0)return[];for(var r=n.length*8,e=new Uint32Array(Ga(r)),t=0;t<r;t+=8)e[t>>5]|=(n[t/8]&255)<<t%32;return e}function Rr(n,r){var e=(n&65535)+(r&65535),t=(n>>16)+(r>>16)+(e>>16);return t<<16|e&65535}function cc(n,r){return n<<r|n>>>32-r}function zt(n,r,e,t,s,a){return Rr(cc(Rr(Rr(r,n),Rr(t,a)),s),e)}function qe(n,r,e,t,s,a,i){return zt(r&e|~r&t,n,r,s,a,i)}function Ke(n,r,e,t,s,a,i){return zt(r&t|e&~t,n,r,s,a,i)}function Me(n,r,e,t,s,a,i){return zt(r^e^t,n,r,s,a,i)}function He(n,r,e,t,s,a,i){return zt(e^(r|~t),n,r,s,a,i)}var lc=Va("v3",48,ac);const fc=lc;function hc(n,r,e){n=n||{};var t=n.random||(n.rng||za)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,r){e=e||0;for(var s=0;s<16;++s)r[e+s]=t[s];return r}return jt(t)}function dc(n,r,e,t){switch(n){case 0:return r&e^~r&t;case 1:return r^e^t;case 2:return r&e^r&t^e&t;case 3:return r^e^t}}function on(n,r){return n<<r|n>>>32-r}function pc(n){var r=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=[];for(var s=0;s<t.length;++s)n.push(t.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var a=n.length/4+2,i=Math.ceil(a/16),o=new Array(i),u=0;u<i;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=n[u*64+l*4]<<24|n[u*64+l*4+1]<<16|n[u*64+l*4+2]<<8|n[u*64+l*4+3];o[u]=c}o[i-1][14]=(n.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(n.length-1)*8&4294967295;for(var f=0;f<i;++f){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=o[f][p];for(var d=16;d<80;++d)h[d]=on(h[d-3]^h[d-8]^h[d-14]^h[d-16],1);for(var v=e[0],m=e[1],b=e[2],w=e[3],y=e[4],A=0;A<80;++A){var k=Math.floor(A/20),C=on(v,5)+dc(k,m,b,w)+y+r[k]+h[A]>>>0;y=w,w=b,b=on(m,30)>>>0,m=v,v=C}e[0]=e[0]+v>>>0,e[1]=e[1]+m>>>0,e[2]=e[2]+b>>>0,e[3]=e[3]+w>>>0,e[4]=e[4]+y>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var gc=Va("v5",80,pc);const mc=gc,vc="00000000-0000-0000-0000-000000000000";function yc(n){if(!Dt(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const bc=Object.freeze(Object.defineProperty({__proto__:null,NIL:vc,parse:Wa,stringify:jt,v1:rc,v3:fc,v4:hc,v5:mc,validate:Dt,version:yc},Symbol.toStringTag,{value:"Module"})),Za=br(bc),wc=Za.v4,kc=function(n,r,e,t){if(typeof n!="string")throw new TypeError(n+" must be a string");t=t||{};const s=typeof t.version=="number"?t.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const a={method:n};if(s===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof e>"u"){const i=typeof t.generator=="function"?t.generator:function(){return wc()};a.id=i(a,t)}else s===2&&e===null?t.notificationIdNull&&(a.id=null):a.id=e;return a};var Sc=kc;const Ac=Za.v4,Ec=Sc,lt=function(n,r){if(!(this instanceof lt))return new lt(n,r);r||(r={}),this.options={reviver:typeof r.reviver<"u"?r.reviver:null,replacer:typeof r.replacer<"u"?r.replacer:null,generator:typeof r.generator<"u"?r.generator:function(){return Ac()},version:typeof r.version<"u"?r.version:2,notificationIdNull:typeof r.notificationIdNull=="boolean"?r.notificationIdNull:!1},this.callServer=n};var Bc=lt;lt.prototype.request=function(n,r,e,t){const s=this;let a=null;const i=Array.isArray(n)&&typeof r=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&n&&typeof n=="object"&&typeof r=="function")t=r,a=n;else{typeof e=="function"&&(t=e,e=void 0);const c=typeof t=="function";try{a=Ec(n,r,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(c)return t(l);throw l}if(!c)return a}let u;try{u=JSON.stringify(a,this.options.replacer)}catch(c){return t(c)}return this.callServer(u,function(c,l){s._parseResponse(c,l,t)}),a};lt.prototype._parseResponse=function(n,r,e){if(n){e(n);return}if(!r)return e();let t;try{t=JSON.parse(r,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(t)){const s=function(i){return typeof i.error<"u"},a=function(i){return!s(i)};return e(null,t.filter(s),t.filter(a))}else return e(null,t.error,t.result);e(null,t)};const Ic=Nt(Bc);var Ya={};const Rc=br(qi),Cc=br(Ki),Ja=br(Mi),Xa=br(Hi),Qa=br(Di),ei=br(ji),ri=br(zi);var un={exports:{}},As;function ti(){return As||(As=1,function(n){var r=Object.prototype.hasOwnProperty,e="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1));function s(u,c,l){this.fn=u,this.context=c,this.once=l||!1}function a(u,c,l,f,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new s(l,f||u,h),d=e?e+c:c;return u._events[d]?u._events[d].fn?u._events[d]=[u._events[d],p]:u._events[d].push(p):(u._events[d]=p,u._eventsCount++),u}function i(u,c){--u._eventsCount===0?u._events=new t:delete u._events[c]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],l,f;if(this._eventsCount===0)return c;for(f in l=this._events)r.call(l,f)&&c.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},o.prototype.listeners=function(c){var l=e?e+c:c,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,d=new Array(p);h<p;h++)d[h]=f[h].fn;return d},o.prototype.listenerCount=function(c){var l=e?e+c:c,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,l,f,h,p,d){var v=e?e+c:c;if(!this._events[v])return!1;var m=this._events[v],b=arguments.length,w,y;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,f),!0;case 4:return m.fn.call(m.context,l,f,h),!0;case 5:return m.fn.call(m.context,l,f,h,p),!0;case 6:return m.fn.call(m.context,l,f,h,p,d),!0}for(y=1,w=new Array(b-1);y<b;y++)w[y-1]=arguments[y];m.fn.apply(m.context,w)}else{var A=m.length,k;for(y=0;y<A;y++)switch(m[y].once&&this.removeListener(c,m[y].fn,void 0,!0),b){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,l);break;case 3:m[y].fn.call(m[y].context,l,f);break;case 4:m[y].fn.call(m[y].context,l,f,h);break;default:if(!w)for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];m[y].fn.apply(m[y].context,w)}}return!0},o.prototype.on=function(c,l,f){return a(this,c,l,f,!1)},o.prototype.once=function(c,l,f){return a(this,c,l,f,!0)},o.prototype.removeListener=function(c,l,f,h){var p=e?e+c:c;if(!this._events[p])return this;if(!l)return i(this,p),this;var d=this._events[p];if(d.fn)d.fn===l&&(!h||d.once)&&(!f||d.context===f)&&i(this,p);else{for(var v=0,m=[],b=d.length;v<b;v++)(d[v].fn!==l||h&&!d[v].once||f&&d[v].context!==f)&&m.push(d[v]);m.length?this._events[p]=m.length===1?m[0]:m:i(this,p)}return this},o.prototype.removeAllListeners=function(c){var l;return c?(l=e?e+c:c,this._events[l]&&i(this,l)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,n.exports=o}(un)),un.exports}(function(n){var r=ra;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(Wi),t=r(Rc),s=r(Cc),a=r(Ja),i=r(Xa),o=r(Qa),u=r(ei),c=r(ri),l=ti();function f(v){var m=h();return function(){var w=(0,c.default)(v),y;if(m){var A=(0,c.default)(this).constructor;y=Reflect.construct(w,arguments,A)}else y=w.apply(this,arguments);return(0,u.default)(this,y)}}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var p=function(v,m){var b={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&m.indexOf(w)<0&&(b[w]=v[w]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,w=Object.getOwnPropertySymbols(v);y<w.length;y++)m.indexOf(w[y])<0&&Object.prototype.propertyIsEnumerable.call(v,w[y])&&(b[w[y]]=v[w[y]]);return b},d=function(v){(0,o.default)(b,v);var m=f(b);function b(w){var y,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments.length>3?arguments[3]:void 0;(0,a.default)(this,b);var E=k.autoconnect,T=E===void 0?!0:E,F=k.reconnect,O=F===void 0?!0:F,H=k.reconnect_interval,M=H===void 0?1e3:H,ce=k.max_reconnects,ge=ce===void 0?5:ce,_=p(k,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return y=m.call(this),y.webSocketFactory=w,y.queue={},y.rpc_id=0,y.address=A,y.autoconnect=T,y.ready=!1,y.reconnect=O,y.reconnect_timer_id=void 0,y.reconnect_interval=M,y.max_reconnects=ge,y.rest_options=_,y.current_reconnects=0,y.generate_request_id=C||function(){return++y.rpc_id},y.autoconnect&&y._connect(y.address,Object.assign({autoconnect:y.autoconnect,reconnect:y.reconnect,reconnect_interval:y.reconnect_interval,max_reconnects:y.max_reconnects},y.rest_options)),y}return(0,i.default)(b,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(y,A,k,C){var E=this;return!C&&(0,s.default)(k)==="object"&&(C=k,k=null),new Promise(function(T,F){if(!E.ready)return F(new Error("socket not ready"));var O=E.generate_request_id(y,A),H={jsonrpc:"2.0",method:y,params:A||null,id:O};E.socket.send(JSON.stringify(H),C,function(M){if(M)return F(M);E.queue[O]={promise:[T,F]},k&&(E.queue[O].timeout=setTimeout(function(){delete E.queue[O],F(new Error("reply timeout"))},k))})})}},{key:"login",value:function(){var w=(0,t.default)(e.default.mark(function A(k){var C;return e.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.call("rpc.login",k);case 2:if(C=T.sent,C){T.next=5;break}throw new Error("authentication failed");case 5:return T.abrupt("return",C);case 6:case"end":return T.stop()}},A,this)}));function y(A){return w.apply(this,arguments)}return y}()},{key:"listMethods",value:function(){var w=(0,t.default)(e.default.mark(function A(){return e.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.call("__listMethods");case 2:return C.abrupt("return",C.sent);case 3:case"end":return C.stop()}},A,this)}));function y(){return w.apply(this,arguments)}return y}()},{key:"notify",value:function(y,A){var k=this;return new Promise(function(C,E){if(!k.ready)return E(new Error("socket not ready"));var T={jsonrpc:"2.0",method:y,params:A||null};k.socket.send(JSON.stringify(T),function(F){if(F)return E(F);C()})})}},{key:"subscribe",value:function(){var w=(0,t.default)(e.default.mark(function A(k){var C;return e.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return typeof k=="string"&&(k=[k]),T.next=3,this.call("rpc.on",k);case 3:if(C=T.sent,!(typeof k=="string"&&C[k]!=="ok")){T.next=6;break}throw new Error("Failed subscribing to an event '"+k+"' with: "+C[k]);case 6:return T.abrupt("return",C);case 7:case"end":return T.stop()}},A,this)}));function y(A){return w.apply(this,arguments)}return y}()},{key:"unsubscribe",value:function(){var w=(0,t.default)(e.default.mark(function A(k){var C;return e.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return typeof k=="string"&&(k=[k]),T.next=3,this.call("rpc.off",k);case 3:if(C=T.sent,!(typeof k=="string"&&C[k]!=="ok")){T.next=6;break}throw new Error("Failed unsubscribing from an event with: "+C);case 6:return T.abrupt("return",C);case 7:case"end":return T.stop()}},A,this)}));function y(A){return w.apply(this,arguments)}return y}()},{key:"close",value:function(y,A){this.socket.close(y||1e3,A)}},{key:"_connect",value:function(y,A){var k=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(y,A),this.socket.addEventListener("open",function(){k.ready=!0,k.emit("open"),k.current_reconnects=0}),this.socket.addEventListener("message",function(C){var E=C.data;E instanceof ArrayBuffer&&(E=be.Buffer.from(E).toString());try{E=JSON.parse(E)}catch{return}if(E.notification&&k.listeners(E.notification).length){if(!Object.keys(E.params).length)return k.emit(E.notification);var T=[E.notification];if(E.params.constructor===Object)T.push(E.params);else for(var F=0;F<E.params.length;F++)T.push(E.params[F]);return Promise.resolve().then(function(){k.emit.apply(k,T)})}if(!k.queue[E.id])return E.method&&E.params?Promise.resolve().then(function(){k.emit(E.method,E.params)}):void 0;"error"in E=="result"in E&&k.queue[E.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),k.queue[E.id].timeout&&clearTimeout(k.queue[E.id].timeout),E.error?k.queue[E.id].promise[1](E.error):k.queue[E.id].promise[0](E.result),delete k.queue[E.id]}),this.socket.addEventListener("error",function(C){return k.emit("error",C)}),this.socket.addEventListener("close",function(C){var E=C.code,T=C.reason;k.ready&&setTimeout(function(){return k.emit("close",E,T)},0),k.ready=!1,k.socket=void 0,E!==1e3&&(k.current_reconnects++,k.reconnect&&(k.max_reconnects>k.current_reconnects||k.max_reconnects===0)&&(k.reconnect_timer_id=setTimeout(function(){return k._connect(y,A)},k.reconnect_interval)))})}}]),b}(l.EventEmitter);n.default=d})(Ya);const Tc=Nt(Ya);var ni={};(function(n){var r=ra;Object.defineProperty(n,"__esModule",{value:!0}),n.default=f;var e=r(Ja),t=r(Xa),s=r(Qa),a=r(ei),i=r(ri),o=ti();function u(h){var p=c();return function(){var v=(0,i.default)(h),m;if(p){var b=(0,i.default)(this).constructor;m=Reflect.construct(v,arguments,b)}else m=v.apply(this,arguments);return(0,a.default)(this,m)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var l=function(h){(0,s.default)(d,h);var p=u(d);function d(v,m,b){var w;return(0,e.default)(this,d),w=p.call(this),w.socket=new window.WebSocket(v,b),w.socket.onopen=function(){return w.emit("open")},w.socket.onmessage=function(y){return w.emit("message",y.data)},w.socket.onerror=function(y){return w.emit("error",y)},w.socket.onclose=function(y){w.emit("close",y.code,y.reason)},w}return(0,t.default)(d,[{key:"send",value:function(m,b,w){var y=w||b;try{this.socket.send(m),y()}catch(A){y(A)}}},{key:"close",value:function(m,b){this.socket.close(m,b)}},{key:"addEventListener",value:function(m,b,w){this.socket.addEventListener(m,b,w)}}]),d}(o.EventEmitter);function f(h,p){return new l(h,p)}})(ni);const Pc=Nt(ni);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Oc(n){const r=Ln(n);Qr(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:t,a:s}=r;if(e){if(!t.eql(s,t.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:_c,hexToBytes:xc}=Ho,$r={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(n){const{Err:r}=$r;if(n.length<2||n[0]!==2)throw new r("Invalid signature integer tag");const e=n[1],t=n.subarray(2,e+2);if(!e||t.length!==e)throw new r("Invalid signature integer: wrong length");if(t[0]&128)throw new r("Invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new r("Invalid signature integer: unnecessary leading zero");return{d:_c(t),l:n.subarray(e+2)}},toSig(n){const{Err:r}=$r,e=typeof n=="string"?xc(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let t=e.length;if(t<2||e[0]!=48)throw new r("Invalid signature tag");if(e[1]!==t-2)throw new r("Invalid signature: incorrect length");const{d:s,l:a}=$r._parseInt(e.subarray(2)),{d:i,l:o}=$r._parseInt(a);if(o.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(n){const r=c=>Number.parseInt(c[0],16)&8?"00"+c:c,e=c=>{const l=c.toString(16);return l.length&1?`0${l}`:l},t=r(e(n.s)),s=r(e(n.r)),a=t.length/2,i=s.length/2,o=e(a),u=e(i);return`30${e(i+a+4)}02${u}${s}02${o}${t}`}},vr=BigInt(0),Xe=BigInt(1);BigInt(2);const Es=BigInt(3);BigInt(4);function $c(n){const r=Oc(n),{Fp:e}=r,t=r.toBytes||((d,v,m)=>{const b=v.toAffine();return Fr(Uint8Array.from([4]),e.toBytes(b.x),e.toBytes(b.y))}),s=r.fromBytes||(d=>{const v=d.subarray(1),m=e.fromBytes(v.subarray(0,e.BYTES)),b=e.fromBytes(v.subarray(e.BYTES,2*e.BYTES));return{x:m,y:b}});function a(d){const{a:v,b:m}=r,b=e.sqr(d),w=e.mul(b,d);return e.add(e.add(w,e.mul(d,v)),m)}if(!e.eql(e.sqr(r.Gy),a(r.Gx)))throw new Error("bad generator point: equation left != right");function i(d){return typeof d=="bigint"&&vr<d&&d<r.n}function o(d){if(!i(d))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(d){const{allowedPrivateKeyLengths:v,nByteLength:m,wrapPrivateKey:b,n:w}=r;if(v&&typeof d!="bigint"){if(d instanceof Uint8Array&&(d=Ur(d)),typeof d!="string"||!v.includes(d.length))throw new Error("Invalid key");d=d.padStart(m*2,"0")}let y;try{y=typeof d=="bigint"?d:Lr(Pe("private key",d,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof d}`)}return b&&(y=ve(y,w)),o(y),y}const c=new Map;function l(d){if(!(d instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(v,m,b){if(this.px=v,this.py=m,this.pz=b,v==null||!e.isValid(v))throw new Error("x required");if(m==null||!e.isValid(m))throw new Error("y required");if(b==null||!e.isValid(b))throw new Error("z required")}static fromAffine(v){const{x:m,y:b}=v||{};if(!v||!e.isValid(m)||!e.isValid(b))throw new Error("invalid affine point");if(v instanceof f)throw new Error("projective point not allowed");const w=y=>e.eql(y,e.ZERO);return w(m)&&w(b)?f.ZERO:new f(m,b,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const m=e.invertBatch(v.map(b=>b.pz));return v.map((b,w)=>b.toAffine(m[w])).map(f.fromAffine)}static fromHex(v){const m=f.fromAffine(s(Pe("pointHex",v)));return m.assertValidity(),m}static fromPrivateKey(v){return f.BASE.multiply(u(v))}_setWindowSize(v){this._WINDOW_SIZE=v,c.delete(this)}assertValidity(){if(this.is0()){if(r.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:m}=this.toAffine();if(!e.isValid(v)||!e.isValid(m))throw new Error("bad point: x or y not FE");const b=e.sqr(m),w=a(v);if(!e.eql(b,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(e.isOdd)return!e.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){l(v);const{px:m,py:b,pz:w}=this,{px:y,py:A,pz:k}=v,C=e.eql(e.mul(m,k),e.mul(y,w)),E=e.eql(e.mul(b,k),e.mul(A,w));return C&&E}negate(){return new f(this.px,e.neg(this.py),this.pz)}double(){const{a:v,b:m}=r,b=e.mul(m,Es),{px:w,py:y,pz:A}=this;let k=e.ZERO,C=e.ZERO,E=e.ZERO,T=e.mul(w,w),F=e.mul(y,y),O=e.mul(A,A),H=e.mul(w,y);return H=e.add(H,H),E=e.mul(w,A),E=e.add(E,E),k=e.mul(v,E),C=e.mul(b,O),C=e.add(k,C),k=e.sub(F,C),C=e.add(F,C),C=e.mul(k,C),k=e.mul(H,k),E=e.mul(b,E),O=e.mul(v,O),H=e.sub(T,O),H=e.mul(v,H),H=e.add(H,E),E=e.add(T,T),T=e.add(E,T),T=e.add(T,O),T=e.mul(T,H),C=e.add(C,T),O=e.mul(y,A),O=e.add(O,O),T=e.mul(O,H),k=e.sub(k,T),E=e.mul(O,F),E=e.add(E,E),E=e.add(E,E),new f(k,C,E)}add(v){l(v);const{px:m,py:b,pz:w}=this,{px:y,py:A,pz:k}=v;let C=e.ZERO,E=e.ZERO,T=e.ZERO;const F=r.a,O=e.mul(r.b,Es);let H=e.mul(m,y),M=e.mul(b,A),ce=e.mul(w,k),ge=e.add(m,b),_=e.add(y,A);ge=e.mul(ge,_),_=e.add(H,M),ge=e.sub(ge,_),_=e.add(m,w);let K=e.add(y,k);return _=e.mul(_,K),K=e.add(H,ce),_=e.sub(_,K),K=e.add(b,w),C=e.add(A,k),K=e.mul(K,C),C=e.add(M,ce),K=e.sub(K,C),T=e.mul(F,_),C=e.mul(O,ce),T=e.add(C,T),C=e.sub(M,T),T=e.add(M,T),E=e.mul(C,T),M=e.add(H,H),M=e.add(M,H),ce=e.mul(F,ce),_=e.mul(O,_),M=e.add(M,ce),ce=e.sub(H,ce),ce=e.mul(F,ce),_=e.add(_,ce),H=e.mul(M,_),E=e.add(E,H),H=e.mul(K,_),C=e.mul(ge,C),C=e.sub(C,H),H=e.mul(ge,M),T=e.mul(K,T),T=e.add(T,H),new f(C,E,T)}subtract(v){return this.add(v.negate())}is0(){return this.equals(f.ZERO)}wNAF(v){return p.wNAFCached(this,c,v,m=>{const b=e.invertBatch(m.map(w=>w.pz));return m.map((w,y)=>w.toAffine(b[y])).map(f.fromAffine)})}multiplyUnsafe(v){const m=f.ZERO;if(v===vr)return m;if(o(v),v===Xe)return this;const{endo:b}=r;if(!b)return p.unsafeLadder(this,v);let{k1neg:w,k1:y,k2neg:A,k2:k}=b.splitScalar(v),C=m,E=m,T=this;for(;y>vr||k>vr;)y&Xe&&(C=C.add(T)),k&Xe&&(E=E.add(T)),T=T.double(),y>>=Xe,k>>=Xe;return w&&(C=C.negate()),A&&(E=E.negate()),E=new f(e.mul(E.px,b.beta),E.py,E.pz),C.add(E)}multiply(v){o(v);let m=v,b,w;const{endo:y}=r;if(y){const{k1neg:A,k1:k,k2neg:C,k2:E}=y.splitScalar(m);let{p:T,f:F}=this.wNAF(k),{p:O,f:H}=this.wNAF(E);T=p.constTimeNegate(A,T),O=p.constTimeNegate(C,O),O=new f(e.mul(O.px,y.beta),O.py,O.pz),b=T.add(O),w=F.add(H)}else{const{p:A,f:k}=this.wNAF(m);b=A,w=k}return f.normalizeZ([b,w])[0]}multiplyAndAddUnsafe(v,m,b){const w=f.BASE,y=(k,C)=>C===vr||C===Xe||!k.equals(w)?k.multiplyUnsafe(C):k.multiply(C),A=y(this,m).add(y(v,b));return A.is0()?void 0:A}toAffine(v){const{px:m,py:b,pz:w}=this,y=this.is0();v==null&&(v=y?e.ONE:e.inv(w));const A=e.mul(m,v),k=e.mul(b,v),C=e.mul(w,v);if(y)return{x:e.ZERO,y:e.ZERO};if(!e.eql(C,e.ONE))throw new Error("invZ was invalid");return{x:A,y:k}}isTorsionFree(){const{h:v,isTorsionFree:m}=r;if(v===Xe)return!0;if(m)return m(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:m}=r;return v===Xe?this:m?m(f,this):this.multiplyUnsafe(r.h)}toRawBytes(v=!0){return this.assertValidity(),t(f,this,v)}toHex(v=!0){return Ur(this.toRawBytes(v))}}f.BASE=new f(r.Gx,r.Gy,e.ONE),f.ZERO=new f(e.ZERO,e.ONE,e.ZERO);const h=r.nBitLength,p=va(f,r.endo?Math.ceil(h/2):h);return{CURVE:r,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:a,isWithinCurveOrder:i}}function Lc(n){const r=Ln(n);return Qr(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function Nc(n){const r=Lc(n),{Fp:e,n:t}=r,s=e.BYTES+1,a=2*e.BYTES+1;function i(_){return vr<_&&_<e.ORDER}function o(_){return ve(_,t)}function u(_){return mn(_,t)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:h}=$c({...r,toBytes(_,K,J){const x=K.toAffine(),I=e.toBytes(x.x),q=Fr;return J?q(Uint8Array.from([K.hasEvenY()?2:3]),I):q(Uint8Array.from([4]),I,e.toBytes(x.y))},fromBytes(_){const K=_.length,J=_[0],x=_.subarray(1);if(K===s&&(J===2||J===3)){const I=Lr(x);if(!i(I))throw new Error("Point is not on curve");const q=f(I);let z=e.sqrt(q);const X=(z&Xe)===Xe;return(J&1)===1!==X&&(z=e.neg(z)),{x:I,y:z}}else if(K===a&&J===4){const I=e.fromBytes(x.subarray(0,e.BYTES)),q=e.fromBytes(x.subarray(e.BYTES,2*e.BYTES));return{x:I,y:q}}else throw new Error(`Point of length ${K} was invalid. Expected ${s} compressed bytes or ${a} uncompressed bytes`)}}),p=_=>Ur(Zr(_,r.nByteLength));function d(_){const K=t>>Xe;return _>K}function v(_){return d(_)?o(-_):_}const m=(_,K,J)=>Lr(_.slice(K,J));class b{constructor(K,J,x){this.r=K,this.s=J,this.recovery=x,this.assertValidity()}static fromCompact(K){const J=r.nByteLength;return K=Pe("compactSignature",K,J*2),new b(m(K,0,J),m(K,J,2*J))}static fromDER(K){const{r:J,s:x}=$r.toSig(Pe("DER",K));return new b(J,x)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(K){return new b(this.r,this.s,K)}recoverPublicKey(K){const{r:J,s:x,recovery:I}=this,q=E(Pe("msgHash",K));if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");const z=I===2||I===3?J+r.n:J;if(z>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=I&1?"03":"02",V=c.fromHex(X+p(z)),ne=u(z),le=o(-q*ne),ae=o(x*ne),ie=c.BASE.multiplyAndAddUnsafe(V,le,ae);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Gr(this.toDERHex())}toDERHex(){return $r.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Gr(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const w={isValidPrivateKey(_){try{return l(_),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const _=ma(r.n);return Qo(r.randomBytes(_),r.n)},precompute(_=8,K=c.BASE){return K._setWindowSize(_),K.multiply(BigInt(3)),K}};function y(_,K=!0){return c.fromPrivateKey(_).toRawBytes(K)}function A(_){const K=_ instanceof Uint8Array,J=typeof _=="string",x=(K||J)&&_.length;return K?x===s||x===a:J?x===2*s||x===2*a:_ instanceof c}function k(_,K,J=!0){if(A(_))throw new Error("first arg must be private key");if(!A(K))throw new Error("second arg must be public key");return c.fromHex(K).multiply(l(_)).toRawBytes(J)}const C=r.bits2int||function(_){const K=Lr(_),J=_.length*8-r.nBitLength;return J>0?K>>BigInt(J):K},E=r.bits2int_modN||function(_){return o(C(_))},T=$n(r.nBitLength);function F(_){if(typeof _!="bigint")throw new Error("bigint expected");if(!(vr<=_&&_<T))throw new Error(`bigint expected < 2^${r.nBitLength}`);return Zr(_,r.nByteLength)}function O(_,K,J=H){if(["recovered","canonical"].some(Se=>Se in J))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:I}=r;let{lowS:q,prehash:z,extraEntropy:X}=J;q==null&&(q=!0),_=Pe("msgHash",_),z&&(_=Pe("prehashed msgHash",x(_)));const V=E(_),ne=l(K),le=[F(ne),F(V)];if(X!=null){const Se=X===!0?I(e.BYTES):X;le.push(Pe("extraEntropy",Se))}const ae=Fr(...le),ie=V;function Re(Se){const $e=C(Se);if(!h($e))return;const Le=u($e),De=c.BASE.multiply($e).toAffine(),Ie=o(De.x);if(Ie===vr)return;const nr=o(Le*o(ie+Ie*ne));if(nr===vr)return;let Tr=(De.x===Ie?0:2)|Number(De.y&Xe),st=nr;return q&&d(nr)&&(st=v(nr),Tr^=1),new b(Ie,st,Tr)}return{seed:ae,k2sig:Re}}const H={lowS:r.lowS,prehash:!1},M={lowS:r.lowS,prehash:!1};function ce(_,K,J=H){const{seed:x,k2sig:I}=O(_,K,J),q=r;return ha(q.hash.outputLen,q.nByteLength,q.hmac)(x,I)}c.BASE._setWindowSize(8);function ge(_,K,J,x=M){var De;const I=_;if(K=Pe("msgHash",K),J=Pe("publicKey",J),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:q,prehash:z}=x;let X,V;try{if(typeof I=="string"||I instanceof Uint8Array)try{X=b.fromDER(I)}catch(Ie){if(!(Ie instanceof $r.Err))throw Ie;X=b.fromCompact(I)}else if(typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint"){const{r:Ie,s:nr}=I;X=new b(Ie,nr)}else throw new Error("PARSE");V=c.fromHex(J)}catch(Ie){if(Ie.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&X.hasHighS())return!1;z&&(K=r.hash(K));const{r:ne,s:le}=X,ae=E(K),ie=u(le),Re=o(ae*ie),Se=o(ne*ie),$e=(De=c.BASE.multiplyAndAddUnsafe(V,Re,Se))==null?void 0:De.toAffine();return $e?o($e.x)===ne:!1}return{CURVE:r,getPublicKey:y,getSharedSecret:k,sign:ce,verify:ge,ProjectivePoint:c,Signature:b,utils:w}}class si extends aa{constructor(r,e){super(),this.finished=!1,this.destroyed=!1,eo(r);const t=_n(e);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(t.length>s?r.create().update(t).digest():t);for(let i=0;i<a.length;i++)a[i]^=54;this.iHash.update(a),this.oHash=r.create();for(let i=0;i<a.length;i++)a[i]^=106;this.oHash.update(a),a.fill(0)}update(r){return Ct(this),this.iHash.update(r),this}digestInto(r){Ct(this),na(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:s,destroyed:a,blockLen:i,outputLen:o}=this;return r=r,r.finished=s,r.destroyed=a,r.blockLen=i,r.outputLen=o,r.oHash=e._cloneInto(r.oHash),r.iHash=t._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ai=(n,r,e)=>new si(n,r).update(e).digest();ai.create=(n,r)=>new si(n,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uc(n){return{hash:n,hmac:(r,...e)=>ai(n,r,so(...e)),randomBytes:oa}}function Fc(n,r){const e=t=>Nc({...n,...Uc(t)});return Object.freeze({...e(r),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ii=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Bs=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),qc=BigInt(1),wn=BigInt(2),Is=(n,r)=>(n+r/wn)/r;function Kc(n){const r=ii,e=BigInt(3),t=BigInt(6),s=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),u=BigInt(88),c=n*n*n%r,l=c*c*n%r,f=Ae(l,e,r)*l%r,h=Ae(f,e,r)*l%r,p=Ae(h,wn,r)*c%r,d=Ae(p,s,r)*p%r,v=Ae(d,a,r)*d%r,m=Ae(v,o,r)*v%r,b=Ae(m,u,r)*m%r,w=Ae(b,o,r)*v%r,y=Ae(w,e,r)*l%r,A=Ae(y,i,r)*d%r,k=Ae(A,t,r)*c%r,C=Ae(k,wn,r);if(!kn.eql(kn.sqr(C),n))throw new Error("Cannot find square root");return C}const kn=pa(ii,void 0,void 0,{sqrt:Kc}),Zn=Fc({a:BigInt(0),b:BigInt(7),Fp:kn,n:Bs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const r=Bs,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),t=-qc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=e,i=BigInt("0x100000000000000000000000000000000"),o=Is(a*n,r),u=Is(-t*n,r);let c=ve(n-o*e-u*s,r),l=ve(-o*t-u*a,r);const f=c>i,h=l>i;if(f&&(c=r-c),h&&(l=r-l),c>i||l>i)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:c,k2neg:h,k2:l}}}},yn);BigInt(0);Zn.ProjectivePoint;et.utils.randomPrivateKey;var Rs=function(){var r=et.utils.randomPrivateKey(),e=Sn(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Sn=et.getPublicKey;function Cs(n){try{return et.ExtendedPoint.fromHex(n),!0}catch{return!1}}var Mc=function(r,e){return et.sign(r,e.slice(0,32))},Hc=et.verify,Jr=function(r){return re.Buffer.isBuffer(r)?r:r instanceof Uint8Array?re.Buffer.from(r.buffer,r.byteOffset,r.byteLength):re.Buffer.from(r)},Dc=function(){function n(r){de(this,n),Object.assign(this,r)}return pe(n,[{key:"encode",value:function(){return re.Buffer.from(Ea(It,this))}}],[{key:"decode",value:function(e){return Ba(It,this,e)}},{key:"decodeUnchecked",value:function(e){return ba(It,this,e)}}]),n}(),It=new Map,oi;function jc(n){var r=zc();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function zc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wc=32,cr=32;function Vc(n){return n._bn!==void 0}var Ts=1;oi=Symbol.toStringTag;var Y=function(n){Ge(e,n);var r=jc(e);function e(t){var s;if(de(this,e),s=r.call(this,{}),s._bn=void 0,Vc(t))s._bn=t._bn;else{if(typeof t=="string"){var a=he.decode(t);if(a.length!=cr)throw new Error("Invalid public key input");s._bn=new fs(a)}else s._bn=new fs(t);if(s._bn.byteLength()>cr)throw new Error("Invalid public key input")}return s}return pe(e,[{key:"equals",value:function(s){return this._bn.eq(s._bn)}},{key:"toBase58",value:function(){return he.encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var s=this.toBuffer();return new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}},{key:"toBuffer",value:function(){var s=this._bn.toArrayLike(re.Buffer);if(s.length===cr)return s;var a=re.Buffer.alloc(32);return s.copy(a,32-s.length),a}},{key:oi,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var s=new e(Ts);return Ts+=1,new e(s.toBuffer())}},{key:"createWithSeed",value:function(){var t=S(g.mark(function a(i,o,u){var c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return c=re.Buffer.concat([i.toBuffer(),re.Buffer.from(o),u.toBuffer()]),l=yn(c),h.abrupt("return",new e(l));case 3:case"end":return h.stop()}},a)}));function s(a,i,o){return t.apply(this,arguments)}return s}()},{key:"createProgramAddressSync",value:function(s,a){var i=re.Buffer.alloc(0);s.forEach(function(u){if(u.length>Wc)throw new TypeError("Max seed length exceeded");i=re.Buffer.concat([i,Jr(u)])}),i=re.Buffer.concat([i,a.toBuffer(),re.Buffer.from("ProgramDerivedAddress")]);var o=yn(i);if(Cs(o))throw new Error("Invalid seeds, address must fall off the curve");return new e(o)}},{key:"createProgramAddress",value:function(){var t=S(g.mark(function a(i,o){return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.createProgramAddressSync(i,o));case 1:case"end":return c.stop()}},a,this)}));function s(a,i){return t.apply(this,arguments)}return s}()},{key:"findProgramAddressSync",value:function(s,a){for(var i=255,o;i!=0;){try{var u=s.concat(re.Buffer.from([i]));o=this.createProgramAddressSync(u,a)}catch(c){if(c instanceof TypeError)throw c;i--;continue}return[o,i]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:function(){var t=S(g.mark(function a(i,o){return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.findProgramAddressSync(i,o));case 1:case"end":return c.stop()}},a,this)}));function s(a,i){return t.apply(this,arguments)}return s}()},{key:"isOnCurve",value:function(s){var a=new e(s);return Cs(a.toBytes())}}]),e}(Dc);Y.default=new Y("11111111111111111111111111111111");It.set(Y,{kind:"struct",fields:[["_bn","u256"]]});new Y("BPFLoader1111111111111111111111111111111111");var Vr=1280-40-8,ui=127,An=64;function Yn(n){var r=Gc();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function Gc(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ci=function(n){Ge(e,n);var r=Yn(e);function e(t){var s;return de(this,e),s=r.call(this,"Signature ".concat(t," has expired: block height exceeded.")),s.signature=void 0,s.signature=t,s}return pe(e)}(dt(Error));Object.defineProperty(ci.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var li=function(n){Ge(e,n);var r=Yn(e);function e(t,s){var a;return de(this,e),a=r.call(this,"Transaction was not confirmed in ".concat(s.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(t," using the Solana Explorer or CLI tools.")),a.signature=void 0,a.signature=t,a}return pe(e)}(dt(Error));Object.defineProperty(li.prototype,"name",{value:"TransactionExpiredTimeoutError"});var ot=function(n){Ge(e,n);var r=Yn(e);function e(t){var s;return de(this,e),s=r.call(this,"Signature ".concat(t," has expired: the nonce is no longer valid.")),s.signature=void 0,s.signature=t,s}return pe(e)}(dt(Error));Object.defineProperty(ot.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});function Zc(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Yc(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,s=function(){};return{s,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,o;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return a=c.done,c},e:function(c){i=!0,o=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(i)throw o}}}}function Yc(n,r){if(n){if(typeof n=="string")return Ps(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ps(n,r)}}function Ps(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var $t=function(){function n(r,e){de(this,n),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=r,this.accountKeysFromLookups=e}return pe(n,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t=Zc(this.keySegments()),s;try{for(t.s();!(s=t.n()).done;){var a=s.value;if(e<a.length)return a[e];e-=a.length}}catch(i){t.e(i)}finally{t.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){var t=255;if(this.length>t+1)throw new Error("Account index overflow encountered during compilation");var s=new Map;this.keySegments().flat().forEach(function(i,o){s.set(i.toBase58(),o)});var a=function(o){var u=s.get(o.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return e.map(function(i){return{programIdIndex:a(i.programId),accountKeyIndexes:i.keys.map(function(o){return a(o.pubkey)}),data:i.data}})}}]),n}(),te=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"publicKey";return Ee(32,r)},zr=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"string",e=j([W("length"),W("lengthPadding"),Ee(Nr(W(),-8),"chars")],r),t=e.decode.bind(e),s=e.encode.bind(e),a=e;return a.decode=function(i,o){var u=t(i,o);return u.chars.toString()},a.encode=function(i,o,u){var c={chars:re.Buffer.from(i,"utf8")};return s(c,o,u)},a.alloc=function(i){return W().span+W().span+re.Buffer.from(i,"utf8").length},a},Jc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"authorized";return j([te("staker"),te("withdrawer")],r)},Xc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"lockup";return j([Ye("unixTimestamp"),Ye("epoch"),te("custodian")],r)},Qc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"voteInit";return j([te("nodePubkey"),te("authorizedVoter"),te("authorizedWithdrawer"),ue("commission")],r)},el=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"voteAuthorizeWithSeedArgs";return j([W("voteAuthorizationType"),te("currentAuthorityDerivedKeyOwnerPubkey"),zr("currentAuthorityDerivedKeySeed"),te("newAuthorized")],r)};function er(n){for(var r=0,e=0;;){var t=n.shift();if(r|=(t&127)<<e*7,e+=1,!(t&128))break}return r}function rr(n,r){for(var e=r;;){var t=e&127;if(e>>=7,e==0){n.push(t);break}else t|=128,n.push(t)}}function Ce(n,r){if(!n)throw new Error(r||"Assertion failed")}function cn(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=rl(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,s=function(){};return{s,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,o;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return a=c.done,c},e:function(c){i=!0,o=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(i)throw o}}}}function rl(n,r){if(n){if(typeof n=="string")return Os(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Os(n,r)}}function Os(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var fi=function(){function n(r,e){de(this,n),this.payer=void 0,this.keyMetaMap=void 0,this.payer=r,this.keyMetaMap=e}return pe(n,[{key:"getMessageComponents",value:function(){var e=Oe(this.keyMetaMap.entries());Ce(e.length<=256,"Max static account keys length exceeded");var t=e.filter(function(f){var h=_e(f,2),p=h[1];return p.isSigner&&p.isWritable}),s=e.filter(function(f){var h=_e(f,2),p=h[1];return p.isSigner&&!p.isWritable}),a=e.filter(function(f){var h=_e(f,2),p=h[1];return!p.isSigner&&p.isWritable}),i=e.filter(function(f){var h=_e(f,2),p=h[1];return!p.isSigner&&!p.isWritable}),o={numRequiredSignatures:t.length+s.length,numReadonlySignedAccounts:s.length,numReadonlyUnsignedAccounts:i.length};{Ce(t.length>0,"Expected at least one writable signer key");var u=_e(t[0],1),c=u[0];Ce(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}var l=[].concat(Oe(t.map(function(f){var h=_e(f,1),p=h[0];return new Y(p)})),Oe(s.map(function(f){var h=_e(f,1),p=h[0];return new Y(p)})),Oe(a.map(function(f){var h=_e(f,1),p=h[0];return new Y(p)})),Oe(i.map(function(f){var h=_e(f,1),p=h[0];return new Y(p)})));return[o,l]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,function(f){return!f.isSigner&&!f.isInvoked&&f.isWritable}),s=_e(t,2),a=s[0],i=s[1],o=this.drainKeysFoundInLookupTable(e.state.addresses,function(f){return!f.isSigner&&!f.isInvoked&&!f.isWritable}),u=_e(o,2),c=u[0],l=u[1];if(!(a.length===0&&c.length===0))return[{accountKey:e.key,writableIndexes:a,readonlyIndexes:c},{writable:i,readonly:l}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var s=this,a=new Array,i=new Array,o=cn(this.keyMetaMap.entries()),u;try{var c=function(){var f=_e(u.value,2),h=f[0],p=f[1];if(t(p)){var d=new Y(h),v=e.findIndex(function(m){return m.equals(d)});v>=0&&(Ce(v<256,"Max lookup table index exceeded"),a.push(v),i.push(d),s.keyMetaMap.delete(h))}};for(o.s();!(u=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}return[a,i]}}],[{key:"compile",value:function(e,t){var s=new Map,a=function(v){var m=v.toBase58(),b=s.get(m);return b===void 0&&(b={isSigner:!1,isWritable:!1,isInvoked:!1},s.set(m,b)),b},i=a(t);i.isSigner=!0,i.isWritable=!0;var o=cn(e),u;try{for(o.s();!(u=o.n()).done;){var c=u.value;a(c.programId).isInvoked=!0;var l=cn(c.keys),f;try{for(l.s();!(f=l.n()).done;){var h=f.value,p=a(h.pubkey);p.isSigner||(p.isSigner=h.isSigner),p.isWritable||(p.isWritable=h.isWritable)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return new n(t,s)}}]),n}(),ft=function(){function n(r){var e=this;de(this,n),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=r.header,this.accountKeys=r.accountKeys.map(function(t){return new Y(t)}),this.recentBlockhash=r.recentBlockhash,this.instructions=r.instructions,this.instructions.forEach(function(t){return e.indexToProgramIds.set(t.programIdIndex,e.accountKeys[t.programIdIndex])})}return pe(n,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map(function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)}})}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new $t(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){var s=e-t,a=this.accountKeys.length-t,i=a-this.header.numReadonlyUnsignedAccounts;return s<i}else{var o=t-this.header.numReadonlySignedAccounts;return e<o}}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return Oe(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter(function(t,s){return!e.isProgramId(s)})}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];rr(t,e);var s=this.instructions.map(function(h){var p=h.accounts,d=h.programIdIndex,v=Array.from(he.decode(h.data)),m=[];rr(m,p.length);var b=[];return rr(b,v.length),{programIdIndex:d,keyIndicesCount:re.Buffer.from(m),keyIndices:p,dataLength:re.Buffer.from(b),data:v}}),a=[];rr(a,s.length);var i=re.Buffer.alloc(Vr);re.Buffer.from(a).copy(i);var o=a.length;s.forEach(function(h){var p=j([ue("programIdIndex"),Ee(h.keyIndicesCount.length,"keyIndicesCount"),ze(ue("keyIndex"),h.keyIndices.length,"keyIndices"),Ee(h.dataLength.length,"dataLength"),ze(ue("userdatum"),h.data.length,"data")]),d=p.encode(h,i,o);o+=d}),i=i.slice(0,o);var u=j([Ee(1,"numRequiredSignatures"),Ee(1,"numReadonlySignedAccounts"),Ee(1,"numReadonlyUnsignedAccounts"),Ee(t.length,"keyCount"),ze(te("key"),e,"keys"),te("recentBlockhash")]),c={numRequiredSignatures:re.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:re.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:re.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:re.Buffer.from(t),keys:this.accountKeys.map(function(h){return Jr(h.toBytes())}),recentBlockhash:he.decode(this.recentBlockhash)},l=re.Buffer.alloc(2048),f=u.encode(c,l);return i.copy(l,f),l.slice(0,f+i.length)}}],[{key:"compile",value:function(e){var t=fi.compile(e.instructions,e.payerKey),s=t.getMessageComponents(),a=_e(s,2),i=a[0],o=a[1],u=new $t(o),c=u.compileInstructions(e.instructions).map(function(l){return{programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:he.encode(l.data)}});return new n({header:i,accountKeys:o,recentBlockhash:e.recentBlockhash,instructions:c})}},{key:"from",value:function(e){var t=Oe(e),s=t.shift();if(s!==(s&ui))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var a=t.shift(),i=t.shift(),o=er(t),u=[],c=0;c<o;c++){var l=t.slice(0,cr);t=t.slice(cr),u.push(new Y(re.Buffer.from(l)))}var f=t.slice(0,cr);t=t.slice(cr);for(var h=er(t),p=[],d=0;d<h;d++){var v=t.shift(),m=er(t),b=t.slice(0,m);t=t.slice(m);var w=er(t),y=t.slice(0,w),A=he.encode(re.Buffer.from(y));t=t.slice(w),p.push({programIdIndex:v,accounts:b,data:A})}var k={header:{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:i},recentBlockhash:he.encode(re.Buffer.from(f)),accountKeys:u,instructions:p};return new n(k)}}]),n}();function Pr(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=tl(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,s=function(){};return{s,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,o;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return a=c.done,c},e:function(c){i=!0,o=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(i)throw o}}}}function tl(n,r){if(n){if(typeof n=="string")return _s(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _s(n,r)}}function _s(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var nl=function(){function n(r){de(this,n),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=r.header,this.staticAccountKeys=r.staticAccountKeys,this.recentBlockhash=r.recentBlockhash,this.compiledInstructions=r.compiledInstructions,this.addressTableLookups=r.addressTableLookups}return pe(n,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e=0,t=Pr(this.addressTableLookups),s;try{for(t.s();!(s=t.n()).done;){var a=s.value;e+=a.readonlyIndexes.length+a.writableIndexes.length}}catch(i){t.e(i)}finally{t.f()}return e}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new $t(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,s=this.staticAccountKeys.length;if(e>=s){var a=e-s,i=this.addressTableLookups.reduce(function(f,h){return f+h.writableIndexes.length},0);return a<i}else if(e>=this.header.numRequiredSignatures){var o=e-t,u=s-t,c=u-this.header.numReadonlyUnsignedAccounts;return o<c}else{var l=t-this.header.numReadonlySignedAccounts;return e<l}}},{key:"resolveAddressTableLookups",value:function(e){var t={writable:[],readonly:[]},s=Pr(this.addressTableLookups),a;try{var i=function(){var u=a.value,c=e.find(function(m){return m.key.equals(u.accountKey)});if(!c)throw new Error("Failed to find address lookup table account for table key ".concat(u.accountKey.toBase58()));var l=Pr(u.writableIndexes),f;try{for(l.s();!(f=l.n()).done;){var h=f.value;if(h<c.state.addresses.length)t.writable.push(c.state.addresses[h]);else throw new Error("Failed to find address for index ".concat(h," in address lookup table ").concat(u.accountKey.toBase58()))}}catch(m){l.e(m)}finally{l.f()}var p=Pr(u.readonlyIndexes),d;try{for(p.s();!(d=p.n()).done;){var v=d.value;if(v<c.state.addresses.length)t.readonly.push(c.state.addresses[v]);else throw new Error("Failed to find address for index ".concat(v," in address lookup table ").concat(u.accountKey.toBase58()))}}catch(m){p.e(m)}finally{p.f()}};for(s.s();!(a=s.n()).done;)i()}catch(o){s.e(o)}finally{s.f()}return t}},{key:"serialize",value:function(){var e=Array();rr(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),s=Array();rr(s,this.compiledInstructions.length);var a=this.serializeAddressTableLookups(),i=Array();rr(i,this.addressTableLookups.length);var o=j([ue("prefix"),j([ue("numRequiredSignatures"),ue("numReadonlySignedAccounts"),ue("numReadonlyUnsignedAccounts")],"header"),Ee(e.length,"staticAccountKeysLength"),ze(te(),this.staticAccountKeys.length,"staticAccountKeys"),te("recentBlockhash"),Ee(s.length,"instructionsLength"),Ee(t.length,"serializedInstructions"),Ee(i.length,"addressTableLookupsLength"),Ee(a.length,"serializedAddressTableLookups")]),u=new Uint8Array(Vr),c=1<<7,l=o.encode({prefix:c,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(function(f){return f.toBytes()}),recentBlockhash:he.decode(this.recentBlockhash),instructionsLength:new Uint8Array(s),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:a},u);return u.slice(0,l)}},{key:"serializeInstructions",value:function(){var e=0,t=new Uint8Array(Vr),s=Pr(this.compiledInstructions),a;try{for(s.s();!(a=s.n()).done;){var i=a.value,o=Array();rr(o,i.accountKeyIndexes.length);var u=Array();rr(u,i.data.length);var c=j([ue("programIdIndex"),Ee(o.length,"encodedAccountKeyIndexesLength"),ze(ue(),i.accountKeyIndexes.length,"accountKeyIndexes"),Ee(u.length,"encodedDataLength"),Ee(i.data.length,"data")]);e+=c.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(u),data:i.data},t,e)}}catch(l){s.e(l)}finally{s.f()}return t.slice(0,e)}},{key:"serializeAddressTableLookups",value:function(){var e=0,t=new Uint8Array(Vr),s=Pr(this.addressTableLookups),a;try{for(s.s();!(a=s.n()).done;){var i=a.value,o=Array();rr(o,i.writableIndexes.length);var u=Array();rr(u,i.readonlyIndexes.length);var c=j([te("accountKey"),Ee(o.length,"encodedWritableIndexesLength"),ze(ue(),i.writableIndexes.length,"writableIndexes"),Ee(u.length,"encodedReadonlyIndexesLength"),ze(ue(),i.readonlyIndexes.length,"readonlyIndexes")]);e+=c.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(u),readonlyIndexes:i.readonlyIndexes},t,e)}}catch(l){s.e(l)}finally{s.f()}return t.slice(0,e)}}],[{key:"compile",value:function(e){var t=fi.compile(e.instructions,e.payerKey),s=new Array,a={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[],o=Pr(i),u;try{for(o.s();!(u=o.n()).done;){var c=u.value,l=t.extractTableLookup(c);if(l!==void 0){var f,h,p=_e(l,2),d=p[0],v=p[1],m=v.writable,b=v.readonly;s.push(d),(f=a.writable).push.apply(f,Oe(m)),(h=a.readonly).push.apply(h,Oe(b))}}}catch(T){o.e(T)}finally{o.f()}var w=t.getMessageComponents(),y=_e(w,2),A=y[0],k=y[1],C=new $t(k,a),E=C.compileInstructions(e.instructions);return new n({header:A,staticAccountKeys:k,recentBlockhash:e.recentBlockhash,compiledInstructions:E,addressTableLookups:s})}},{key:"deserialize",value:function(e){var t=Oe(e),s=t.shift(),a=s&ui;Ce(s!==a,"Expected versioned message but received legacy message");var i=a;Ce(i===0,"Expected versioned message with version 0 but found version ".concat(i));for(var o={numRequiredSignatures:t.shift(),numReadonlySignedAccounts:t.shift(),numReadonlyUnsignedAccounts:t.shift()},u=[],c=er(t),l=0;l<c;l++)u.push(new Y(t.splice(0,cr)));for(var f=he.encode(t.splice(0,cr)),h=er(t),p=[],d=0;d<h;d++){var v=t.shift(),m=er(t),b=t.splice(0,m),w=er(t),y=new Uint8Array(t.splice(0,w));p.push({programIdIndex:v,accountKeyIndexes:b,data:y})}for(var A=er(t),k=[],C=0;C<A;C++){var E=new Y(t.splice(0,cr)),T=er(t),F=t.splice(0,T),O=er(t),H=t.splice(0,O);k.push({accountKey:E,writableIndexes:F,readonlyIndexes:H})}return new n({header:o,staticAccountKeys:u,recentBlockhash:f,compiledInstructions:p,addressTableLookups:k})}}]),n}();function xs(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=sl(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,s=function(){};return{s,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,o;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return a=c.done,c},e:function(c){i=!0,o=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(i)throw o}}}}function sl(n,r){if(n){if(typeof n=="string")return $s(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $s(n,r)}}function $s(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Ls(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function al(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ls(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ls(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Br=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({}),il=re.Buffer.alloc(An).fill(0),Ns=function(){function n(r){de(this,n),this.keys=void 0,this.programId=void 0,this.data=re.Buffer.alloc(0),this.programId=r.programId,this.keys=r.keys,r.data&&(this.data=r.data)}return pe(n,[{key:"toJSON",value:function(){return{keys:this.keys.map(function(e){var t=e.pubkey,s=e.isSigner,a=e.isWritable;return{pubkey:t.toJSON(),isSigner:s,isWritable:a}}),programId:this.programId.toJSON(),data:Oe(this.data)}}}]),n}(),at=function(){function n(r){if(de(this,n),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!r)if(r.feePayer&&(this.feePayer=r.feePayer),r.signatures&&(this.signatures=r.signatures),Object.prototype.hasOwnProperty.call(r,"nonceInfo")){var e=r,t=e.minContextSlot,s=e.nonceInfo;this.minNonceContextSlot=t,this.nonceInfo=s}else if(Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")){var a=r,i=a.blockhash,o=a.lastValidBlockHeight;this.recentBlockhash=i,this.lastValidBlockHeight=o}else{var u=r,c=u.recentBlockhash,l=u.nonceInfo;l&&(this.nonceInfo=l),this.recentBlockhash=c}}return pe(n,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(function(e){return e.toJSON()}),signers:this.signatures.map(function(e){var t=e.publicKey;return t.toJSON()})}}},{key:"add",value:function(){for(var e=this,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];if(s.length===0)throw new Error("No instructions");return s.forEach(function(i){"instructions"in i?e.instructions=e.instructions.concat(i.instructions):"data"in i&&"programId"in i&&"keys"in i?e.instructions.push(i):e.instructions.push(new Ns(i))}),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction].concat(Oe(this.instructions)):t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");var s;if(this.feePayer)s=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)s=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(var a=0;a<t.length;a++)if(t[a].programId===void 0)throw new Error("Transaction instruction index ".concat(a," has undefined program id"));var i=[],o=[];t.forEach(function(E){E.keys.forEach(function(F){o.push(al({},F))});var T=E.programId.toString();i.includes(T)||i.push(T)}),i.forEach(function(E){o.push({pubkey:new Y(E),isSigner:!1,isWritable:!1})});var u=[];o.forEach(function(E){var T=E.pubkey.toString(),F=u.findIndex(function(O){return O.pubkey.toString()===T});F>-1?(u[F].isWritable=u[F].isWritable||E.isWritable,u[F].isSigner=u[F].isSigner||E.isSigner):u.push(E)}),u.sort(function(E,T){if(E.isSigner!==T.isSigner)return E.isSigner?-1:1;if(E.isWritable!==T.isWritable)return E.isWritable?-1:1;var F={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return E.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",F)});var c=u.findIndex(function(E){return E.pubkey.equals(s)});if(c>-1){var l=u.splice(c,1),f=_e(l,1),h=f[0];h.isSigner=!0,h.isWritable=!0,u.unshift(h)}else u.unshift({pubkey:s,isSigner:!0,isWritable:!0});var p=xs(this.signatures),d;try{var v=function(){var T=d.value,F=u.findIndex(function(O){return O.pubkey.equals(T.publicKey)});if(F>-1)u[F].isSigner||(u[F].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error("unknown signer: ".concat(T.publicKey.toString()))};for(p.s();!(d=p.n()).done;)v()}catch(E){p.e(E)}finally{p.f()}var m=0,b=0,w=0,y=[],A=[];u.forEach(function(E){var T=E.pubkey,F=E.isSigner,O=E.isWritable;F?(y.push(T.toString()),m+=1,O||(b+=1)):(A.push(T.toString()),O||(w+=1))});var k=y.concat(A),C=t.map(function(E){var T=E.data,F=E.programId;return{programIdIndex:k.indexOf(F.toString()),accounts:E.keys.map(function(O){return k.indexOf(O.pubkey.toString())}),data:he.encode(T)}});return C.forEach(function(E){Ce(E.programIdIndex>=0),E.accounts.forEach(function(T){return Ce(T>=0)})}),new ft({header:{numRequiredSignatures:m,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:w},accountKeys:k,recentBlockhash:e,instructions:C})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){var s=this.signatures.every(function(a,i){return t[i].equals(a.publicKey)});if(s)return e}return this.signatures=t.map(function(a){return{signature:null,publicKey:a}}),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.getFeeForMessage(this.compileMessage());case 2:return i.abrupt("return",i.sent.value);case 3:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t.length===0)throw new Error("No signers");var a=new Set;this.signatures=t.filter(function(i){var o=i.toString();return a.has(o)?!1:(a.add(o),!0)}).map(function(i){return{signature:null,publicKey:i}})}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t.length===0)throw new Error("No signers");for(var a=new Set,i=[],o=0,u=t;o<u.length;o++){var c=u[o],l=c.publicKey.toString();a.has(l)||(a.add(l),i.push(c))}this.signatures=i.map(function(h){return{signature:null,publicKey:h.publicKey}});var f=this._compile();this._partialSign.apply(this,[f].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];if(t.length===0)throw new Error("No signers");for(var a=new Set,i=[],o=0,u=t;o<u.length;o++){var c=u[o],l=c.publicKey.toString();a.has(l)||(a.add(l),i.push(c))}var f=this._compile();this._partialSign.apply(this,[f].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,s=e.serialize(),a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];i.forEach(function(u){var c=Mc(s,u.secretKey);t._addSignature(u.publicKey,Jr(c))})}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){Ce(t.length===64);var s=this.signatures.findIndex(function(a){return e.equals(a.publicKey)});if(s<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[s].signature=re.Buffer.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),e===void 0?!0:e)}},{key:"_verifySignatures",value:function(e,t){var s=xs(this.signatures),a;try{for(s.s();!(a=s.n()).done;){var i=a.value,o=i.signature,u=i.publicKey;if(o===null){if(t)return!1}else if(!Hc(o,e,u.toBytes()))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=t.requireAllSignatures,a=t.verifySignatures,i=this.serializeMessage();if(a&&!this._verifySignatures(i,s))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,s=[];rr(s,t.length);var a=s.length+t.length*64+e.length,i=re.Buffer.alloc(a);return Ce(t.length<256),re.Buffer.from(s).copy(i,0),t.forEach(function(o,u){var c=o.signature;c!==null&&(Ce(c.length===64,"signature has invalid length"),re.Buffer.from(c).copy(i,s.length+u*64))}),e.copy(i,s.length+t.length*64),Ce(i.length<=Vr,"Transaction too large: ".concat(i.length," > ").concat(Vr)),i}},{key:"keys",get:function(){return Ce(this.instructions.length===1),this.instructions[0].keys.map(function(e){return e.pubkey})}},{key:"programId",get:function(){return Ce(this.instructions.length===1),this.instructions[0].programId}},{key:"data",get:function(){return Ce(this.instructions.length===1),this.instructions[0].data}}],[{key:"from",value:function(e){for(var t=Oe(e),s=er(t),a=[],i=0;i<s;i++){var o=t.slice(0,An);t=t.slice(An),a.push(he.encode(re.Buffer.from(o)))}return n.populate(ft.from(t),a)}},{key:"populate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=new n;return s.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(s.feePayer=e.accountKeys[0]),t.forEach(function(a,i){var o={signature:a==he.encode(il)?null:he.decode(a),publicKey:e.accountKeys[i]};s.signatures.push(o)}),e.instructions.forEach(function(a){var i=a.accounts.map(function(o){var u=e.accountKeys[o];return{pubkey:u,isSigner:s.signatures.some(function(c){return c.publicKey.toString()===u.toString()})||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});s.instructions.push(new Ns({keys:i,programId:e.accountKeys[a.programIdIndex],data:he.decode(a.data)}))}),s._message=e,s._json=s.toJSON(),s}}]),n}(),ol=160,ul=64,cl=ol/ul,ll=1e3/cl;new Y("SysvarC1ock11111111111111111111111111111111");new Y("SysvarEpochSchedu1e111111111111111111111111");new Y("Sysvar1nstructions1111111111111111111111111");new Y("SysvarRecentB1ockHashes11111111111111111111");new Y("SysvarRent111111111111111111111111111111111");new Y("SysvarRewards111111111111111111111111111111");new Y("SysvarS1otHashes111111111111111111111111111");new Y("SysvarS1otHistory11111111111111111111111111");new Y("SysvarStakeHistory1111111111111111111111111");function jr(n){return new Promise(function(r){return setTimeout(r,n)})}var fl=Ue("lamportsPerSignature"),hi=j([W("version"),W("state"),te("authorizedPubkey"),te("nonce"),j([fl],"feeCalculator")]);hi.span;var hl=function(){function n(r){de(this,n),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=r.authorizedPubkey,this.nonce=r.nonce,this.feeCalculator=r.feeCalculator}return pe(n,null,[{key:"fromAccountData",value:function(e){var t=hi.decode(Jr(e),0);return new n({authorizedPubkey:new Y(t.authorizedPubkey),nonce:new Y(t.nonce).toString(),feeCalculator:t.feeCalculator})}}]),n}(),dl=function(r){var e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},pl=function(r){return function(e){var t=Ee(r,e),s=dl(t),a=s.encode,i=s.decode,o=t;return o.decode=function(u,c){var l=i(u,c);return Uu(re.Buffer.from(l))},o.encode=function(u,c,l){var f=Ku(u,r);return a(f,c,l)},o}},Xr=pl(8);Object.freeze({Create:{index:0,layout:j([W("instruction"),Ye("lamports"),Ye("space"),te("programId")])},Assign:{index:1,layout:j([W("instruction"),te("programId")])},Transfer:{index:2,layout:j([W("instruction"),Xr("lamports")])},CreateWithSeed:{index:3,layout:j([W("instruction"),te("base"),zr("seed"),Ye("lamports"),Ye("space"),te("programId")])},AdvanceNonceAccount:{index:4,layout:j([W("instruction")])},WithdrawNonceAccount:{index:5,layout:j([W("instruction"),Ye("lamports")])},InitializeNonceAccount:{index:6,layout:j([W("instruction"),te("authorized")])},AuthorizeNonceAccount:{index:7,layout:j([W("instruction"),te("authorized")])},Allocate:{index:8,layout:j([W("instruction"),Ye("space")])},AllocateWithSeed:{index:9,layout:j([W("instruction"),te("base"),zr("seed"),Ye("space"),te("programId")])},AssignWithSeed:{index:10,layout:j([W("instruction"),te("base"),zr("seed"),te("programId")])},TransferWithSeed:{index:11,layout:j([W("instruction"),Xr("lamports"),zr("seed"),te("programId")])},UpgradeNonceAccount:{index:12,layout:j([W("instruction")])}});new Y("11111111111111111111111111111111");new Y("BPFLoader2111111111111111111111111111111111");function gl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ml=Object.prototype.toString,vl=Object.keys||function(n){var r=[];for(var e in n)r.push(e);return r};function ut(n,r){var e,t,s,a,i,o,u;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return ut(n.toJSON(),r);if(u=ml.call(n),u==="[object Array]"){for(s="[",t=n.length-1,e=0;e<t;e++)s+=ut(n[e],!0)+",";return t>-1&&(s+=ut(n[e],!0)),s+"]"}else if(u==="[object Object]"){for(a=vl(n).sort(),t=a.length,s="",e=0;e<t;)i=a[e],o=ut(n[i],!1),o!==void 0&&(s&&(s+=","),s+=JSON.stringify(i)+":"+o),e++;return"{"+s+"}"}else return JSON.stringify(n);case"function":case"undefined":return r?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var yl=function(n){var r=ut(n,!1);if(r!==void 0)return""+r},Us=gl(yl),it=32;function ln(n){for(var r=0;n>1;)n/=2,r++;return r}function bl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}var wl=function(){function n(r,e,t,s,a){de(this,n),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=r,this.leaderScheduleSlotOffset=e,this.warmup=t,this.firstNormalEpoch=s,this.firstNormalSlot=a}return pe(n,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=ln(bl(e+it+1))-ln(it)-1,s=this.getSlotsInEpoch(t),a=e-(s-it);return[t,a]}else{var i=e-this.firstNormalSlot,o=Math.floor(i/this.slotsPerEpoch),u=this.firstNormalEpoch+o,c=i%this.slotsPerEpoch;return[u,c]}}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*it:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+ln(it)):this.slotsPerEpoch}}]),n}();function di(n){var r=kl();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function kl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fs=function(n){Ge(e,n);var r=di(e);function e(t,s){var a;return de(this,e),a=r.call(this,t),a.logs=void 0,a.logs=s,a}return pe(e)}(dt(Error)),D=function(n){Ge(e,n);var r=di(e);function e(t,s){var a,i=t.code,o=t.message,u=t.data;return de(this,e),a=r.call(this,s!=null?"".concat(s,": ").concat(o):o),a.code=void 0,a.data=void 0,a.code=i,a.data=u,a.name="SolanaJSONRPCError",a}return pe(e)}(dt(Error)),Sl=globalThis.fetch;function qs(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function Al(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?qs(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function El(n){var r=Bl();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function Bl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Il=function(n){Ge(e,n);var r=El(e);function e(t,s,a){var i;de(this,e);var o=function(c){var l=Pc(c,Al({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},s));return"socket"in l?i.underlyingSocket=l.socket:i.underlyingSocket=l,l};return i=r.call(this,o,t,s,a),i.underlyingSocket=void 0,i}return pe(e,[{key:"call",value:function(){for(var s,a=(s=this.underlyingSocket)===null||s===void 0?void 0:s.readyState,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];if(a===1){var c;return(c=hs(ye(e.prototype),"call",this)).call.apply(c,[this].concat(o))}return Promise.reject(new Error("Tried to call a JSON-RPC method `"+o[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+a+")"))}},{key:"notify",value:function(){for(var s,a=(s=this.underlyingSocket)===null||s===void 0?void 0:s.readyState,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];if(a===1){var c;return(c=hs(ye(e.prototype),"notify",this)).call.apply(c,[this].concat(o))}return Promise.reject(new Error("Tried to send a JSON-RPC notification `"+o[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+a+")"))}}]),e}(Tc);function Rl(n,r){var e;try{e=n.layout.decode(r)}catch(t){throw new Error("invalid instruction; "+t)}if(e.typeIndex!==n.index)throw new Error("invalid account data; account type mismatch ".concat(e.typeIndex," != ").concat(n.index));return e}var Ks=56,Ms=function(){function n(r){de(this,n),this.key=void 0,this.state=void 0,this.key=r.key,this.state=r.state}return pe(n,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=Rl(Cl,e),s=e.length-Ks;Ce(s>=0,"lookup table is invalid"),Ce(s%32===0,"lookup table is invalid");var a=s/32,i=j([ze(te(),a,"addresses")]).decode(e.slice(Ks)),o=i.addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Y(t.authority[0]):void 0,addresses:o.map(function(u){return new Y(u)})}}}]),n}(),Cl={index:1,layout:j([W("typeIndex"),Xr("deactivationSlot"),Ue("lastExtendedSlot"),ue("lastExtendedStartIndex"),ue(),ze(te(),Nr(ue(),-1),"authority")])},Tl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Pl(n){var r=n.match(Tl);if(r==null)throw TypeError("Failed to validate endpoint URL `".concat(n,"`"));var e=_e(r,4);e[0];var t=e[1],s=e[2],a=e[3],i=n.startsWith("https:")?"wss:":"ws:",o=s==null?null:parseInt(s.slice(1),10),u=o==null?"":":".concat(o+1);return"".concat(i,"//").concat(t).concat(u).concat(a)}var fn,Ol=["commitment"],_l=["encoding"],xl=["commitment"],$l=["commitment"];function Hs(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function G(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Hs(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Hs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Te=yt(Vn(Y),$(),function(n){return new Y(n)}),pi=Gn([$(),we("base64")]),Jn=yt(Vn(re.Buffer),pi,function(n){return re.Buffer.from(n[0],"base64")}),Ll=30*1e3;function Nl(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function me(n){var r,e;if(typeof n=="string")r=n;else if(n){var t=n.commitment,s=Bt(n,Ol);r=t,e=s}return{commitment:r,config:e}}function gi(n){return Ve([P({jsonrpc:we("2.0"),id:$(),result:n}),P({jsonrpc:we("2.0"),id:$(),error:P({code:vt(),message:$(),data:Z(Ju())})})])}var Ul=gi(vt());function ee(n){return yt(gi(n),Ul,function(r){return"error"in r?r:G(G({},r),{},{result:L(r.result,n)})})}function Be(n){return ee(P({context:P({slot:B()}),value:n}))}function Wt(n){return P({context:P({slot:B()}),value:n})}function hn(n,r){return n===0?new nl({header:r.header,staticAccountKeys:r.accountKeys.map(function(e){return new Y(e)}),recentBlockhash:r.recentBlockhash,compiledInstructions:r.instructions.map(function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:he.decode(e.data)}}),addressTableLookups:r.addressTableLookups}):new ft(r)}var Fl=P({foundation:B(),foundationTerm:B(),initial:B(),taper:B(),terminal:B()}),ql=ee(N(U(P({epoch:B(),effectiveSlot:B(),amount:B(),postBalance:B(),commission:Z(U(B()))})))),Kl=N(P({slot:B(),prioritizationFee:B()})),Ml=P({total:B(),validator:B(),foundation:B(),epoch:B()}),Hl=P({epoch:B(),slotIndex:B(),slotsInEpoch:B(),absoluteSlot:B(),blockHeight:Z(B()),transactionCount:Z(B())}),Dl=P({slotsPerEpoch:B(),leaderScheduleSlotOffset:B(),warmup:fr(),firstNormalEpoch:B(),firstNormalSlot:B()}),jl=ja($(),N(B())),Mr=U(Ve([P({}),$()])),zl=P({err:Mr}),Wl=we("receivedSignature"),Vl=P({"solana-core":$(),"feature-set":Z(B())}),Ds=Be(P({err:U(Ve([P({}),$()])),logs:U(N($())),accounts:Z(U(N(U(P({executable:fr(),owner:$(),lamports:B(),data:N($()),rentEpoch:Z(B())}))))),unitsConsumed:Z(B()),returnData:Z(U(P({programId:$(),data:Gn([$(),we("base64")])})))})),Gl=Be(P({byIdentity:ja($(),N(B())),range:P({firstSlot:B(),lastSlot:B()})}));function Zl(n,r,e,t,s,a){var i=e||Sl,o;a!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");var u;t&&(u=function(){var l=S(g.mark(function f(h,p){var d;return g.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,new Promise(function(b,w){try{t(h,p,function(y,A){return b([y,A])})}catch(y){w(y)}});case 2:return d=m.sent,m.next=5,i.apply(void 0,Oe(d));case 5:return m.abrupt("return",m.sent);case 6:case"end":return m.stop()}},f)}));return function(h,p){return l.apply(this,arguments)}}());var c=new Ic(function(){var l=S(g.mark(function f(h,p){var d,v,m,b,w;return g.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:d={method:"POST",body:h,agent:o,headers:Object.assign({"Content-Type":"application/json"},r||{},Jf)},A.prev=1,v=5,b=500;case 4:if(!u){A.next=10;break}return A.next=7,u(n,d);case 7:m=A.sent,A.next=13;break;case 10:return A.next=12,i(n,d);case 12:m=A.sent;case 13:if(m.status===429){A.next=15;break}return A.abrupt("break",26);case 15:if(s!==!0){A.next=17;break}return A.abrupt("break",26);case 17:if(v-=1,v!==0){A.next=20;break}return A.abrupt("break",26);case 20:return console.log("Server responded with ".concat(m.status," ").concat(m.statusText,".  Retrying after ").concat(b,"ms delay...")),A.next=23,jr(b);case 23:b*=2;case 24:A.next=4;break;case 26:return A.next=28,m.text();case 28:w=A.sent,m.ok?p(null,w):p(new Error("".concat(m.status," ").concat(m.statusText,": ").concat(w))),A.next=35;break;case 32:A.prev=32,A.t0=A.catch(1),A.t0 instanceof Error&&p(A.t0);case 35:case"end":return A.stop()}},f,null,[[1,32]])}));return function(f,h){return l.apply(this,arguments)}}(),{});return c}function Yl(n){return function(r,e){return new Promise(function(t,s){n.request(r,e,function(a,i){if(a){s(a);return}t(i)})})}}function Jl(n){return function(r){return new Promise(function(e,t){r.length===0&&e([]);var s=r.map(function(a){return n.request(a.methodName,a.args)});n.request(s,function(a,i){if(a){t(a);return}e(i)})})}}var Xl=ee(Fl),Ql=ee(Ml),ef=ee(Kl),rf=ee(Hl),tf=ee(Dl),nf=ee(jl),sf=ee(B()),af=Be(P({total:B(),circulating:B(),nonCirculating:B(),nonCirculatingAccounts:N(Te)})),En=P({amount:$(),uiAmount:U(B()),decimals:B(),uiAmountString:Z($())}),of=Be(N(P({address:Te,amount:$(),uiAmount:U(B()),decimals:B(),uiAmountString:Z($())}))),uf=Be(N(P({pubkey:Te,account:P({executable:fr(),owner:Te,lamports:B(),data:Jn,rentEpoch:B()})}))),Bn=P({program:$(),parsed:vt(),space:B()}),cf=Be(N(P({pubkey:Te,account:P({executable:fr(),owner:Te,lamports:B(),data:Bn,rentEpoch:B()})}))),lf=Be(N(P({lamports:B(),address:Te}))),ht=P({executable:fr(),owner:Te,lamports:B(),data:Jn,rentEpoch:B()}),ff=P({pubkey:Te,account:ht}),hf=yt(Ve([Vn(re.Buffer),Bn]),Ve([pi,Bn]),function(n){return Array.isArray(n)?L(n,Jn):n}),In=P({executable:fr(),owner:Te,lamports:B(),data:hf,rentEpoch:B()}),df=P({pubkey:Te,account:In}),pf=P({state:Ve([we("active"),we("inactive"),we("activating"),we("deactivating")]),active:B(),inactive:B()}),gf=ee(N(P({signature:$(),slot:B(),err:Mr,memo:U($()),blockTime:Z(U(B()))}))),mf=ee(N(P({signature:$(),slot:B(),err:Mr,memo:U($()),blockTime:Z(U(B()))}))),vf=P({subscription:B(),result:Wt(ht)}),yf=P({pubkey:Te,account:ht}),bf=P({subscription:B(),result:Wt(yf)}),wf=P({parent:B(),slot:B(),root:B()}),kf=P({subscription:B(),result:wf}),Sf=Ve([P({type:Ve([we("firstShredReceived"),we("completed"),we("optimisticConfirmation"),we("root")]),slot:B(),timestamp:B()}),P({type:we("createdBank"),parent:B(),slot:B(),timestamp:B()}),P({type:we("frozen"),slot:B(),timestamp:B(),stats:P({numTransactionEntries:B(),numSuccessfulTransactions:B(),numFailedTransactions:B(),maxTransactionsPerEntry:B()})}),P({type:we("dead"),slot:B(),timestamp:B(),err:$()})]),Af=P({subscription:B(),result:Sf}),Ef=P({subscription:B(),result:Wt(Ve([zl,Wl]))}),Bf=P({subscription:B(),result:B()}),If=P({pubkey:$(),gossip:U($()),tpu:U($()),rpc:U($()),version:U($())}),js=P({votePubkey:$(),nodePubkey:$(),activatedStake:B(),epochVoteAccount:fr(),epochCredits:N(Gn([B(),B(),B()])),commission:B(),lastVote:B(),rootSlot:U(B())}),Rf=ee(P({current:N(js),delinquent:N(js)})),Cf=Ve([we("processed"),we("confirmed"),we("finalized")]),Tf=P({slot:B(),confirmations:U(B()),err:Mr,confirmationStatus:Z(Cf)}),Pf=Be(N(U(Tf))),Of=ee(B()),mi=P({accountKey:Te,writableIndexes:N(B()),readonlyIndexes:N(B())}),Xn=P({signatures:N($()),message:P({accountKeys:N($()),header:P({numRequiredSignatures:B(),numReadonlySignedAccounts:B(),numReadonlyUnsignedAccounts:B()}),instructions:N(P({accounts:N(B()),data:$(),programIdIndex:B()})),recentBlockhash:$(),addressTableLookups:Z(N(mi))})}),vi=P({pubkey:Te,signer:fr(),writable:fr(),source:Z(Ve([we("transaction"),we("lookupTable")]))}),yi=P({accountKeys:N(vi),signatures:N($())}),bi=P({parsed:vt(),program:$(),programId:Te}),wi=P({accounts:N(Te),data:$(),programId:Te}),_f=Ve([wi,bi]),xf=Ve([P({parsed:vt(),program:$(),programId:$()}),P({accounts:N($()),data:$(),programId:$()})]),ki=yt(_f,xf,function(n){return"accounts"in n?L(n,wi):L(n,bi)}),Si=P({signatures:N($()),message:P({accountKeys:N(vi),instructions:N(ki),recentBlockhash:$(),addressTableLookups:Z(U(N(mi)))})}),Lt=P({accountIndex:B(),mint:$(),owner:Z($()),uiTokenAmount:En}),Ai=P({writable:N(Te),readonly:N(Te)}),Vt=P({err:Mr,fee:B(),innerInstructions:Z(U(N(P({index:B(),instructions:N(P({accounts:N(B()),data:$(),programIdIndex:B()}))})))),preBalances:N(B()),postBalances:N(B()),logMessages:Z(U(N($()))),preTokenBalances:Z(U(N(Lt))),postTokenBalances:Z(U(N(Lt))),loadedAddresses:Z(Ai),computeUnitsConsumed:Z(B())}),Qn=P({err:Mr,fee:B(),innerInstructions:Z(U(N(P({index:B(),instructions:N(ki)})))),preBalances:N(B()),postBalances:N(B()),logMessages:Z(U(N($()))),preTokenBalances:Z(U(N(Lt))),postTokenBalances:Z(U(N(Lt))),loadedAddresses:Z(Ai),computeUnitsConsumed:Z(B())}),nt=Ve([we(0),we("legacy")]),Hr=P({pubkey:$(),lamports:B(),postBalance:U(B()),rewardType:U($()),commission:Z(U(B()))}),$f=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),transactions:N(P({transaction:Xn,meta:U(Vt),version:Z(nt)})),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),Lf=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),Nf=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),transactions:N(P({transaction:yi,meta:U(Vt),version:Z(nt)})),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),Uf=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),transactions:N(P({transaction:Si,meta:U(Qn),version:Z(nt)})),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),Ff=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),transactions:N(P({transaction:yi,meta:U(Qn),version:Z(nt)})),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),qf=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),rewards:Z(N(Hr)),blockTime:U(B()),blockHeight:U(B())}))),Kf=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),transactions:N(P({transaction:Xn,meta:U(Vt)})),rewards:Z(N(Hr)),blockTime:U(B())}))),zs=ee(U(P({blockhash:$(),previousBlockhash:$(),parentSlot:B(),signatures:N($()),blockTime:U(B())}))),dn=ee(U(P({slot:B(),meta:Vt,blockTime:Z(U(B())),transaction:Xn,version:Z(nt)}))),At=ee(U(P({slot:B(),transaction:Si,meta:U(Qn),blockTime:Z(U(B())),version:Z(nt)}))),Mf=Be(P({blockhash:$(),feeCalculator:P({lamportsPerSignature:B()})})),Hf=Be(P({blockhash:$(),lastValidBlockHeight:B()})),Df=Be(fr()),jf=P({slot:B(),numTransactions:B(),numSlots:B(),samplePeriodSecs:B()}),zf=ee(N(jf)),Wf=Be(U(P({feeCalculator:P({lamportsPerSignature:B()})}))),Vf=ee($()),Gf=ee($()),Zf=P({err:Mr,logs:N($()),signature:$()}),Yf=P({result:Wt(Zf),subscription:B()}),Jf={"solana-client":"js/".concat((fn="0.0.0-development")!==null&&fn!==void 0?fn:"UNKNOWN")},es=function(){function n(r,e){var t=this;de(this,n),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=function(){var l={};return function(){var f=S(g.mark(function h(p){var d,v,m,b,w,y;return g.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return v=me(p),m=v.commitment,b=v.config,w=t._buildArgs([],m,void 0,b),y=Us(w),l[y]=(d=l[y])!==null&&d!==void 0?d:S(g.mark(function C(){var E,T;return g.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,t._rpcRequest("getBlockHeight",w);case 3:if(E=O.sent,T=L(E,ee(B())),!("error"in T)){O.next=7;break}throw new D(T.error,"failed to get block height information");case 7:return O.abrupt("return",T.result);case 8:return O.prev=8,delete l[y],O.finish(8);case 11:case"end":return O.stop()}},C,null,[[0,,8,11]])}))(),k.next=6,l[y];case 6:return k.abrupt("return",k.sent);case 7:case"end":return k.stop()}},h)}));return function(h){return f.apply(this,arguments)}}()}();var s,a,i,o,u,c;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,s=e.wsEndpoint,a=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,u=e.disableRetryOnRateLimit,c=e.httpAgent),this._rpcEndpoint=Nl(r),this._rpcWsEndpoint=s||Pl(r),this._rpcClient=Zl(r,a,i,o,u,c),this._rpcRequest=Yl(this._rpcClient),this._rpcBatchRequest=Jl(this._rpcClient),this._rpcWebSocket=new Il(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return pe(n,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgs([s.toBase58()],o,void 0,u),p.next=4,this._rpcRequest("getBalance",c);case 4:if(l=p.sent,f=L(l,Be(B())),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get balance for ".concat(s.toBase58()));case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getBalance",value:function(){var r=S(g.mark(function t(s,a){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getBalanceAndContext(s,a).then(function(u){return u.value}).catch(function(u){throw new Error("failed to get balance of account "+s.toBase58()+": "+u)});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getBlockTime",value:function(){var r=S(g.mark(function t(s){var a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._rpcRequest("getBlockTime",[s]);case 2:if(a=u.sent,i=L(a,ee(U(B()))),!("error"in i)){u.next=6;break}throw new D(i.error,"failed to get block time for slot ".concat(s));case 6:return u.abrupt("return",i.result);case 7:case"end":return u.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getMinimumLedgerSlot",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(s=o.sent,a=L(s,ee(B())),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get minimum ledger slot");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getFirstAvailableBlock",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(s=o.sent,a=L(s,sf),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get first available block");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getSupply",value:function(){var r=S(g.mark(function t(s){var a,i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a={},typeof s=="string"?a={commitment:s}:s?a=G(G({},s),{},{commitment:s&&s.commitment||this.commitment}):a={commitment:this.commitment},c.next=4,this._rpcRequest("getSupply",[a]);case 4:if(i=c.sent,o=L(i,af),!("error"in o)){c.next=8;break}throw new D(o.error,"failed to get supply");case 8:return c.abrupt("return",o.result);case 9:case"end":return c.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getTokenSupply",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=this._buildArgs([s.toBase58()],a),l.next=3,this._rpcRequest("getTokenSupply",i);case 3:if(o=l.sent,u=L(o,Be(En)),!("error"in u)){l.next=7;break}throw new D(u.error,"failed to get token supply");case 7:return l.abrupt("return",u.result);case 8:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getTokenAccountBalance",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=this._buildArgs([s.toBase58()],a),l.next=3,this._rpcRequest("getTokenAccountBalance",i);case 3:if(o=l.sent,u=L(o,Be(En)),!("error"in u)){l.next=7;break}throw new D(u.error,"failed to get token account balance");case 7:return l.abrupt("return",u.result);case 8:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getTokenAccountsByOwner",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h,p;return g.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=me(i),u=o.commitment,c=o.config,l=[s.toBase58()],"mint"in a?l.push({mint:a.mint.toBase58()}):l.push({programId:a.programId.toBase58()}),f=this._buildArgs(l,u,"base64",c),v.next=6,this._rpcRequest("getTokenAccountsByOwner",f);case 6:if(h=v.sent,p=L(h,uf),!("error"in p)){v.next=10;break}throw new D(p.error,"failed to get token accounts owned by account ".concat(s.toBase58()));case 10:return v.abrupt("return",p.result);case 11:case"end":return v.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getParsedTokenAccountsByOwner",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=[s.toBase58()],"mint"in a?o.push({mint:a.mint.toBase58()}):o.push({programId:a.programId.toBase58()}),u=this._buildArgs(o,i,"jsonParsed"),h.next=5,this._rpcRequest("getTokenAccountsByOwner",u);case 5:if(c=h.sent,l=L(c,cf),!("error"in l)){h.next=9;break}throw new D(l.error,"failed to get token accounts owned by account ".concat(s.toBase58()));case 9:return h.abrupt("return",l.result);case 10:case"end":return h.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getLargestAccounts",value:function(){var r=S(g.mark(function t(s){var a,i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=G(G({},s),{},{commitment:s&&s.commitment||this.commitment}),i=a.filter||a.commitment?[a]:[],l.next=4,this._rpcRequest("getLargestAccounts",i);case 4:if(o=l.sent,u=L(o,lf),!("error"in u)){l.next=8;break}throw new D(u.error,"failed to get largest accounts");case 8:return l.abrupt("return",u.result);case 9:case"end":return l.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getTokenLargestAccounts",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=this._buildArgs([s.toBase58()],a),l.next=3,this._rpcRequest("getTokenLargestAccounts",i);case 3:if(o=l.sent,u=L(o,of),!("error"in u)){l.next=7;break}throw new D(u.error,"failed to get token largest accounts");case 7:return l.abrupt("return",u.result);case 8:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getAccountInfoAndContext",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgs([s.toBase58()],o,"base64",u),p.next=4,this._rpcRequest("getAccountInfo",c);case 4:if(l=p.sent,f=L(l,Be(U(ht))),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get info about account ".concat(s.toBase58()));case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedAccountInfo",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgs([s.toBase58()],o,"jsonParsed",u),p.next=4,this._rpcRequest("getAccountInfo",c);case 4:if(l=p.sent,f=L(l,Be(U(In))),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get info about account ".concat(s.toBase58()));case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getAccountInfo",value:function(){var r=S(g.mark(function t(s,a){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,this.getAccountInfoAndContext(s,a);case 3:return i=u.sent,u.abrupt("return",i.value);case 7:throw u.prev=7,u.t0=u.catch(0),new Error("failed to get info about account "+s.toBase58()+": "+u.t0);case 10:case"end":return u.stop()}},t,this,[[0,7]])}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getMultipleParsedAccounts",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=s.map(function(v){return v.toBase58()}),l=this._buildArgs([c],o,"jsonParsed",u),d.next=5,this._rpcRequest("getMultipleAccounts",l);case 5:if(f=d.sent,h=L(f,Be(N(U(In)))),!("error"in h)){d.next=9;break}throw new D(h.error,"failed to get info for accounts ".concat(c));case 9:return d.abrupt("return",h.result);case 10:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getMultipleAccountsInfoAndContext",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=s.map(function(v){return v.toBase58()}),l=this._buildArgs([c],o,"base64",u),d.next=5,this._rpcRequest("getMultipleAccounts",l);case 5:if(f=d.sent,h=L(f,Be(N(U(ht)))),!("error"in h)){d.next=9;break}throw new D(h.error,"failed to get info for accounts ".concat(c));case 9:return d.abrupt("return",h.result);case 10:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getMultipleAccountsInfo",value:function(){var r=S(g.mark(function t(s,a){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getMultipleAccountsInfoAndContext(s,a);case 2:return i=u.sent,u.abrupt("return",i.value);case 4:case"end":return u.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getStakeActivation",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=me(a),u=o.commitment,c=o.config,l=this._buildArgs([s.toBase58()],u,void 0,G(G({},c),{},{epoch:i??(c==null?void 0:c.epoch)})),d.next=4,this._rpcRequest("getStakeActivation",l);case 4:if(f=d.sent,h=L(f,ee(pf)),!("error"in h)){d.next=8;break}throw new D(h.error,"failed to get Stake Activation ".concat(s.toBase58()));case 8:return d.abrupt("return",h.result);case 9:case"end":return d.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getProgramAccounts",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h,p,d,v;return g.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=u||{},l=c.encoding,f=Bt(c,_l),h=this._buildArgs([s.toBase58()],o,l||"base64",f),b.next=5,this._rpcRequest("getProgramAccounts",h);case 5:if(p=b.sent,d=N(ff),v=f.withContext===!0?L(p,Be(d)):L(p,ee(d)),!("error"in v)){b.next=10;break}throw new D(v.error,"failed to get accounts owned by program ".concat(s.toBase58()));case 10:return b.abrupt("return",v.result);case 11:case"end":return b.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedProgramAccounts",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgs([s.toBase58()],o,"jsonParsed",u),p.next=4,this._rpcRequest("getProgramAccounts",c);case 4:if(l=p.sent,f=L(l,ee(N(df))),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get accounts owned by program ".concat(s.toBase58()));case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"confirmTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(typeof s!="string"){f.next=4;break}i=s,f.next=8;break;case 4:if(u=s,!((o=u.abortSignal)!==null&&o!==void 0&&o.aborted)){f.next=7;break}return f.abrupt("return",Promise.reject(u.abortSignal.reason));case 7:i=u.signature;case 8:f.prev=8,c=he.decode(i),f.next=15;break;case 12:throw f.prev=12,f.t0=f.catch(8),new Error("signature must be base58 encoded: "+i);case 15:if(Ce(c.length===64,"signature has invalid length"),typeof s!="string"){f.next=22;break}return f.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:a||this.commitment,signature:i});case 19:return f.abrupt("return",f.sent);case 22:if(!("lastValidBlockHeight"in s)){f.next=28;break}return f.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:a||this.commitment,strategy:s});case 25:return f.abrupt("return",f.sent);case 28:return f.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:a||this.commitment,strategy:s});case 30:return f.abrupt("return",f.sent);case 31:case"end":return f.stop()}},t,this,[[8,12]])}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getCancellationPromise",value:function(e){return new Promise(function(t,s){e!=null&&(e.aborted?s(e.reason):e.addEventListener("abort",function(){s(e.reason)}))})}},{key:"getTransactionConfirmationPromise",value:function(e){var t=this,s=e.commitment,a=e.signature,i,o,u=!1,c=new Promise(function(f,h){try{i=t.onSignature(a,function(d,v){i=void 0;var m={context:v,value:d};f({__type:Br.PROCESSED,response:m})},s);var p=new Promise(function(d){i==null?d():o=t._onSubscriptionStateChange(i,function(v){v==="subscribed"&&d()})});S(g.mark(function d(){var v,m,b;return g.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,p;case 2:if(!u){y.next=4;break}return y.abrupt("return");case 4:return y.next=6,t.getSignatureStatus(a);case 6:if(v=y.sent,!u){y.next=9;break}return y.abrupt("return");case 9:if(v!=null){y.next=11;break}return y.abrupt("return");case 11:if(m=v.context,b=v.value,b!=null){y.next=14;break}return y.abrupt("return");case 14:if(!(b!=null&&b.err)){y.next=18;break}h(b.err),y.next=29;break;case 18:y.t0=s,y.next=y.t0==="confirmed"||y.t0==="single"||y.t0==="singleGossip"?21:y.t0==="finalized"||y.t0==="max"||y.t0==="root"?24:(y.t0==="processed"||y.t0==="recent",27);break;case 21:if(b.confirmationStatus!=="processed"){y.next=23;break}return y.abrupt("return");case 23:return y.abrupt("break",27);case 24:if(!(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")){y.next=26;break}return y.abrupt("return");case 26:return y.abrupt("break",27);case 27:u=!0,f({__type:Br.PROCESSED,response:{context:m,value:b}});case 29:case"end":return y.stop()}},d)}))()}catch(d){h(d)}}),l=function(){o&&(o(),o=void 0),i!=null&&(t.removeSignatureListener(i),i=void 0)};return{abortConfirmation:l,confirmationPromise:c}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:function(){var r=S(g.mark(function t(s){var a=this,i,o,u,c,l,f,h,p,d,v,m,b,w;return g.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return i=s.commitment,o=s.strategy,u=o.abortSignal,c=o.lastValidBlockHeight,l=o.signature,f=!1,h=new Promise(function(k){var C=function(){var E=S(g.mark(function T(){var F;return g.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,a.getBlockHeight(i);case 3:return F=H.sent,H.abrupt("return",F);case 7:return H.prev=7,H.t0=H.catch(0),H.abrupt("return",-1);case 10:case"end":return H.stop()}},T,null,[[0,7]])}));return function(){return E.apply(this,arguments)}}();S(g.mark(function E(){var T;return g.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,C();case 2:if(T=O.sent,!f){O.next=5;break}return O.abrupt("return");case 5:if(!(T<=c)){O.next=17;break}return O.next=8,jr(1e3);case 8:if(!f){O.next=10;break}return O.abrupt("return");case 10:return O.next=12,C();case 12:if(T=O.sent,!f){O.next=15;break}return O.abrupt("return");case 15:O.next=5;break;case 17:k({__type:Br.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return O.stop()}},E)}))()}),p=this.getTransactionConfirmationPromise({commitment:i,signature:l}),d=p.abortConfirmation,v=p.confirmationPromise,m=this.getCancellationPromise(u),A.prev=5,A.next=8,Promise.race([m,v,h]);case 8:if(w=A.sent,w.__type!==Br.PROCESSED){A.next=13;break}b=w.response,A.next=14;break;case 13:throw new ci(l);case 14:return A.prev=14,f=!0,d(),A.finish(14);case 18:return A.abrupt("return",b);case 19:case"end":return A.stop()}},t,this,[[5,,14,18]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"confirmTransactionUsingDurableNonceStrategy",value:function(){var r=S(g.mark(function t(s){var a=this,i,o,u,c,l,f,h,p,d,v,m,b,w,y,A,k,C,E,T,F,O;return g.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return i=s.commitment,o=s.strategy,u=o.abortSignal,c=o.minContextSlot,l=o.nonceAccountPubkey,f=o.nonceValue,h=o.signature,p=!1,d=new Promise(function(ce){var ge=f,_=null,K=function(){var J=S(g.mark(function x(){var I,q,z;return g.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,V.next=3,a.getNonceAndContext(l,{commitment:i,minContextSlot:c});case 3:return I=V.sent,q=I.context,z=I.value,_=q.slot,V.abrupt("return",z==null?void 0:z.nonce);case 10:return V.prev=10,V.t0=V.catch(0),V.abrupt("return",ge);case 13:case"end":return V.stop()}},x,null,[[0,10]])}));return function(){return J.apply(this,arguments)}}();S(g.mark(function J(){return g.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,K();case 2:if(ge=I.sent,!p){I.next=5;break}return I.abrupt("return");case 5:if(f===ge){I.next=9;break}return ce({__type:Br.NONCE_INVALID,slotInWhichNonceDidAdvance:_}),I.abrupt("return");case 9:return I.next=11,jr(2e3);case 11:if(!p){I.next=13;break}return I.abrupt("return");case 13:return I.next=15,K();case 15:if(ge=I.sent,!p){I.next=18;break}return I.abrupt("return");case 18:I.next=5;break;case 20:case"end":return I.stop()}},J)}))()}),v=this.getTransactionConfirmationPromise({commitment:i,signature:h}),m=v.abortConfirmation,b=v.confirmationPromise,w=this.getCancellationPromise(u),M.prev=5,M.next=8,Promise.race([w,b,d]);case 8:if(A=M.sent,A.__type!==Br.PROCESSED){M.next=13;break}y=A.response,M.next=47;break;case 13:return M.next=16,this.getSignatureStatus(h);case 16:if(T=M.sent,T!=null){M.next=19;break}return M.abrupt("break",27);case 19:if(!(T.context.slot<((E=A.slotInWhichNonceDidAdvance)!==null&&E!==void 0?E:c))){M.next=23;break}return M.next=22,jr(400);case 22:return M.abrupt("continue",13);case 23:return C=T,M.abrupt("break",27);case 27:if(!((k=C)!==null&&k!==void 0&&k.value)){M.next=46;break}F=i||"finalized",O=C.value.confirmationStatus,M.t0=F,M.next=M.t0==="processed"||M.t0==="recent"?33:M.t0==="confirmed"||M.t0==="single"||M.t0==="singleGossip"?36:M.t0==="finalized"||M.t0==="max"||M.t0==="root"?39:42;break;case 33:if(!(O!=="processed"&&O!=="confirmed"&&O!=="finalized")){M.next=35;break}throw new ot(h);case 35:return M.abrupt("break",43);case 36:if(!(O!=="confirmed"&&O!=="finalized")){M.next=38;break}throw new ot(h);case 38:return M.abrupt("break",43);case 39:if(O==="finalized"){M.next=41;break}throw new ot(h);case 41:return M.abrupt("break",43);case 42:case 43:y={context:C.context,value:{err:C.value.err}},M.next=47;break;case 46:throw new ot(h);case 47:return M.prev=47,p=!0,m(),M.finish(47);case 51:return M.abrupt("return",y);case 52:case"end":return M.stop()}},t,this,[[5,,47,51]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:function(){var r=S(g.mark(function t(s){var a=this,i,o,u,c,l,f,h,p,d;return g.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return i=s.commitment,o=s.signature,c=new Promise(function(b){var w=a._confirmTransactionInitialTimeout||6e4;switch(i){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=a._confirmTransactionInitialTimeout||3e4;break}}u=setTimeout(function(){return b({__type:Br.TIMED_OUT,timeoutMs:w})},w)}),l=this.getTransactionConfirmationPromise({commitment:i,signature:o}),f=l.abortConfirmation,h=l.confirmationPromise,m.prev=3,m.next=6,Promise.race([h,c]);case 6:if(d=m.sent,d.__type!==Br.PROCESSED){m.next=11;break}p=d.response,m.next=12;break;case 11:throw new li(o,d.timeoutMs/1e3);case 12:return m.prev=12,clearTimeout(u),f(),m.finish(12);case 16:return m.abrupt("return",p);case 17:case"end":return m.stop()}},t,this,[[3,,12,16]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getClusterNodes",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(s=o.sent,a=L(s,ee(N(If))),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get cluster nodes");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getVoteAccounts",value:function(){var r=S(g.mark(function t(s){var a,i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this._buildArgs([],s),c.next=3,this._rpcRequest("getVoteAccounts",a);case 3:if(i=c.sent,o=L(i,Rf),!("error"in o)){c.next=7;break}throw new D(o.error,"failed to get vote accounts");case 7:return c.abrupt("return",o.result);case 8:case"end":return c.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getSlot",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,void 0,o),h.next=4,this._rpcRequest("getSlot",u);case 4:if(c=h.sent,l=L(c,ee(B())),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get slot");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getSlotLeader",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,void 0,o),h.next=4,this._rpcRequest("getSlotLeader",u);case 4:if(c=h.sent,l=L(c,ee($())),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get slot leader");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getSlotLeaders",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=[s,a],l.next=3,this._rpcRequest("getSlotLeaders",i);case 3:if(o=l.sent,u=L(o,ee(N(Te))),!("error"in u)){l.next=7;break}throw new D(u.error,"failed to get slot leaders");case 7:return l.abrupt("return",u.result);case 8:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getSignatureStatus",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getSignatureStatuses([s],a);case 2:return i=f.sent,o=i.context,u=i.value,Ce(u.length===1),c=u[0],f.abrupt("return",{context:o,value:c});case 8:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getSignatureStatuses",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=[s],a&&i.push(a),l.next=4,this._rpcRequest("getSignatureStatuses",i);case 4:if(o=l.sent,u=L(o,Pf),!("error"in u)){l.next=8;break}throw new D(u.error,"failed to get signature status");case 8:return l.abrupt("return",u.result);case 9:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getTransactionCount",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,void 0,o),h.next=4,this._rpcRequest("getTransactionCount",u);case 4:if(c=h.sent,l=L(c,ee(B())),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get transaction count");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getTotalSupply",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getSupply({commitment:s,excludeNonCirculatingAccountsList:!0});case 2:return a=o.sent,o.abrupt("return",a.value.total);case 4:case"end":return o.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getInflationGovernor",value:function(){var r=S(g.mark(function t(s){var a,i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this._buildArgs([],s),c.next=3,this._rpcRequest("getInflationGovernor",a);case 3:if(i=c.sent,o=L(i,Xl),!("error"in o)){c.next=7;break}throw new D(o.error,"failed to get inflation");case 7:return c.abrupt("return",o.result);case 8:case"end":return c.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getInflationReward",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=me(i),u=o.commitment,c=o.config,l=this._buildArgs([s.map(function(v){return v.toBase58()})],u,void 0,G(G({},c),{},{epoch:a??(c==null?void 0:c.epoch)})),d.next=4,this._rpcRequest("getInflationReward",l);case 4:if(f=d.sent,h=L(f,ql),!("error"in h)){d.next=8;break}throw new D(h.error,"failed to get inflation reward");case 8:return d.abrupt("return",h.result);case 9:case"end":return d.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getInflationRate",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(s=o.sent,a=L(s,Ql),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get inflation rate");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getEpochInfo",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,void 0,o),h.next=4,this._rpcRequest("getEpochInfo",u);case 4:if(c=h.sent,l=L(c,rf),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get epoch info");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getEpochSchedule",value:function(){var r=S(g.mark(function t(){var s,a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(s=u.sent,a=L(s,tf),!("error"in a)){u.next=6;break}throw new D(a.error,"failed to get epoch schedule");case 6:return i=a.result,u.abrupt("return",new wl(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot));case 8:case"end":return u.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getLeaderSchedule",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(s=o.sent,a=L(s,nf),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get leader schedule");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getMinimumBalanceForRentExemption",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=this._buildArgs([s],a),l.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",i);case 3:if(o=l.sent,u=L(o,Of),!("error"in u)){l.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),l.abrupt("return",0);case 8:return l.abrupt("return",u.result);case 9:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getRecentBlockhashAndContext",value:function(){var r=S(g.mark(function t(s){var a,i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=this._buildArgs([],s),c.next=3,this._rpcRequest("getRecentBlockhash",a);case 3:if(i=c.sent,o=L(i,Mf),!("error"in o)){c.next=7;break}throw new D(o.error,"failed to get recent blockhash");case 7:return c.abrupt("return",o.result);case 8:case"end":return c.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getRecentPerformanceSamples",value:function(){var r=S(g.mark(function t(s){var a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this._rpcRequest("getRecentPerformanceSamples",s?[s]:[]);case 2:if(a=u.sent,i=L(a,zf),!("error"in i)){u.next=6;break}throw new D(i.error,"failed to get recent performance samples");case 6:return u.abrupt("return",i.result);case 7:case"end":return u.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getFeeCalculatorForBlockhash",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=this._buildArgs([s],a),p.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",i);case 3:if(o=p.sent,u=L(o,Wf),!("error"in u)){p.next=7;break}throw new D(u.error,"failed to get fee calculator");case 7:return c=u.result,l=c.context,f=c.value,p.abrupt("return",{context:l,value:f!==null?f.feeCalculator:null});case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getFeeForMessage",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=Jr(s.serialize()).toString("base64"),o=this._buildArgs([i],a),f.next=4,this._rpcRequest("getFeeForMessage",o);case 4:if(u=f.sent,c=L(u,Be(U(B()))),!("error"in c)){f.next=8;break}throw new D(c.error,"failed to get fee for message");case 8:if(c.result!==null){f.next=10;break}throw new Error("invalid blockhash");case 10:return f.abrupt("return",c.result);case 11:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getRecentPrioritizationFees",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=s==null||(a=s.lockedWritableAccounts)===null||a===void 0?void 0:a.map(function(h){return h.toBase58()}),o=i!=null&&i.length?[i]:[],f.next=4,this._rpcRequest("getRecentPrioritizationFees",o);case 4:if(u=f.sent,c=L(u,ef),!("error"in c)){f.next=8;break}throw new D(c.error,"failed to get recent prioritization fees");case 8:return f.abrupt("return",c.result);case 9:case"end":return f.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getRecentBlockhash",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,this.getRecentBlockhashAndContext(s);case 3:return a=o.sent,o.abrupt("return",a.value);case 7:throw o.prev=7,o.t0=o.catch(0),new Error("failed to get recent blockhash: "+o.t0);case 10:case"end":return o.stop()}},t,this,[[0,7]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getLatestBlockhash",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,this.getLatestBlockhashAndContext(s);case 3:return a=o.sent,o.abrupt("return",a.value);case 7:throw o.prev=7,o.t0=o.catch(0),new Error("failed to get recent blockhash: "+o.t0);case 10:case"end":return o.stop()}},t,this,[[0,7]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getLatestBlockhashAndContext",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,void 0,o),h.next=4,this._rpcRequest("getLatestBlockhash",u);case 4:if(c=h.sent,l=L(c,Hf),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get latest blockhash");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"isBlockhashValid",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgs([s],o,void 0,u),p.next=4,this._rpcRequest("isBlockhashValid",c);case 4:if(l=p.sent,f=L(l,Df),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to determine if the blockhash `"+s+"`is valid");case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getVersion",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getVersion",[]);case 2:if(s=o.sent,a=L(s,ee(Vl)),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get version");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getGenesisHash",value:function(){var r=S(g.mark(function t(){var s,a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(s=o.sent,a=L(s,ee($())),!("error"in a)){o.next=6;break}throw new D(a.error,"failed to get genesis hash");case 6:return o.abrupt("return",a.result);case 7:case"end":return o.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getBlock",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h,p,d;return g.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgsAtLeastConfirmed([s],o,void 0,u),m.next=4,this._rpcRequest("getBlock",c);case 4:l=m.sent,m.prev=5,m.t0=u==null?void 0:u.transactionDetails,m.next=m.t0==="accounts"?9:m.t0==="none"?13:17;break;case 9:if(f=L(l,Nf),!("error"in f)){m.next=12;break}throw f.error;case 12:return m.abrupt("return",f.result);case 13:if(h=L(l,Lf),!("error"in h)){m.next=16;break}throw h.error;case 16:return m.abrupt("return",h.result);case 17:if(p=L(l,$f),!("error"in p)){m.next=20;break}throw p.error;case 20:return d=p.result,m.abrupt("return",d?G(G({},d),{},{transactions:d.transactions.map(function(b){var w=b.transaction,y=b.meta,A=b.version;return{meta:y,transaction:G(G({},w),{},{message:hn(A,w.message)}),version:A}})}):null);case 22:m.next=27;break;case 24:throw m.prev=24,m.t1=m.catch(5),new D(m.t1,"failed to get confirmed block");case 27:case"end":return m.stop()}},t,this,[[5,24]])}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedBlock",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h,p;return g.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgsAtLeastConfirmed([s],o,"jsonParsed",u),v.next=4,this._rpcRequest("getBlock",c);case 4:l=v.sent,v.prev=5,v.t0=u==null?void 0:u.transactionDetails,v.next=v.t0==="accounts"?9:v.t0==="none"?13:17;break;case 9:if(f=L(l,Ff),!("error"in f)){v.next=12;break}throw f.error;case 12:return v.abrupt("return",f.result);case 13:if(h=L(l,qf),!("error"in h)){v.next=16;break}throw h.error;case 16:return v.abrupt("return",h.result);case 17:if(p=L(l,Uf),!("error"in p)){v.next=20;break}throw p.error;case 20:return v.abrupt("return",p.result);case 21:v.next=26;break;case 23:throw v.prev=23,v.t1=v.catch(5),new D(v.t1,"failed to get block");case 26:case"end":return v.stop()}},t,this,[[5,23]])}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getBlockProduction",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return typeof s=="string"?i=s:s&&(o=s.commitment,u=Bt(s,xl),i=o,a=u),c=this._buildArgs([],i,"base64",a),p.next=4,this._rpcRequest("getBlockProduction",c);case 4:if(l=p.sent,f=L(l,Gl),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get block production information");case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgsAtLeastConfirmed([s],o,void 0,u),d.next=4,this._rpcRequest("getTransaction",c);case 4:if(l=d.sent,f=L(l,dn),!("error"in f)){d.next=8;break}throw new D(f.error,"failed to get transaction");case 8:if(h=f.result,h){d.next=11;break}return d.abrupt("return",h);case 11:return d.abrupt("return",G(G({},h),{},{transaction:G(G({},h.transaction),{},{message:hn(h.version,h.transaction.message)})}));case 12:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=me(a),o=i.commitment,u=i.config,c=this._buildArgsAtLeastConfirmed([s],o,"jsonParsed",u),p.next=4,this._rpcRequest("getTransaction",c);case 4:if(l=p.sent,f=L(l,At),!("error"in f)){p.next=8;break}throw new D(f.error,"failed to get transaction");case 8:return p.abrupt("return",f.result);case 9:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedTransactions",value:function(){var r=S(g.mark(function t(s,a){var i=this,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=me(a),u=o.commitment,c=o.config,l=s.map(function(v){var m=i._buildArgsAtLeastConfirmed([v],u,"jsonParsed",c);return{methodName:"getTransaction",args:m}}),d.next=4,this._rpcBatchRequest(l);case 4:return f=d.sent,h=f.map(function(v){var m=L(v,At);if("error"in m)throw new D(m.error,"failed to get transactions");return m.result}),d.abrupt("return",h);case 7:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getTransactions",value:function(){var r=S(g.mark(function t(s,a){var i=this,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=me(a),u=o.commitment,c=o.config,l=s.map(function(v){var m=i._buildArgsAtLeastConfirmed([v],u,void 0,c);return{methodName:"getTransaction",args:m}}),d.next=4,this._rpcBatchRequest(l);case 4:return f=d.sent,h=f.map(function(v){var m=L(v,dn);if("error"in m)throw new D(m.error,"failed to get transactions");var b=m.result;return b&&G(G({},b),{},{transaction:G(G({},b.transaction),{},{message:hn(b.version,b.transaction.message)})})}),d.abrupt("return",h);case 7:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getConfirmedBlock",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return i=this._buildArgsAtLeastConfirmed([s],a),h.next=3,this._rpcRequest("getConfirmedBlock",i);case 3:if(o=h.sent,u=L(o,Kf),!("error"in u)){h.next=7;break}throw new D(u.error,"failed to get confirmed block");case 7:if(c=u.result,c){h.next=10;break}throw new Error("Confirmed block "+s+" not found");case 10:return l=G(G({},c),{},{transactions:c.transactions.map(function(p){var d=p.transaction,v=p.meta,m=new ft(d.message);return{meta:v,transaction:G(G({},d),{},{message:m})}})}),h.abrupt("return",G(G({},l),{},{transactions:l.transactions.map(function(p){var d=p.transaction,v=p.meta;return{meta:v,transaction:at.populate(d.message,d.signatures)}})}));case 12:case"end":return h.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getBlocks",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=this._buildArgsAtLeastConfirmed(a!==void 0?[s,a]:[s],i),f.next=3,this._rpcRequest("getBlocks",o);case 3:if(u=f.sent,c=L(u,ee(N(B()))),!("error"in c)){f.next=7;break}throw new D(c.error,"failed to get blocks");case 7:return f.abrupt("return",c.result);case 8:case"end":return f.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getBlockSignatures",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=this._buildArgsAtLeastConfirmed([s],a,void 0,{transactionDetails:"signatures",rewards:!1}),f.next=3,this._rpcRequest("getBlock",i);case 3:if(o=f.sent,u=L(o,zs),!("error"in u)){f.next=7;break}throw new D(u.error,"failed to get block");case 7:if(c=u.result,c){f.next=10;break}throw new Error("Block "+s+" not found");case 10:return f.abrupt("return",c);case 11:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getConfirmedBlockSignatures",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=this._buildArgsAtLeastConfirmed([s],a,void 0,{transactionDetails:"signatures",rewards:!1}),f.next=3,this._rpcRequest("getConfirmedBlock",i);case 3:if(o=f.sent,u=L(o,zs),!("error"in u)){f.next=7;break}throw new D(u.error,"failed to get confirmed block");case 7:if(c=u.result,c){f.next=10;break}throw new Error("Confirmed block "+s+" not found");case 10:return f.abrupt("return",c);case 11:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getConfirmedTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i=this._buildArgsAtLeastConfirmed([s],a),p.next=3,this._rpcRequest("getConfirmedTransaction",i);case 3:if(o=p.sent,u=L(o,dn),!("error"in u)){p.next=7;break}throw new D(u.error,"failed to get transaction");case 7:if(c=u.result,c){p.next=10;break}return p.abrupt("return",c);case 10:return l=new ft(c.transaction.message),f=c.transaction.signatures,p.abrupt("return",G(G({},c),{},{transaction:at.populate(l,f)}));case 13:case"end":return p.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedConfirmedTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=this._buildArgsAtLeastConfirmed([s],a,"jsonParsed"),l.next=3,this._rpcRequest("getConfirmedTransaction",i);case 3:if(o=l.sent,u=L(o,At),!("error"in u)){l.next=7;break}throw new D(u.error,"failed to get confirmed transaction");case 7:return l.abrupt("return",u.result);case 8:case"end":return l.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getParsedConfirmedTransactions",value:function(){var r=S(g.mark(function t(s,a){var i=this,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=s.map(function(h){var p=i._buildArgsAtLeastConfirmed([h],a,"jsonParsed");return{methodName:"getConfirmedTransaction",args:p}}),f.next=3,this._rpcBatchRequest(o);case 3:return u=f.sent,c=u.map(function(h){var p=L(h,At);if("error"in p)throw new D(p.error,"failed to get confirmed transactions");return p.result}),f.abrupt("return",c);case 6:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getConfirmedSignaturesForAddress",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o={},d.next=3,this.getFirstAvailableBlock();case 3:u=d.sent;case 4:if("until"in o){d.next=24;break}if(a--,!(a<=0||a<u)){d.next=8;break}return d.abrupt("break",24);case 8:return d.prev=8,d.next=11,this.getConfirmedBlockSignatures(a,"finalized");case 11:c=d.sent,c.signatures.length>0&&(o.until=c.signatures[c.signatures.length-1].toString()),d.next=22;break;case 15:if(d.prev=15,d.t0=d.catch(8),!(d.t0 instanceof Error&&d.t0.message.includes("skipped"))){d.next=21;break}return d.abrupt("continue",4);case 21:throw d.t0;case 22:d.next=4;break;case 24:return d.next=26,this.getSlot("finalized");case 26:l=d.sent;case 27:if("before"in o){d.next=47;break}if(i++,!(i>l)){d.next=31;break}return d.abrupt("break",47);case 31:return d.prev=31,d.next=34,this.getConfirmedBlockSignatures(i);case 34:f=d.sent,f.signatures.length>0&&(o.before=f.signatures[f.signatures.length-1].toString()),d.next=45;break;case 38:if(d.prev=38,d.t1=d.catch(31),!(d.t1 instanceof Error&&d.t1.message.includes("skipped"))){d.next=44;break}return d.abrupt("continue",27);case 44:throw d.t1;case 45:d.next=27;break;case 47:return d.next=49,this.getConfirmedSignaturesForAddress2(s,o);case 49:return h=d.sent,d.abrupt("return",h.map(function(v){return v.signature}));case 51:case"end":return d.stop()}},t,this,[[8,15],[31,38]])}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=this._buildArgsAtLeastConfirmed([s.toBase58()],i,void 0,a),f.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",o);case 3:if(u=f.sent,c=L(u,gf),!("error"in c)){f.next=7;break}throw new D(c.error,"failed to get confirmed signatures for address");case 7:return f.abrupt("return",c.result);case 8:case"end":return f.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getSignaturesForAddress",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=this._buildArgsAtLeastConfirmed([s.toBase58()],i,void 0,a),f.next=3,this._rpcRequest("getSignaturesForAddress",o);case 3:if(u=f.sent,c=L(u,mf),!("error"in c)){f.next=7;break}throw new D(c.error,"failed to get signatures for address");case 7:return f.abrupt("return",c.result);case 8:case"end":return f.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"getAddressLookupTable",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getAccountInfoAndContext(s,a);case 2:return i=f.sent,o=i.context,u=i.value,c=null,u!==null&&(c=new Ms({key:s,state:Ms.deserialize(u.data)})),f.abrupt("return",{context:o,value:c});case 8:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getNonceAndContext",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getAccountInfoAndContext(s,a);case 2:return i=f.sent,o=i.context,u=i.value,c=null,u!==null&&(c=hl.fromAccountData(u.data)),f.abrupt("return",{context:o,value:c});case 8:case"end":return f.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"getNonce",value:function(){var r=S(g.mark(function t(s,a){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getNonceAndContext(s,a).then(function(u){return u.value}).catch(function(u){throw new Error("failed to get nonce for account "+s.toBase58()+": "+u)});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"requestAirdrop",value:function(){var r=S(g.mark(function t(s,a){var i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this._rpcRequest("requestAirdrop",[s.toBase58(),a]);case 2:if(i=c.sent,o=L(i,Vf),!("error"in o)){c.next=6;break}throw new D(o.error,"airdrop to ".concat(s.toBase58()," failed"));case 6:return c.abrupt("return",o.result);case 7:case"end":return c.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"_blockhashWithExpiryBlockHeight",value:function(){var r=S(g.mark(function t(s){var a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s){u.next=10;break}case 1:if(!this._pollingBlockhash){u.next=6;break}return u.next=4,jr(100);case 4:u.next=1;break;case 6:if(a=Date.now()-this._blockhashInfo.lastFetch,i=a>=Ll,!(this._blockhashInfo.latestBlockhash!==null&&!i)){u.next=10;break}return u.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return u.next=12,this._pollNewBlockhash();case 12:return u.abrupt("return",u.sent);case 13:case"end":return u.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_pollNewBlockhash",value:function(){var r=S(g.mark(function t(){var s,a,i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:this._pollingBlockhash=!0,l.prev=1,s=Date.now(),a=this._blockhashInfo.latestBlockhash,i=a?a.blockhash:null,o=0;case 6:if(!(o<50)){l.next=18;break}return l.next=9,this.getLatestBlockhash("finalized");case 9:if(u=l.sent,i===u.blockhash){l.next=13;break}return this._blockhashInfo={latestBlockhash:u,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},l.abrupt("return",u);case 13:return l.next=15,jr(ll/2);case 15:o++,l.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-s,"ms"));case 19:return l.prev=19,this._pollingBlockhash=!1,l.finish(19);case 22:case"end":return l.stop()}},t,this,[[1,,19,22]])}));function e(){return r.apply(this,arguments)}return e}()},{key:"getStakeMinimumDelegation",value:function(){var r=S(g.mark(function t(s){var a,i,o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=me(s),i=a.commitment,o=a.config,u=this._buildArgs([],i,"base64",o),h.next=4,this._rpcRequest("getStakeMinimumDelegation",u);case 4:if(c=h.sent,l=L(c,Be(B())),!("error"in l)){h.next=8;break}throw new D(l.error,"failed to get stake minimum delegation");case 8:return h.abrupt("return",l.result);case 9:case"end":return h.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"simulateTransaction",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h,p,d,v,m,b,w,y,A,k,C,E,T,F,O,H,M,ce,ge,_,K,J;return g.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!("message"in s)){I.next=17;break}if(o=s,u=o.serialize(),c=re.Buffer.from(u).toString("base64"),!(Array.isArray(a)||i!==void 0)){I.next=6;break}throw new Error("Invalid arguments");case 6:return l=a||{},l.encoding="base64","commitment"in l||(l.commitment=this.commitment),f=[c,l],I.next=12,this._rpcRequest("simulateTransaction",f);case 12:if(h=I.sent,p=L(h,Ds),!("error"in p)){I.next=16;break}throw new Error("failed to simulate transaction: "+p.error.message);case 16:return I.abrupt("return",p.result);case 17:if(s instanceof at?(v=s,d=new at,d.feePayer=v.feePayer,d.instructions=s.instructions,d.nonceInfo=v.nonceInfo,d.signatures=v.signatures):(d=at.populate(s),d._message=d._json=void 0),!(a!==void 0&&!Array.isArray(a))){I.next=20;break}throw new Error("Invalid arguments");case 20:if(m=a,!(d.nonceInfo&&m)){I.next=25;break}(b=d).sign.apply(b,Oe(m)),I.next=45;break;case 25:w=this._disableBlockhashCaching;case 26:return I.next=28,this._blockhashWithExpiryBlockHeight(w);case 28:if(A=I.sent,d.lastValidBlockHeight=A.lastValidBlockHeight,d.recentBlockhash=A.blockhash,m){I.next=33;break}return I.abrupt("break",45);case 33:if((y=d).sign.apply(y,Oe(m)),d.signature){I.next=36;break}throw new Error("!signature");case 36:if(k=d.signature.toString("base64"),!(!this._blockhashInfo.simulatedSignatures.includes(k)&&!this._blockhashInfo.transactionSignatures.includes(k))){I.next=42;break}return this._blockhashInfo.simulatedSignatures.push(k),I.abrupt("break",45);case 42:w=!0;case 43:I.next=26;break;case 45:return C=d._compile(),E=C.serialize(),T=d._serialize(E),F=T.toString("base64"),O={encoding:"base64",commitment:this.commitment},i&&(H=(Array.isArray(i)?i:C.nonProgramIds()).map(function(q){return q.toBase58()}),O.accounts={encoding:"base64",addresses:H}),m&&(O.sigVerify=!0),M=[F,O],I.next=55,this._rpcRequest("simulateTransaction",M);case 55:if(ce=I.sent,ge=L(ce,Ds),!("error"in ge)){I.next=60;break}throw"data"in ge.error&&(_=ge.error.data.logs,_&&Array.isArray(_)&&(K=`
    `,J=K+_.join(K),console.error(ge.error.message,J))),new Fs("failed to simulate transaction: "+ge.error.message,_);case 60:return I.abrupt("return",ge.result);case 61:case"end":return I.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"sendTransaction",value:function(){var r=S(g.mark(function t(s,a,i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!("version"in s)){d.next=7;break}if(!(a&&Array.isArray(a))){d.next=3;break}throw new Error("Invalid arguments");case 3:return o=s.serialize(),d.next=6,this.sendRawTransaction(o,a);case 6:return d.abrupt("return",d.sent);case 7:if(!(a===void 0||!Array.isArray(a))){d.next=9;break}throw new Error("Invalid arguments");case 9:if(u=a,!s.nonceInfo){d.next=14;break}s.sign.apply(s,Oe(u)),d.next=32;break;case 14:c=this._disableBlockhashCaching;case 15:return d.next=17,this._blockhashWithExpiryBlockHeight(c);case 17:if(l=d.sent,s.lastValidBlockHeight=l.lastValidBlockHeight,s.recentBlockhash=l.blockhash,s.sign.apply(s,Oe(u)),s.signature){d.next=23;break}throw new Error("!signature");case 23:if(f=s.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(f)){d.next=29;break}return this._blockhashInfo.transactionSignatures.push(f),d.abrupt("break",32);case 29:c=!0;case 30:d.next=15;break;case 32:return h=s.serialize(),d.next=35,this.sendRawTransaction(h,i);case 35:return d.abrupt("return",d.sent);case 36:case"end":return d.stop()}},t,this)}));function e(t,s,a){return r.apply(this,arguments)}return e}()},{key:"sendRawTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=Jr(s).toString("base64"),c.next=3,this.sendEncodedTransaction(i,a);case 3:return o=c.sent,c.abrupt("return",o);case 5:case"end":return c.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"sendEncodedTransaction",value:function(){var r=S(g.mark(function t(s,a){var i,o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i={encoding:"base64"},o=a&&a.skipPreflight,u=a&&a.preflightCommitment||this.commitment,a&&a.maxRetries!=null&&(i.maxRetries=a.maxRetries),a&&a.minContextSlot!=null&&(i.minContextSlot=a.minContextSlot),o&&(i.skipPreflight=o),u&&(i.preflightCommitment=u),c=[s,i],d.next=10,this._rpcRequest("sendTransaction",c);case 10:if(l=d.sent,f=L(l,Gf),!("error"in f)){d.next=15;break}throw"data"in f.error&&(h=f.error.data.logs),new Fs("failed to send transaction: "+f.error.message,h);case 15:return d.abrupt("return",f.result);case 16:case"end":return d.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(function(){S(g.mark(function t(){return g.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e._rpcWebSocket.notify("ping");case 3:a.next=7;break;case 5:a.prev=5,a.t0=a.catch(0);case 7:case"end":return a.stop()}},t,null,[[0,5]])}))()},5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(function(s){var a=_e(s,2),i=a[0],o=a[1];t._setSubscription(i,G(G({},o),{},{state:"pending"}))})}},{key:"_setSubscription",value:function(e,t){var s,a=(s=this._subscriptionsByHash[e])===null||s===void 0?void 0:s.state;if(this._subscriptionsByHash[e]=t,a!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(function(o){try{o(t.state)}catch{}})}}},{key:"_onSubscriptionStateChange",value:function(e,t){var s,a=this,i=this._subscriptionHashByClientSubscriptionId[e];if(i==null)return function(){};var o=(s=this._subscriptionStateChangeCallbacksByHash)[i]||(s[i]=new Set);return o.add(t),function(){o.delete(t),o.size===0&&delete a._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:function(){var r=S(g.mark(function t(){var s=this,a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(Object.keys(this._subscriptionsByHash).length!==0){u.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(function(){s._rpcWebSocketIdleTimeout=null;try{s._rpcWebSocket.close()}catch(c){c instanceof Error&&console.log("Error when closing socket connection: ".concat(c.message))}},500)),u.abrupt("return");case 3:if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){u.next=7;break}return this._rpcWebSocket.connect(),u.abrupt("return");case 7:return a=this._rpcWebSocketGeneration,i=function(){return a===s._rpcWebSocketGeneration},u.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var c=S(g.mark(function l(f){var h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(h=s._subscriptionsByHash[f],h!==void 0){d.next=3;break}return d.abrupt("return");case 3:d.t0=h.state,d.next=d.t0==="pending"||d.t0==="unsubscribed"?6:d.t0==="subscribed"?15:d.t0==="subscribing"||d.t0==="unsubscribing"?19:20;break;case 6:if(h.callbacks.size!==0){d.next=12;break}return delete s._subscriptionsByHash[f],h.state==="unsubscribed"&&delete s._subscriptionCallbacksByServerSubscriptionId[h.serverSubscriptionId],d.next=11,s._updateSubscriptions();case 11:return d.abrupt("return");case 12:return d.next=14,S(g.mark(function v(){var m,b,w;return g.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return m=h.args,b=h.method,A.prev=1,s._setSubscription(f,G(G({},h),{},{state:"subscribing"})),A.next=5,s._rpcWebSocket.call(b,m);case 5:return w=A.sent,s._setSubscription(f,G(G({},h),{},{serverSubscriptionId:w,state:"subscribed"})),s._subscriptionCallbacksByServerSubscriptionId[w]=h.callbacks,A.next=10,s._updateSubscriptions();case 10:A.next=20;break;case 12:if(A.prev=12,A.t0=A.catch(1),A.t0 instanceof Error&&console.error("".concat(b," error for argument"),m,A.t0.message),i()){A.next=17;break}return A.abrupt("return");case 17:return s._setSubscription(f,G(G({},h),{},{state:"pending"})),A.next=20,s._updateSubscriptions();case 20:case"end":return A.stop()}},v,null,[[1,12]])}))();case 14:return d.abrupt("break",20);case 15:if(h.callbacks.size!==0){d.next=18;break}return d.next=18,S(g.mark(function v(){var m,b;return g.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(m=h.serverSubscriptionId,b=h.unsubscribeMethod,!s._subscriptionsAutoDisposedByRpc.has(m)){y.next=5;break}s._subscriptionsAutoDisposedByRpc.delete(m),y.next=21;break;case 5:return s._setSubscription(f,G(G({},h),{},{state:"unsubscribing"})),s._setSubscription(f,G(G({},h),{},{state:"unsubscribing"})),y.prev=7,y.next=10,s._rpcWebSocket.call(b,[m]);case 10:y.next=21;break;case 12:if(y.prev=12,y.t0=y.catch(7),y.t0 instanceof Error&&console.error("".concat(b," error:"),y.t0.message),i()){y.next=17;break}return y.abrupt("return");case 17:return s._setSubscription(f,G(G({},h),{},{state:"subscribed"})),y.next=20,s._updateSubscriptions();case 20:return y.abrupt("return");case 21:return s._setSubscription(f,G(G({},h),{},{state:"unsubscribed"})),y.next=24,s._updateSubscriptions();case 24:case"end":return y.stop()}},v,null,[[7,12]])}))();case 18:return d.abrupt("break",20);case 19:return d.abrupt("break",20);case 20:case"end":return d.stop()}},l)}));return function(l){return c.apply(this,arguments)}}()));case 11:case"end":return u.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"_handleServerNotification",value:function(e,t){var s=this._subscriptionCallbacksByServerSubscriptionId[e];s!==void 0&&s.forEach(function(a){try{a.apply(void 0,Oe(t))}catch(i){console.error(i)}})}},{key:"_wsOnAccountNotification",value:function(e){var t=L(e,vf),s=t.result,a=t.subscription;this._handleServerNotification(a,[s.value,s.context])}},{key:"_makeSubscription",value:function(e,t){var s=this,a=this._nextClientSubscriptionId++,i=Us([e.method,t],!0),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]=G(G({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[a]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[a]=S(g.mark(function u(){var c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return delete s._subscriptionDisposeFunctionsByClientSubscriptionId[a],delete s._subscriptionHashByClientSubscriptionId[a],c=s._subscriptionsByHash[i],Ce(c!==void 0,"Could not find a `Subscription` when tearing down client subscription #".concat(a)),c.callbacks.delete(e.callback),f.next=7,s._updateSubscriptions();case 7:case"end":return f.stop()}},u)})),this._updateSubscriptions(),a}},{key:"onAccountChange",value:function(e,t,s){var a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}},{key:"removeAccountChangeListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"account change");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_wsOnProgramAccountNotification",value:function(e){var t=L(e,bf),s=t.result,a=t.subscription;this._handleServerNotification(a,[{accountId:s.value.pubkey,accountInfo:s.value.account},s.context])}},{key:"onProgramAccountChange",value:function(e,t,s,a){var i=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",a?{filters:a}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}},{key:"removeProgramAccountChangeListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"program account change");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"onLogs",value:function(e,t,s){var a=this._buildArgs([Vi(e)==="object"?{mentions:[e.toString()]}:e],s||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},a)}},{key:"removeOnLogsListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"logs");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_wsOnLogsNotification",value:function(e){var t=L(e,Yf),s=t.result,a=t.subscription;this._handleServerNotification(a,[s.value,s.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=L(e,kf),s=t.result,a=t.subscription;this._handleServerNotification(a,[s])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"slot change");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=L(e,Af),s=t.result,a=t.subscription;this._handleServerNotification(a,[s])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"slot update");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_unsubscribeClientSubscription",value:function(){var r=S(g.mark(function t(s,a){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(i=this._subscriptionDisposeFunctionsByClientSubscriptionId[s],!i){u.next=6;break}return u.next=4,i();case 4:u.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(s,"` for '").concat(a,"' events ")+"could not be found.");case 7:case"end":return u.stop()}},t,this)}));function e(t,s){return r.apply(this,arguments)}return e}()},{key:"_buildArgs",value:function(e,t,s,a){var i=t||this._commitment;if(i||s||a){var o={};s&&(o.encoding=s),i&&(o.commitment=i),a&&(o=Object.assign(o,a)),e.push(o)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,s,a){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,s,a)}},{key:"_wsOnSignatureNotification",value:function(e){var t=L(e,Ef),s=t.result,a=t.subscription;s.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(a),this._handleServerNotification(a,s.value==="receivedSignature"?[{type:"received"},s.context]:[{type:"status",result:s.value},s.context])}},{key:"onSignature",value:function(e,t,s){var a=this,i=this._buildArgs([e],s||this._commitment||"finalized"),o=this._makeSubscription({callback:function(c,l){if(c.type==="status"){t(c.result,l);try{a.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}},{key:"onSignatureWithOptions",value:function(e,t,s){var a=this,i=G(G({},s),{},{commitment:s&&s.commitment||this._commitment||"finalized"}),o=i.commitment,u=Bt(i,$l),c=this._buildArgs([e],o,void 0,u),l=this._makeSubscription({callback:function(h,p){t(h,p);try{a.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return l}},{key:"removeSignatureListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"signature result");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"_wsOnRootNotification",value:function(e){var t=L(e,Bf),s=t.result,a=t.subscription;this._handleServerNotification(a,[s])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:function(){var r=S(g.mark(function t(s){return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this._unsubscribeClientSubscription(s,"root change");case 2:case"end":return i.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()}]),n}(),Xf=function(){function n(r){de(this,n),this._keypair=void 0,this._keypair=r??Rs()}return pe(n,[{key:"publicKey",get:function(){return new Y(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new n(Rs())}},{key:"fromSecretKey",value:function(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");var s=e.slice(32,64);if(!t||!t.skipValidation){for(var a=e.slice(0,32),i=Sn(a),o=0;o<32;o++)if(s[o]!==i[o])throw new Error("provided secretKey is invalid")}return new n({publicKey:s,secretKey:e})}},{key:"fromSeed",value:function(e){var t=Sn(e),s=new Uint8Array(64);return s.set(e),s.set(t,32),new n({publicKey:t,secretKey:s})}}]),n}();Object.freeze({CreateLookupTable:{index:0,layout:j([W("instruction"),Xr("recentSlot"),ue("bumpSeed")])},FreezeLookupTable:{index:1,layout:j([W("instruction")])},ExtendLookupTable:{index:2,layout:j([W("instruction"),Xr(),ze(te(),Nr(W(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:j([W("instruction")])},CloseLookupTable:{index:4,layout:j([W("instruction")])}});new Y("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:j([ue("instruction"),W("units"),W("additionalFee")])},RequestHeapFrame:{index:1,layout:j([ue("instruction"),W("bytes")])},SetComputeUnitLimit:{index:2,layout:j([ue("instruction"),W("units")])},SetComputeUnitPrice:{index:3,layout:j([ue("instruction"),Xr("microLamports")])}});new Y("ComputeBudget111111111111111111111111111111");j([ue("numSignatures"),ue("padding"),Qe("signatureOffset"),Qe("signatureInstructionIndex"),Qe("publicKeyOffset"),Qe("publicKeyInstructionIndex"),Qe("messageDataOffset"),Qe("messageDataSize"),Qe("messageInstructionIndex")]);new Y("Ed25519SigVerify111111111111111111111111111");Zn.utils.isValidPrivateKey;Zn.getPublicKey;j([ue("numSignatures"),Qe("signatureOffset"),ue("signatureInstructionIndex"),Qe("ethAddressOffset"),ue("ethAddressInstructionIndex"),Qe("messageDataOffset"),Qe("messageDataSize"),ue("messageInstructionIndex"),Ee(20,"ethAddress"),Ee(64,"signature"),ue("recoveryId")]);new Y("KeccakSecp256k11111111111111111111111111111");new Y("StakeConfig11111111111111111111111111111111");var Ws=pe(function n(r,e,t){de(this,n),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=r,this.epoch=e,this.custodian=t});Ws.default=new Ws(0,0,Y.default);Object.freeze({Initialize:{index:0,layout:j([W("instruction"),Jc(),Xc()])},Authorize:{index:1,layout:j([W("instruction"),te("newAuthorized"),W("stakeAuthorizationType")])},Delegate:{index:2,layout:j([W("instruction")])},Split:{index:3,layout:j([W("instruction"),Ye("lamports")])},Withdraw:{index:4,layout:j([W("instruction"),Ye("lamports")])},Deactivate:{index:5,layout:j([W("instruction")])},Merge:{index:7,layout:j([W("instruction")])},AuthorizeWithSeed:{index:8,layout:j([W("instruction"),te("newAuthorized"),W("stakeAuthorizationType"),zr("authoritySeed"),te("authorityOwner")])}});new Y("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:j([W("instruction"),Qc()])},Authorize:{index:1,layout:j([W("instruction"),te("newAuthorized"),W("voteAuthorizationType")])},Withdraw:{index:3,layout:j([W("instruction"),Ye("lamports")])},AuthorizeWithSeed:{index:10,layout:j([W("instruction"),el()])}});new Y("Vote111111111111111111111111111111111111111");new Y("Va1idator1nfo111111111111111111111111111111");P({name:$(),website:Z($()),details:Z($()),keybaseUsername:Z($())});new Y("Vote111111111111111111111111111111111111111");j([te("nodePubkey"),te("authorizedWithdrawer"),ue("commission"),Ue(),ze(j([Ue("slot"),W("confirmationCount")]),Nr(W(),-8),"votes"),ue("rootSlotValid"),Ue("rootSlot"),Ue(),ze(j([Ue("epoch"),te("authorizedVoter")]),Nr(W(),-8),"authorizedVoters"),j([ze(j([te("authorizedPubkey"),Ue("epochOfLastAuthorizedSwitch"),Ue("targetEpoch")]),32,"buf"),Ue("idx"),ue("isEmpty")],"priorVoters"),Ue(),ze(j([Ue("epoch"),Ue("credits"),Ue("prevCredits")]),Nr(W(),-8),"epochCredits"),j([Ue("slot"),Ue("timestamp")],"lastTimestamp")]);function Qf(n){return function(r,e,t,s){return r.method==="solana_chainId"?(e.result=n,s()):t()}}function eh(n){return function(r,e,t,s){return r.method==="solana_provider_config"?(e.result=n,s()):t()}}function Ei(n){var r=n.chainId;return pt([Qf(r),eh(n)])}function rh(n){var r=n.rpcTarget,e=Gi({rpcTarget:r}),t=pt([Ei(n),e]);return{networkMiddleware:t,fetchMiddleware:e}}function th(n){var r=n.getAccounts;return Ut(function(){var e=S(g.mark(function t(s,a,i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=s.method,o==="getAccounts"){l.next=3;break}return l.abrupt("return",i());case 3:if(r){l.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return l.next=7,r(s);case 7:return u=l.sent,a.result=u,l.abrupt("return",void 0);case 10:case"end":return l.stop()}},t)}));return function(t,s,a){return e.apply(this,arguments)}}())}function nh(n){var r=n.requestAccounts;return Ut(function(){var e=S(g.mark(function t(s,a,i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=s.method,o==="requestAccounts"){l.next=3;break}return l.abrupt("return",i());case 3:if(r){l.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return l.next=7,r(s);case 7:return u=l.sent,a.result=u,l.abrupt("return",void 0);case 10:case"end":return l.stop()}},t)}));return function(t,s,a){return e.apply(this,arguments)}}())}function gr(n,r){return Ut(function(){var e=S(g.mark(function t(s,a,i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=s.method,o===n){l.next=3;break}return l.abrupt("return",i());case 3:if(r){l.next=5;break}throw new Error("WalletMiddleware - ".concat(n," not provided"));case 5:return l.next=7,r(s);case 7:return u=l.sent,a.result=u,l.abrupt("return",void 0);case 10:case"end":return l.stop()}},t)}));return function(t,s,a){return e.apply(this,arguments)}}())}function rs(n){var r=n.getAccounts,e=n.requestAccounts,t=n.signTransaction,s=n.signAndSendTransaction,a=n.signAllTransactions,i=n.signMessage,o=n.getPrivateKey,u=n.getSecretKey;return pt([nh({requestAccounts:e}),th({getAccounts:r}),gr("signTransaction",t),gr("signAndSendTransaction",s),gr("signAllTransactions",a),gr("signMessage",i),gr("solanaPrivateKey",o),gr("solanaSecretKey",u)])}function sh(n){var r=n.addNewChainConfig,e=n.switchSolanaChain;return pt([gr("addSolanaChain",r),gr("switchSolanaChain",e)])}function ah(n){var r=n.updatePrivatekey;return pt([gr("updateAccount",r)])}function Vs(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function Gs(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Vs(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Vs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function ih(n){var r=oh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function oh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gt=function(n){Ge(e,n);var r=ih(e);function e(t){var s=t.config,a=t.state;return de(this,e),r.call(this,{config:{chainConfig:Gs(Gs({},s.chainConfig),{},{chainNamespace:Rt.SOLANA})},state:a})}return pe(e,[{key:"switchChain",value:function(){var t=S(g.mark(function a(i){return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Promise.resolve());case 1:case"end":return u.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var t=S(g.mark(function a(i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=new Pn,u=this.getProviderHandlers(i),c=rs(u),o.push(c),l=Ei(this.config.chainConfig),o.push(l),f=this.getInjectedProviderProxy(i),f&&o.push(f),h=On(o),this.updateProviderEngineProxy(h),d.next=12,this.lookupNetwork();case 12:case"end":return d.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var t=S(g.mark(function a(){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=this.config.chainConfig,this.update({chainId:i.chainId}),u.abrupt("return",i.chainId||"");case 3:case"end":return u.stop()}},a,this)}));function s(){return t.apply(this,arguments)}return s}()},{key:"getInjectedProviderProxy",value:function(s){}}]),e}(Cn),ts=function(r){var e={requestAccounts:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.publicKey?[he.encode(r.publicKey.toBytes())]:[]);case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getAccounts:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",r.publicKey?[he.encode(r.publicKey.toBytes())]:[]);case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getPrivateKey:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getSecretKey:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),signTransaction:function(){var t=S(g.mark(function a(i){var o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.signTransaction(i.params.message);case 2:return o=c.sent,c.abrupt("return",o);case 4:case"end":return c.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signMessage:function(){var t=S(g.mark(function a(i){var o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.signMessage(i.params.message,i.params.display);case 2:return o=c.sent,c.abrupt("return",o.signature);case 4:case"end":return c.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signAllTransactions:function(){var t=S(g.mark(function a(i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(!((o=i.params)!==null&&o!==void 0&&o.message)||!((u=i.params)!==null&&u!==void 0&&u.message.length))){f.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return f.next=4,r.signAllTransactions(i.params.message);case 4:return c=f.sent,f.abrupt("return",c);case 6:case"end":return f.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signAndSendTransaction:function(){var t=S(g.mark(function a(i){var o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,r.signAndSendTransaction(i.params.message);case 2:return o=c.sent,c.abrupt("return",{signature:o.signature});case 4:case"end":return c.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}()};return e};function Zs(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function uh(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Zs(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Zs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Bi(n){return Ut(function(){var r=S(g.mark(function e(t,s,a){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.request(uh({},t));case 2:i=u.sent,s.result=i;case 4:case"end":return u.stop()}},e)}));return function(e,t,s){return r.apply(this,arguments)}}())}function ch(n){var r=lh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function lh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xh=function(n){Ge(e,n);var r=ch(e);function e(){return de(this,e),r.apply(this,arguments)}return pe(e,[{key:"getProviderHandlers",value:function(s){return ts(s)}},{key:"getInjectedProviderProxy",value:function(s){return Bi(s)}}]),e}(Gt),fh=function(r,e){var t={requestAccounts:function(){var s=S(g.mark(function i(){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.connect();case 2:return o=l.sent,u=o.data,l.abrupt("return",[u.publicKey]);case 5:case"end":return l.stop()}},i)}));function a(){return s.apply(this,arguments)}return a}(),getAccounts:function(){var s=S(g.mark(function i(){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.connect();case 2:return o=l.sent,u=o.data,l.abrupt("return",[u.publicKey]);case 5:case"end":return l.stop()}},i)}));function a(){return s.apply(this,arguments)}return a}(),getPrivateKey:function(){var s=S(g.mark(function i(){return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return u.stop()}},i)}));function a(){return s.apply(this,arguments)}return a}(),getSecretKey:function(){var s=S(g.mark(function i(){return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return u.stop()}},i)}));function a(){return s.apply(this,arguments)}return a}(),signTransaction:function(){var s=S(g.mark(function i(o){var u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(u=o.params.message,u){d.next=3;break}throw se.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 3:return d.next=5,r.signTransaction(he.encode(u.serializeMessage()));case 5:if(c=d.sent,l=c.data,!(!l.publicKey||!l.signature)){d.next=9;break}throw new Error("Invalid signature from slope wallet");case 9:return f=new Y(l.publicKey),h=he.decode(l.signature),u.addSignature(f,be.Buffer.from(h)),d.abrupt("return",u);case 13:case"end":return d.stop()}},i)}));function a(i){return s.apply(this,arguments)}return a}(),signMessage:function(){var s=S(g.mark(function i(o){var u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.signMessage(o.params.message);case 2:return u=l.sent,l.abrupt("return",he.decode(u.data.signature));case 4:case"end":return l.stop()}},i)}));function a(i){return s.apply(this,arguments)}return a}(),signAndSendTransaction:function(){var s=S(g.mark(function i(o){var u,c,l,f,h,p,d,v,m;return g.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(u=e(),u){w.next=3;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:if(c=o.params.message,c){w.next=6;break}throw se.ethErrors.rpc.invalidRequest({message:"Invalid transaction message"});case 6:return w.next=8,r.signTransaction(he.encode(c.serializeMessage()));case 8:if(l=w.sent,f=l.data,!(!f.publicKey||!f.signature)){w.next=12;break}throw new Error("Invalid signature from slope wallet");case 12:return h=new Y(f.publicKey),p=he.decode(f.signature),c.addSignature(h,be.Buffer.from(p)),w.next=17,u.request({method:"solana_provider_config",params:[]});case 17:return d=w.sent,v=new es(d.rpcTarget),w.next=21,v.sendRawTransaction(c.serialize());case 21:return m=w.sent,w.abrupt("return",{signature:m});case 23:case"end":return w.stop()}},i)}));function a(i){return s.apply(this,arguments)}return a}(),signAllTransactions:function(){var s=S(g.mark(function i(o){var u,c,l,f,h,p,d,v,m,b,w,y;return g.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(!((u=o.params)!==null&&u!==void 0&&u.message)||!((c=o.params)!==null&&c!==void 0&&c.message.length))){k.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:for(f=o.params.message,h=f.length,p=[],d=0;d<h;d++)p.push(he.encode(o.params.message[d].serializeMessage()));return k.next=8,r.signAllTransactions(p);case 8:if(v=k.sent,m=v.msg,b=v.data,!(!b.publicKey||((l=b.signatures)===null||l===void 0?void 0:l.length)!==h)){k.next=13;break}throw new Error(m);case 13:for(w=new Y(b.publicKey),d=0;d<h;d++)y=he.decode(b.signatures[d]),f[d].addSignature(w,be.Buffer.from(y));return k.abrupt("return",f);case 16:case"end":return k.stop()}},i)}));function a(i){return s.apply(this,arguments)}return a}()};return t};function hh(n){var r=dh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function dh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $h=function(n){Ge(e,n);var r=hh(e);function e(){return de(this,e),r.apply(this,arguments)}return pe(e,[{key:"getProviderHandlers",value:function(s){return fh(s,this.getProviderEngineProxy.bind(this))}}]),e}(Gt),ph=function(r,e){var t=ts(r);return t.signAndSendTransaction=function(){var s=S(g.mark(function a(i){var o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=e(),o){p.next=3;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return p.next=5,r.signTransaction(i.params.message);case 5:return u=p.sent,p.next=8,o.request({method:"solana_provider_config",params:[]});case 8:return c=p.sent,l=new es(c.rpcTarget),p.next=12,l.sendRawTransaction(u.serialize());case 12:return f=p.sent,p.abrupt("return",{signature:f});case 14:case"end":return p.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),t};function gh(n){var r=mh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function mh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lh=function(n){Ge(e,n);var r=gh(e);function e(){return de(this,e),r.apply(this,arguments)}return pe(e,[{key:"getProviderHandlers",value:function(s){return ph(s,this.getProviderEngineProxy.bind(this))}}]),e}(Gt),vh=function(r,e){var t=ts(r);return t.signMessage=function(){var s=S(g.mark(function a(i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,r.sign(i.params.message,"utf8");case 2:return o=l.sent,u=o.signature,l.abrupt("return",u);case 5:case"end":return l.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),t.signAndSendTransaction=function(){var s=S(g.mark(function a(i){var o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(o=e(),o){p.next=3;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 3:return p.next=5,r.signTransaction(i.params.message);case 5:return u=p.sent,p.next=8,o.request({method:"solana_provider_config",params:[]});case 8:return c=p.sent,l=new es(c.rpcTarget),p.next=12,l.sendRawTransaction(u.serialize());case 12:return f=p.sent,p.abrupt("return",{signature:f});case 14:case"end":return p.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),t};function yh(n){var r=bh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function bh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Nh=function(n){Ge(e,n);var r=yh(e);function e(){return de(this,e),r.apply(this,arguments)}return pe(e,[{key:"getProviderHandlers",value:function(s){return vh(s,this.getProviderEngineProxy.bind(this))}}]),e}(Gt),wh=function(r){var e={requestAccounts:function(){var t=S(g.mark(function a(){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return i=u.sent,u.abrupt("return",i);case 4:case"end":return u.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getAccounts:function(){var t=S(g.mark(function a(){var i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return i=u.sent,u.abrupt("return",i);case 4:case"end":return u.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getPrivateKey:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),getSecretKey:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:throw se.ethErrors.rpc.methodNotSupported();case 1:case"end":return o.stop()}},a)}));function s(){return t.apply(this,arguments)}return s}(),signMessage:function(){var t=S(g.mark(function a(i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if((o=i.params)!==null&&o!==void 0&&o.message){l.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return l.next=4,r.signMessage(i.params.message);case 4:return u=l.sent,l.abrupt("return",u);case 6:case"end":return l.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signTransaction:function(){var t=S(g.mark(function a(i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((o=i.params)!==null&&o!==void 0&&o.message){f.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return u=i.params.message,f.next=5,r.signTransaction(u);case 5:return c=f.sent,f.abrupt("return",c);case 7:case"end":return f.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signAndSendTransaction:function(){var t=S(g.mark(function a(i){var o,u,c;return g.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((o=i.params)!==null&&o!==void 0&&o.message){f.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return u=i.params.message,f.next=5,r.sendTransaction(u);case 5:return c=f.sent,f.abrupt("return",{signature:c});case 7:case"end":return f.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}(),signAllTransactions:function(){var t=S(g.mark(function a(i){var o,u,c,l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!((o=i.params)!==null&&o!==void 0&&o.message)||!((u=i.params)!==null&&u!==void 0&&u.message.length))){h.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return c=i.params.message,h.next=5,r.signAllTransactions(c);case 5:return l=h.sent,h.abrupt("return",l);case 7:case"end":return h.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}()};return e};function Ys(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function Et(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ys(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ys(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function kh(n){var r=Sh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function Sh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uh=function(n){Ge(e,n);var r=kh(e);function e(t){var s=t.config,a=t.state;return de(this,e),r.call(this,{config:{chainConfig:Et(Et({},s.chainConfig),{},{chainNamespace:Rt.SOLANA})},state:a})}return pe(e,[{key:"switchChain",value:function(){var t=S(g.mark(function a(i){return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Promise.resolve());case 1:case"end":return u.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var t=S(g.mark(function a(i){return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.handleInjectedProviderUpdate(i),u.next=3,this.setupEngine(i);case 3:case"end":return u.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var t=S(g.mark(function a(){var i,o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.provider){l.next=2;break}throw se.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return i=this.config.chainConfig.chainId,l.next=5,this.provider.request({method:"solana_chainId"});case 5:if(o=l.sent,u=ds(o.toString())?o:"0x".concat(parseInt(o,10).toString(16)),i===u){l.next=9;break}throw Tn.rpcConnectionError("Invalid network, net_version is: ".concat(u,", expected: ").concat(i));case 9:return this.update({chainId:u}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),l.abrupt("return",this.state.chainId);case 13:case"end":return l.stop()}},a,this)}));function s(){return t.apply(this,arguments)}return s}()},{key:"setupEngine",value:function(){var t=S(g.mark(function a(i){var o,u,c,l,f;return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=wh(i),u=rs(o),c=Bi(i),l=new Pn,l.push(u),l.push(c),f=On(l),this.updateProviderEngineProxy(f),p.next=10,this.lookupNetwork();case 10:case"end":return p.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"handleInjectedProviderUpdate",value:function(){var t=S(g.mark(function a(i){var o=this;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:i.on("accountsChanged",function(){var l=S(g.mark(function f(h){return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:o.provider.emit("accountsChanged",h);case 1:case"end":return d.stop()}},f)}));return function(f){return l.apply(this,arguments)}}()),i.on("chainChanged",function(){var l=S(g.mark(function f(h){var p;return g.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return p=ds(h)?h:"0x".concat(parseInt(h,10).toString(16)),o.configure({chainConfig:Et(Et({},o.config.chainConfig),{},{chainId:p})}),v.next=4,o.setupProvider(i);case 4:case"end":return v.stop()}},f)}));return function(f){return l.apply(this,arguments)}}());case 2:case"end":return c.stop()}},a)}));function s(a){return t.apply(this,arguments)}return s}()}]),e}(Cn);function Ah(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Eh(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var t=0,s=function(){};return{s,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,o;return{s:function(){e=e.call(n)},n:function(){var c=e.next();return a=c.done,c},e:function(c){i=!0,o=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(i)throw o}}}}function Eh(n,r){if(n){if(typeof n=="string")return Js(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Js(n,r)}}function Js(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Bh(n){return Rn.apply(this,arguments)}function Rn(){return Rn=S(g.mark(function n(r){var e,t,s,a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e=r.privKey,t=r.getProviderEngineProxy,s=function(){return Xf.fromSecretKey(be.Buffer.from(e,"hex"))},typeof e=="string"){u.next=4;break}throw Tn.invalidParams("privKey must be a string");case 4:return a=s(),i={requestAccounts:function(){var c=S(g.mark(function f(){return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",[a.publicKey.toBase58()]);case 1:case"end":return p.stop()}},f)}));function l(){return c.apply(this,arguments)}return l}(),getAccounts:function(){var c=S(g.mark(function f(){return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",[a.publicKey.toBase58()]);case 1:case"end":return p.stop()}},f)}));function l(){return c.apply(this,arguments)}return l}(),getPrivateKey:function(){var c=S(g.mark(function f(){return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",e);case 1:case"end":return p.stop()}},f)}));function l(){return c.apply(this,arguments)}return l}(),getSecretKey:function(){var c=S(g.mark(function f(){return g.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",he.encode(a.secretKey));case 1:case"end":return p.stop()}},f)}));function l(){return c.apply(this,arguments)}return l}(),signTransaction:function(){var c=S(g.mark(function f(h){var p,d;return g.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if((p=h.params)!==null&&p!==void 0&&p.message){m.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return d=h.params.message,d.partialSign(a),m.abrupt("return",d);case 5:case"end":return m.stop()}},f)}));function l(f){return c.apply(this,arguments)}return l}(),signMessage:function(){var c=S(g.mark(function f(h){var p,d;return g.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if((p=h.params)!==null&&p!==void 0&&p.message){m.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:return d=Zi.sign.detached(h.params.message,a.secretKey),m.abrupt("return",d);case 4:case"end":return m.stop()}},f)}));function l(f){return c.apply(this,arguments)}return l}(),signAndSendTransaction:function(){var c=S(g.mark(function f(h){var p,d,v,m;return g.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if((p=h.params)!==null&&p!==void 0&&p.message){w.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:if(d=t(),d){w.next=5;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return v=h.params.message,v.sign(a),w.next=9,d.request({method:"sendTransaction",params:[he.encode(v.serialize())]});case 9:return m=w.sent,w.abrupt("return",{signature:m});case 11:case"end":return w.stop()}},f)}));function l(f){return c.apply(this,arguments)}return l}(),signAllTransactions:function(){var c=S(g.mark(function f(h){var p,d,v,m,b,w,y,A;return g.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(!((p=h.params)!==null&&p!==void 0&&p.message)||!((d=h.params)!==null&&d!==void 0&&d.message.length))){C.next=2;break}throw se.ethErrors.rpc.invalidParams("message");case 2:m=(v=h.params)===null||v===void 0?void 0:v.message,b=Ah(m||[]);try{for(b.s();!(w=b.n()).done;)y=w.value,A=y,A.partialSign(a)}catch(E){b.e(E)}finally{b.f()}return C.abrupt("return",m);case 6:case"end":return C.stop()}},f)}));function l(f){return c.apply(this,arguments)}return l}()},u.abrupt("return",i);case 7:case"end":return u.stop()}},n)})),Rn.apply(this,arguments)}function Xs(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,t)}return e}function Qs(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Xs(Object(e),!0).forEach(function(t){wr(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Xs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Ih(n){var r=Rh();return function(){var t=ye(n),s;if(r){var a=ye(this).constructor;s=Reflect.construct(t,arguments,a)}else s=t.apply(this,arguments);return or(this,s)}}function Rh(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ea=function(n){Ge(e,n);var r=Ih(e);function e(t){var s=t.config,a=t.state;return de(this,e),r.call(this,{config:{chainConfig:Qs(Qs({},s.chainConfig),{},{chainNamespace:Rt.SOLANA})},state:a})}return pe(e,[{key:"enable",value:function(){var t=S(g.mark(function a(){return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.state.privateKey){o.next=2;break}throw se.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return o.next=4,this.setupProvider(this.state.privateKey);case 4:return o.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return o.stop()}},a,this)}));function s(){return t.apply(this,arguments)}return s}()},{key:"setupProvider",value:function(){var t=S(g.mark(function a(i){var o,u,c,l,f,h;return g.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Bh({privKey:i,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return o=d.sent,u=rs(o),c=new Pn,l=rh(this.config.chainConfig),f=l.networkMiddleware,c.push(this.getChainSwitchMiddleware()),c.push(this.getAccountMiddleware()),c.push(u),c.push(f),h=On(c),this.updateProviderEngineProxy(h),d.next=14,this.lookupNetwork();case 14:case"end":return d.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"updateAccount",value:function(){var t=S(g.mark(function a(i){var o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this._providerEngineProxy){c.next=2;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return c.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(o=c.sent,o===i.privateKey){c.next=14;break}return c.next=8,this.setupProvider(i.privateKey);case 8:return c.t0=this._providerEngineProxy,c.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:c.t1=c.sent,c.t2={accounts:c.t1},c.t0.emit.call(c.t0,"accountsChanged",c.t2);case 14:case"end":return c.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"switchChain",value:function(){var t=S(g.mark(function a(i){var o,u;return g.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this._providerEngineProxy){l.next=2;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return o=this.getChainConfig(i.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:o}),l.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return u=l.sent,l.next=10,this.setupProvider(u);case 10:case"end":return l.stop()}},a,this)}));function s(a){return t.apply(this,arguments)}return s}()},{key:"lookupNetwork",value:function(){var t=S(g.mark(function a(){var i,o;return g.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this._providerEngineProxy){c.next=2;break}throw se.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return c.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(i=c.sent,o=this.config.chainConfig,i==="ok"){c.next=8;break}throw Tn.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(o.rpcTarget));case 8:return this.update({chainId:o.chainId}),this.state.chainId!==o.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),c.abrupt("return",this.state.chainId);case 11:case"end":return c.stop()}},a,this)}));function s(){return t.apply(this,arguments)}return s}()},{key:"getChainSwitchMiddleware",value:function(){var s=this,a={addNewChainConfig:function(){var o=S(g.mark(function c(l){var f,h,p,d,v,m;return g.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(l.params){w.next=2;break}throw se.ethErrors.rpc.invalidParams("Missing request params");case 2:if(f=l.params,h=f.chainId,p=f.chainName,d=f.rpcUrls,v=f.blockExplorerUrls,m=f.nativeCurrency,h){w.next=5;break}throw se.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(!(!d||d.length===0)){w.next=7;break}throw se.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(m){w.next=9;break}throw se.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:s.addChain({chainNamespace:Rt.SOLANA,chainId:h,ticker:(m==null?void 0:m.symbol)||"SOL",tickerName:(m==null?void 0:m.name)||"Solana",displayName:p,rpcTarget:d[0],blockExplorer:(v==null?void 0:v[0])||""});case 10:case"end":return w.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}(),switchSolanaChain:function(){var o=S(g.mark(function c(l){return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(l.params){h.next=2;break}throw se.ethErrors.rpc.invalidParams("Missing request params");case 2:if(l.params.chainId){h.next=4;break}throw se.ethErrors.rpc.invalidParams("Missing chainId");case 4:return h.next=6,s.switchChain(l.params);case 6:case"end":return h.stop()}},c)}));function u(c){return o.apply(this,arguments)}return u}()},i=sh(a);return i}},{key:"getAccountMiddleware",value:function(){var s=this,a={updatePrivatekey:function(){var i=S(g.mark(function u(c){var l;return g.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c.params){h.next=2;break}throw se.ethErrors.rpc.invalidParams("Missing request params");case 2:if(c.params.privateKey){h.next=4;break}throw se.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return l=c.params.privateKey,h.next=7,s.updateAccount({privateKey:l});case 7:case"end":return h.stop()}},u)}));function o(u){return i.apply(this,arguments)}return o}()};return ah(a)}}]),e}(Cn);wr(ea,"getProviderInstance",function(){var n=S(g.mark(function r(e){var t;return g.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=new ea({config:{chainConfig:e.chainConfig}}),a.next=3,t.setupProvider(e.privKey);case 3:return a.abrupt("return",t);case 4:case"end":return a.stop()}},r)}));return function(r){return n.apply(this,arguments)}}());var Fh=function(){function n(r){de(this,n),wr(this,"provider",void 0),this.provider=r}return pe(n,[{key:"requestAccounts",value:function(){var r=S(g.mark(function t(){var s;return g.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"signAndSendTransaction",value:function(){var r=S(g.mark(function t(s){var a,i;return g.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:s}});case 2:return a=u.sent,i=a.signature,u.abrupt("return",{signature:i});case 5:case"end":return u.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"signTransaction",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.provider.request({method:"signTransaction",params:{message:s}});case 2:return a=o.sent,o.abrupt("return",a);case 4:case"end":return o.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"signAllTransactions",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.provider.request({method:"signAllTransactions",params:{message:s}});case 2:return a=o.sent,o.abrupt("return",a);case 4:case"end":return o.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"signMessage",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.provider.request({method:"signMessage",params:{message:s}});case 2:return a=o.sent,o.abrupt("return",a);case 4:case"end":return o.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"request",value:function(){var r=S(g.mark(function t(s){var a;return g.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.provider.request(s);case 2:return a=o.sent,o.abrupt("return",a);case 4:case"end":return o.stop()}},t,this)}));function e(t){return r.apply(this,arguments)}return e}()}]),n}();export{xh as PhantomInjectedProvider,$h as SlopeInjectedProxyProvider,ea as SolanaPrivateKeyProvider,Fh as SolanaWallet,Lh as SolflareInjectedProvider,Nh as SolletInjectedProvider,Uh as TorusInjectedProvider};
